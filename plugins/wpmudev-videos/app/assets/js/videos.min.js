(function(){var __webpack_modules__={135:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bt: function() { return /* reexport safe */ _ListThumb__WEBPACK_IMPORTED_MODULE_8__.B; },\n/* harmony export */   E0: function() { return /* reexport safe */ _ImageTag__WEBPACK_IMPORTED_MODULE_0__.E; },\n/* harmony export */   FM: function() { return /* reexport safe */ _PageFooter__WEBPACK_IMPORTED_MODULE_2__.F; },\n/* harmony export */   S3: function() { return /* reexport safe */ _WhiteLabelBanner__WEBPACK_IMPORTED_MODULE_1__.S; },\n/* harmony export */   Sy: function() { return /* reexport safe */ _VideoIframe__WEBPACK_IMPORTED_MODULE_9__.S; },\n/* harmony export */   cd: function() { return /* reexport safe */ _UploadThumb__WEBPACK_IMPORTED_MODULE_11__.c; },\n/* harmony export */   dh: function() { return /* reexport safe */ _UpgradeNotice__WEBPACK_IMPORTED_MODULE_3__.d; },\n/* harmony export */   kS: function() { return /* reexport safe */ _VideoSearchForm__WEBPACK_IMPORTED_MODULE_12__.k; },\n/* harmony export */   oK: function() { return /* reexport safe */ _ExpiredNotice__WEBPACK_IMPORTED_MODULE_4__.o; },\n/* harmony export */   uh: function() { return /* reexport safe */ _GoTopButton__WEBPACK_IMPORTED_MODULE_10__.u; },\n/* harmony export */   xY: function() { return /* reexport safe */ _DashNotice__WEBPACK_IMPORTED_MODULE_5__.x; }\n/* harmony export */ });\n/* harmony import */ var _ImageTag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8844);\n/* harmony import */ var _WhiteLabelBanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6057);\n/* harmony import */ var _PageFooter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5132);\n/* harmony import */ var _UpgradeNotice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(837);\n/* harmony import */ var _ExpiredNotice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3778);\n/* harmony import */ var _DashNotice__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1319);\n/* harmony import */ var _UserRoles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7122);\n/* harmony import */ var _SortableElements__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3423);\n/* harmony import */ var _ListThumb__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(3603);\n/* harmony import */ var _VideoIframe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(5841);\n/* harmony import */ var _GoTopButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(4460);\n/* harmony import */ var _UploadThumb__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(5320);\n/* harmony import */ var _VideoSearchForm__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(5498);\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL2NvbXBvbmVudHMvaW5kZXguanM/MmQ0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL0ltYWdlVGFnJztcbmV4cG9ydCAqIGZyb20gJy4vV2hpdGVMYWJlbEJhbm5lcic7XG5leHBvcnQgKiBmcm9tICcuL1BhZ2VGb290ZXInO1xuZXhwb3J0ICogZnJvbSAnLi9VcGdyYWRlTm90aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vRXhwaXJlZE5vdGljZSc7XG5leHBvcnQgKiBmcm9tICcuL0Rhc2hOb3RpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9Vc2VyUm9sZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9Tb3J0YWJsZUVsZW1lbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vTGlzdFRodW1iJztcbmV4cG9ydCAqIGZyb20gJy4vVmlkZW9JZnJhbWUnO1xuZXhwb3J0ICogZnJvbSAnLi9Hb1RvcEJ1dHRvbic7XG5leHBvcnQgKiBmcm9tICcuL1VwbG9hZFRodW1iJztcbmV4cG9ydCAqIGZyb20gJy4vVmlkZW9TZWFyY2hGb3JtJzsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///135\n")},9571:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $n: function() { return /* reexport safe */ _Button__WEBPACK_IMPORTED_MODULE_11__.$; },\n/* harmony export */   B8: function() { return /* reexport safe */ _List__WEBPACK_IMPORTED_MODULE_19__.B; },\n/* harmony export */   In: function() { return /* reexport safe */ _Icon__WEBPACK_IMPORTED_MODULE_0__.I; },\n/* harmony export */   JU: function() { return /* reexport safe */ _Label__WEBPACK_IMPORTED_MODULE_22__.J; },\n/* harmony export */   K0: function() { return /* reexport safe */ _IconButton__WEBPACK_IMPORTED_MODULE_26__.K; },\n/* harmony export */   Q8: function() { return /* reexport safe */ _MediaUpload__WEBPACK_IMPORTED_MODULE_24__.Q; },\n/* harmony export */   RL: function() { return /* reexport safe */ _StaticNotice__WEBPACK_IMPORTED_MODULE_15__.R; },\n/* harmony export */   Sc: function() { return /* reexport safe */ _Checkbox__WEBPACK_IMPORTED_MODULE_12__.S; },\n/* harmony export */   Y9: function() { return /* reexport safe */ _Header__WEBPACK_IMPORTED_MODULE_1__.Y; },\n/* harmony export */   aF: function() { return /* reexport safe */ _Modal__WEBPACK_IMPORTED_MODULE_14__.a; },\n/* harmony export */   az: function() { return /* reexport safe */ _Box__WEBPACK_IMPORTED_MODULE_7__.a; },\n/* harmony export */   ii: function() { return /* reexport safe */ _TopNotice__WEBPACK_IMPORTED_MODULE_4__.i; },\n/* harmony export */   iw: function() { return /* reexport safe */ _WhiteLabelSummary__WEBPACK_IMPORTED_MODULE_18__.i; },\n/* harmony export */   l6: function() { return /* reexport safe */ _Select__WEBPACK_IMPORTED_MODULE_3__.l; },\n/* harmony export */   pd: function() { return /* reexport safe */ _Input__WEBPACK_IMPORTED_MODULE_10__.p; },\n/* harmony export */   wi: function() { return /* reexport safe */ _Footer__WEBPACK_IMPORTED_MODULE_2__.w; }\n/* harmony export */ });\n/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7028);\n/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7347);\n/* harmony import */ var _Footer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5528);\n/* harmony import */ var _Select__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8216);\n/* harmony import */ var _TopNotice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3564);\n/* harmony import */ var _MobileNav__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6386);\n/* harmony import */ var _SideNav__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(3734);\n/* harmony import */ var _Box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9907);\n/* harmony import */ var _Toggle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(4377);\n/* harmony import */ var _BorderFrame__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2740);\n/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2546);\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(9590);\n/* harmony import */ var _Checkbox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(4268);\n/* harmony import */ var _FileUpload__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(8811);\n/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(6744);\n/* harmony import */ var _StaticNotice__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(9906);\n/* harmony import */ var _ProgressBar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(4113);\n/* harmony import */ var _RadioTabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(7385);\n/* harmony import */ var _WhiteLabelSummary__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(5390);\n/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(7735);\n/* harmony import */ var _Accordion__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(3057);\n/* harmony import */ var _Table__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(7670);\n/* harmony import */ var _Label__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(6686);\n/* harmony import */ var _Textarea__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(2868);\n/* harmony import */ var _MediaUpload__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(9847);\n/* harmony import */ var _Portal__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(5071);\n/* harmony import */ var _IconButton__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(9850);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU3MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL2xpYi9jb21wb25lbnRzL2luZGV4LmpzP2FhM2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9JY29uJztcbmV4cG9ydCAqIGZyb20gJy4vSGVhZGVyJztcbmV4cG9ydCAqIGZyb20gJy4vRm9vdGVyJztcbmV4cG9ydCAqIGZyb20gJy4vU2VsZWN0JztcbmV4cG9ydCAqIGZyb20gJy4vVG9wTm90aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vTW9iaWxlTmF2JztcbmV4cG9ydCAqIGZyb20gJy4vU2lkZU5hdic7XG5leHBvcnQgKiBmcm9tICcuL0JveCc7XG5leHBvcnQgKiBmcm9tICcuL1RvZ2dsZSc7XG5leHBvcnQgKiBmcm9tICcuL0JvcmRlckZyYW1lJztcbmV4cG9ydCAqIGZyb20gJy4vSW5wdXQnO1xuZXhwb3J0ICogZnJvbSAnLi9CdXR0b24nO1xuZXhwb3J0ICogZnJvbSAnLi9DaGVja2JveCc7XG5leHBvcnQgKiBmcm9tICcuL0ZpbGVVcGxvYWQnO1xuZXhwb3J0ICogZnJvbSAnLi9Nb2RhbCc7XG5leHBvcnQgKiBmcm9tICcuL1N0YXRpY05vdGljZSc7XG5leHBvcnQgKiBmcm9tICcuL1Byb2dyZXNzQmFyJztcbmV4cG9ydCAqIGZyb20gJy4vUmFkaW9UYWJzJztcbmV4cG9ydCAqIGZyb20gJy4vV2hpdGVMYWJlbFN1bW1hcnknO1xuZXhwb3J0ICogZnJvbSAnLi9MaXN0JztcbmV4cG9ydCAqIGZyb20gJy4vQWNjb3JkaW9uJztcbmV4cG9ydCAqIGZyb20gJy4vVGFibGUnO1xuZXhwb3J0ICogZnJvbSAnLi9MYWJlbCc7XG5leHBvcnQgKiBmcm9tICcuL1RleHRhcmVhJztcbmV4cG9ydCAqIGZyb20gJy4vTWVkaWFVcGxvYWQnO1xuZXhwb3J0ICogZnJvbSAnLi9Qb3J0YWwnO1xuZXhwb3J0ICogZnJvbSAnLi9JY29uQnV0dG9uJzsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9571\n")},748:function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6540);\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(5338);\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 11 modules\nvar es = __webpack_require__(7040);\n// EXTERNAL MODULE: ./app/src/store/store.js\nvar store = __webpack_require__(9457);\n// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js\nvar dist = __webpack_require__(4976);\n// EXTERNAL MODULE: ./app/src/lib/components/index.js\nvar components = __webpack_require__(9571);\n// EXTERNAL MODULE: ./app/src/lib/hooks/index.js + 4 modules\nvar hooks = __webpack_require__(1635);\n// EXTERNAL MODULE: ./app/src/store/slices/notice.js\nvar notice = __webpack_require__(9472);\n// EXTERNAL MODULE: ./app/src/helpers/api/index.js + 1 modules\nvar api = __webpack_require__(9331);\n// EXTERNAL MODULE: ./app/src/components/index.js\nvar src_components = __webpack_require__(135);\n// EXTERNAL MODULE: ./node_modules/@wordpress/i18n/build-module/index.js + 10 modules\nvar build_module = __webpack_require__(4214);\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4848);\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/SummaryBox/SummaryBox.js\nvar _window$ivtModuleVars;\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\nvar never = (0,build_module.__)(\'Never\', \'wpmudev_vids\');\nvar _ref = (_window$ivtModuleVars = window.ivtModuleVars) !== null && _window$ivtModuleVars !== void 0 ? _window$ivtModuleVars : {},\n  hosts = _ref.hosts;\nfunction SummaryBox(_ref2) {\n  var search = _ref2.search,\n    setSearch = _ref2.setSearch;\n  var _useState = (0,react.useState)(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    total = _useState2[0],\n    setTotal = _useState2[1];\n  var _useState3 = (0,react.useState)(never),\n    _useState4 = _slicedToArray(_useState3, 2),\n    recent = _useState4[0],\n    setRecent = _useState4[1];\n  var _useState5 = (0,react.useState)(never),\n    _useState6 = _slicedToArray(_useState5, 2),\n    recentCustom = _useState6[0],\n    setRecentCustom = _useState6[1];\n  var _useState7 = (0,react.useState)(\'\'),\n    _useState8 = _slicedToArray(_useState7, 2),\n    host = _useState8[0],\n    setHost = _useState8[1];\n\n  // on mount\n  (0,react.useEffect)(function () {\n    // Update summary stats\n    updateStats();\n  }, []);\n\n  /**\n   * Get the host name from key.\n   *\n   * @param {string} host Host key.\n   *\n   * @since 1.8.0\n   *\n   * @return {string}\n   */\n  var getHostName = function getHostName() {\n    var _hosts$host;\n    return (hosts === null || hosts === void 0 || (_hosts$host = hosts[host]) === null || _hosts$host === void 0 ? void 0 : _hosts$host.name) || never;\n  };\n\n  /**\n   * Set the summary stats from the API response.\n   *\n   * @returns {void}\n   */\n  var setStats = function setStats(data) {\n    var recent = data.recent;\n    var counts = data.count;\n\n    // Last updated video.\n    if (recent.updated_video.video_title) {\n      setRecent(recent.updated_video);\n    }\n\n    // Last created video.\n    if (recent.created_custom_video.video_title) {\n      setRecentCustom(recent.created_custom_video);\n    }\n\n    // Recent video host.\n    if (recent.created_custom_video.video_host) {\n      var video_host = recent.created_custom_video.video_host;\n      setHost(video_host);\n    }\n\n    // Total video count.\n    if (counts.videos) {\n      setTotal(counts.videos);\n    }\n  };\n\n  /**\n   * Update the summary stats using the API.\n   *\n   * @returns {void}\n   */\n  function updateStats() {\n    (0,api/* restGet */.B8)({\n      path: \'summary\'\n    }).then(function (response) {\n      if (response.success && response.data) {\n        setStats(response.data);\n      }\n    });\n  }\n\n  // Items\n  var listItems = [{\n    label: (0,build_module.__)(\'Recently updated video\', \'wpmudev_vids\'),\n    details: recent === null || recent === void 0 ? void 0 : recent.video_title,\n    navlink: "/view/".concat(recent === null || recent === void 0 ? void 0 : recent.id)\n  }, {\n    label: (0,build_module.__)(\'Recent video host\', \'wpmudev_vids\'),\n    details: getHostName()\n  }, {\n    label: (0,build_module.__)(\'Recent custom video\', \'wpmudev_vids\'),\n    details: recentCustom.video_title,\n    navlink: "/view/".concat(recentCustom === null || recentCustom === void 0 ? void 0 : recentCustom.id)\n  }];\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* WhiteLabelSummary */.iw, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* WhiteLabelSummary */.iw.Segment, {\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* WhiteLabelSummary */.iw.Details, {\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          className: "sui-summary-large",\n          children: total\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          className: "sui-summary-sub",\n          children: (0,build_module.__)(\'Videos\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* VideoSearchForm */.kS, {\n          search: search,\n          setSearch: setSearch\n        })]\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* WhiteLabelSummary */.iw.Segment, {\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* List */.B8, {\n        items: listItems\n      })\n    })]\n  });\n}\n/* harmony default export */ var SummaryBox_SummaryBox = ((/* unused pure expression or super */ null && (SummaryBox)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/SummaryBox/index.js\n\n// EXTERNAL MODULE: ./app/src/store/slices/videos.js\nvar slices_videos = __webpack_require__(4084);\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(5556);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n// EXTERNAL MODULE: ./node_modules/react-router/dist/index.js\nvar react_router_dist = __webpack_require__(7767);\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoRow/VideoRowHeader.js\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n\nfunction VideoRowHeader(_ref) {\n  var video = _ref.video,\n    setOpenedId = _ref.setOpenedId,\n    openedId = _ref.openedId,\n    disabled = _ref.disabled,\n    openEditModal = _ref.openEditModal,\n    setCurrentVideo = _ref.setCurrentVideo,\n    openDeleteModal = _ref.openDeleteModal,\n    openTitleModal = _ref.openTitleModal,\n    openPlaylistsModal = _ref.openPlaylistsModal;\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    id = _ref2.id,\n    video_title = _ref2.video_title,\n    thumbnail = _ref2.thumbnail,\n    video_slug = _ref2.video_slug,\n    video_duration = _ref2.video_duration;\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var navigate = (0,react_router_dist/* useNavigate */.Zp)();\n\n  // id of this accordion is opened\n  var isOpened = openedId === id;\n\n  // Check if it is a custom video\n  var isCustomVideo = (video === null || video === void 0 ? void 0 : video.video_type) === \'custom\';\n\n  /**\n   * Displays a notice that shortcode was copied successfully\n   *\n   * @return {void}\n   */\n  var displayCopyNotice = function displayCopyNotice() {\n    dispatch((0,notice/* addNotice */.Mp)({\n      message: (0,build_module.__)(\'Shortcode has been copied successfully.\', \'wpmudev_vids\')\n    }));\n  };\n\n  /**\n   * Get shortcode of the current video.\n   *\n   * @return {string}\n   */\n  var getShortCode = function getShortCode() {\n    if (isCustomVideo) {\n      return "[wpmudev-video video=\\"".concat(id, "\\"]");\n    } else {\n      return "[wpmudev-video video=\\"".concat(video_slug, "\\"]");\n    }\n  };\n\n  /**\n   * Open the accordion and changes route\n   *\n   * @return {void}\n   *\n   */\n  var openAccordion = function openAccordion() {\n    // Change Route\n    navigate("/view/".concat(id));\n\n    // set opened id\n    setOpenedId(id);\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    role: "heading",\n    className: "wpmudev-videos-accordion--heading wpmudev-videos-accordion--row",\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n      className: "wpmudev-videos-accordion--col-large",\n      children: [!isOpened && /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n        className: "wpmudev-videos-accordion--title",\n        "aria-expanded": false,\n        id: "wpmudev-videos-accordion-item-".concat(id, "--label"),\n        "aria-controls": "wpmudev-videos-accordion-item-".concat(id),\n        onClick: openAccordion,\n        disabled: disabled,\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* ListThumb */.Bt, {\n          className: "video-thumb",\n          icon: video_slug,\n          url: thumbnail === null || thumbnail === void 0 ? void 0 : thumbnail.url,\n          isCustom: isCustomVideo\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Icon */.In, {\n          icon: "play",\n          size: "sm",\n          className: "video-icon"\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n          className: "video-name",\n          children: video_title\n        })]\n      }), isOpened && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          className: "video-name",\n          children: video_title\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          className: "video-length",\n          children: video_duration\n        })]\n      })]\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: "wpmudev-videos-accordion--col-small",\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n        className: "wpmudev-videos-accordion--actions",\n        children: [isOpened && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n            icon: "add-playlist",\n            label: (0,build_module.__)(\'Add to Playlist\', \'wpmudev_vids\'),\n            outlined: true,\n            disabled: disabled,\n            tooltip: (0,build_module.__)(\'Add to Playlist\', \'wpmudev_vids\'),\n            onClick: function onClick() {\n              // Update current video state\n              setCurrentVideo(video);\n\n              // Open the playlists modal\n              openPlaylistsModal();\n            }\n          }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n            icon: "code",\n            disabled: disabled,\n            className: "ivt-copy-shortcode",\n            onClick: displayCopyNotice,\n            label: (0,build_module.__)(\'Copy Shortcode\', \'wpmudev_vids\'),\n            tooltip: (0,build_module.__)(\'Copy Shortcode\', \'wpmudev_vids\'),\n            "data-clipboard-text": getShortCode()\n          }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n            icon: "pencil",\n            label: isCustomVideo ? (0,build_module.__)(\'Edit video\', \'wpmudev_vids\') : (0,build_module.__)(\'Edit title\', \'wpmudev_vids\'),\n            outlined: true,\n            tooltip: isCustomVideo ? (0,build_module.__)(\'Edit video\', \'wpmudev_vids\') : (0,build_module.__)(\'Edit title\', \'wpmudev_vids\'),\n            onClick: function onClick() {\n              // Update current video state\n              setCurrentVideo(video);\n\n              // Open the Edit modal\n              if (isCustomVideo) {\n                openEditModal();\n              } else {\n                openTitleModal();\n              }\n            }\n          })]\n        }), !isOpened && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n            className: "sui-description",\n            children: video_duration || (0,build_module.__)(\'Unknown\', \'wpmudev_vids\')\n          }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n            icon: "add-playlist",\n            label: (0,build_module.__)(\'Add to Playlist\', \'wpmudev_vids\'),\n            outlined: true,\n            disabled: disabled,\n            tooltip: (0,build_module.__)(\'Add to Playlist\', \'wpmudev_vids\'),\n            onClick: function onClick() {\n              // Update current video state\n              setCurrentVideo(video);\n\n              // Open the playlists modal\n              openPlaylistsModal();\n            }\n          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n            className: "sui-dropdown",\n            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n              className: "sui-dropdown-anchor",\n              icon: "widget-settings-config",\n              outlined: false,\n              label: (0,build_module.__)(\'Video actions\', \'wpmudev_vids\')\n            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("ul", {\n              children: [isCustomVideo && /*#__PURE__*/(0,jsx_runtime.jsx)("li", {\n                children: /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n                  disabled: disabled,\n                  onClick: function onClick() {\n                    // Update current video state\n                    setCurrentVideo(video);\n\n                    // Open the Edit modal\n                    openEditModal();\n                  },\n                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n                    className: "sui-icon-pencil",\n                    "aria-hidden": "true"\n                  }), (0,build_module.__)(\'Edit video\', \'wpmudev_vids\')]\n                })\n              }), !isCustomVideo && /*#__PURE__*/(0,jsx_runtime.jsx)("li", {\n                children: /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n                  disabled: disabled,\n                  onClick: function onClick() {\n                    // Update current video state\n                    setCurrentVideo(video);\n\n                    // Open the title modal\n                    openTitleModal();\n                  },\n                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n                    className: "sui-icon-pencil",\n                    "aria-hidden": "true"\n                  }), (0,build_module.__)(\'Edit title\', \'wpmudev_vids\')]\n                })\n              }), /*#__PURE__*/(0,jsx_runtime.jsx)("li", {\n                children: /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n                  disabled: disabled,\n                  className: "ivt-copy-shortcode",\n                  onClick: displayCopyNotice,\n                  "data-clipboard-text": getShortCode(),\n                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n                    className: "sui-icon-code",\n                    "aria-hidden": "true"\n                  }), (0,build_module.__)(\'Copy Shortcode\', \'wpmudev_vids\')]\n                })\n              }), isCustomVideo && /*#__PURE__*/(0,jsx_runtime.jsx)("li", {\n                children: /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n                  disabled: disabled,\n                  className: "wpmudev-videos-red",\n                  onClick: function onClick() {\n                    // Update current video state\n                    setCurrentVideo(video);\n\n                    // Open the delete modal\n                    openDeleteModal();\n                  },\n                  children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n                    className: "sui-icon-trash",\n                    "aria-hidden": "true"\n                  }), (0,build_module.__)(\'Delete\', \'wpmudev_vids\')]\n                })\n              })]\n            })]\n          })]\n        })]\n      })\n    })]\n  });\n}\nVideoRowHeader.propTypes = {\n  video: (prop_types_default()).object,\n  setOpenedId: (prop_types_default()).func,\n  openedId: (prop_types_default()).number,\n  disabled: (prop_types_default()).bool\n};\n/* harmony default export */ var VideoRow_VideoRowHeader = ((/* unused pure expression or super */ null && (VideoRowHeader)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoRow/VideoRowBody.js\n/**\n * Library dependencies\n */\n\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n\n\nfunction VideoRowBody(_ref) {\n  var video = _ref.video,\n    setOpenedId = _ref.setOpenedId,\n    disabled = _ref.disabled;\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    id = _ref2.id,\n    video_type = _ref2.video_type;\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var navigate = (0,react_router_dist/* useNavigate */.Zp)();\n  var embed = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_videos/* getEmbed */.yS)(state, id);\n  });\n  (0,react.useEffect)(function () {\n    // If embed is not available in store\n    if (!embed) {\n      dispatch((0,slices_videos/* fetchEmbed */.mO)({\n        id: id\n      }));\n    }\n  }, []);\n\n  /**\n   * Close accordion and change route\n   *\n   * @return {null}\n   */\n  var closeAccordion = function closeAccordion() {\n    // set opened id\n    setOpenedId(null);\n\n    // Change route\n    navigate(\'/\');\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    role: "region",\n    className: "wpmudev-videos-accordion--region",\n    id: "wpmudev-videos-accordion-item-".concat(id),\n    "aria-labelledby": "wpmudev-videos-accordion-item-".concat(id, "--label"),\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n      icon: "close",\n      outlined: false,\n      className: "wpmudev-videos-show_desktop",\n      disabled: disabled,\n      onClick: closeAccordion,\n      label: (0,build_module.__)(\'Close this region\', \'wpmudev_vids\'),\n      tooltip: (0,build_module.__)(\'Close video\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n      icon: "close",\n      className: "wpmudev-videos-show_mobile",\n      onClick: closeAccordion,\n      disabled: disabled,\n      label: (0,build_module.__)(\'Close this region\', \'wpmudev_vids\'),\n      tooltip: (0,build_module.__)(\'Close video\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* VideoIframe */.Sy, {\n      embed: embed === null || embed === void 0 ? void 0 : embed.html,\n      type: video_type\n    })]\n  });\n}\nVideoRowBody.propTypes = {\n  video: (prop_types_default()).object,\n  setOpenedId: (prop_types_default()).func,\n  disabled: (prop_types_default()).bool\n};\n/* harmony default export */ var VideoRow_VideoRowBody = ((/* unused pure expression or super */ null && (VideoRowBody)));\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(6942);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoRow/VideoRow.js\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction VideoRow(_ref) {\n  var video = _ref.video,\n    openedId = _ref.openedId,\n    setOpenedId = _ref.setOpenedId,\n    disabled = _ref.disabled,\n    openEditModal = _ref.openEditModal,\n    setCurrentVideo = _ref.setCurrentVideo,\n    openDeleteModal = _ref.openDeleteModal,\n    openTitleModal = _ref.openTitleModal,\n    openPlaylistsModal = _ref.openPlaylistsModal;\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    id = _ref2.id;\n  var classes = classnames_default()({\n    \'wpmudev-videos-accordion--group\': true,\n    \'wpmudev-videos-active\': openedId === id,\n    \'wpmudev-videos-disabled\': disabled\n  });\n  var isOpened = id === openedId;\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    className: classes,\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(VideoRowHeader, {\n      openedId: openedId,\n      setOpenedId: setOpenedId,\n      video: video,\n      disabled: disabled,\n      openEditModal: openEditModal,\n      setCurrentVideo: setCurrentVideo,\n      openDeleteModal: openDeleteModal,\n      openTitleModal: openTitleModal,\n      openPlaylistsModal: openPlaylistsModal\n    }), isOpened && /*#__PURE__*/(0,jsx_runtime.jsx)(VideoRowBody, {\n      setOpenedId: setOpenedId,\n      openedId: openedId,\n      video: video,\n      disabled: disabled\n    })]\n  });\n}\nVideoRow.propTypes = {\n  video: (prop_types_default()).object,\n  openedId: (prop_types_default()).number,\n  setOpenedId: (prop_types_default()).func\n};\n/* harmony default export */ var VideoRow_VideoRow = ((/* unused pure expression or super */ null && (VideoRow)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoRow/index.js\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoHosts/VideoHostsList.js\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nvar VideoHostsList_window$ivtModuleVars;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n/**\n * External dependencies\n */\n\n\nvar VideoHostsList_ref = (VideoHostsList_window$ivtModuleVars = window.ivtModuleVars) !== null && VideoHostsList_window$ivtModuleVars !== void 0 ? VideoHostsList_window$ivtModuleVars : {},\n  VideoHostsList_hosts = VideoHostsList_ref.hosts;\nfunction VideoHostsList(_ref2) {\n  var modalID = _ref2.modalID,\n    video = _ref2.video,\n    setVideo = _ref2.setVideo;\n  var classes = classnames_default()(\'sui-box-selectors\', \'sui-box-selectors-col-2\');\n  var _ref3 = video !== null && video !== void 0 ? video : {},\n    host = _ref3.host;\n\n  /**\n   * Update host key in the video object\n   *\n   * @return {void}\n   */\n  var setHost = function setHost(event) {\n    setVideo(_objectSpread(_objectSpread({}, video), {}, {\n      host: event.target.value\n    }));\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n    className: classes,\n    children: /*#__PURE__*/(0,jsx_runtime.jsx)("ul", {\n      children: Object.keys(VideoHostsList_hosts).map(function (key) {\n        return /*#__PURE__*/(0,jsx_runtime.jsx)("li", {\n          children: /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {\n            htmlFor: "".concat(modalID, "-video-host-").concat(key),\n            className: "sui-box-selector",\n            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {\n              type: "radio",\n              id: "".concat(modalID, "-video-host-").concat(key),\n              name: "".concat(modalID, "-video-host-").concat(key),\n              value: key,\n              checked: key === host,\n              onChange: setHost\n            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {\n              children: [VideoHostsList_hosts[key].icon && /*#__PURE__*/(0,jsx_runtime.jsx)("i", {\n                className: VideoHostsList_hosts[key].icon,\n                "aria-hidden": "true"\n              }), VideoHostsList_hosts[key].name]\n            })]\n          })\n        }, key);\n      })\n    })\n  });\n}\n/* harmony default export */ var VideoHosts_VideoHostsList = ((/* unused pure expression or super */ null && (VideoHostsList)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoHosts/index.js\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoUrlField/VideoUrlField.js\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n/**\n * External dependencies\n */\n\n\n\nfunction VideoUrlField(_ref) {\n  var modalID = _ref.modalID,\n    url = _ref.url,\n    urlReady = _ref.urlReady,\n    setVideoUrl = _ref.setVideoUrl,\n    updating = _ref.updating,\n    reset = _ref.reset,\n    getUrlEmbed = _ref.getUrlEmbed;\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Label */.JU, {\n      htmlFor: "".concat(modalID, "-video-url"),\n      id: "".concat(modalID, "-video-url-label"),\n      children: (0,build_module.__)(\'Video URL\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n      className: "sui-with-button sui-with-button-inside",\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Input */.pd, {\n        disabled: urlReady,\n        id: "".concat(modalID, "-video-url"),\n        placeholder: "",\n        value: url,\n        onChange: function onChange(val) {\n          if (!val) {\n            reset();\n          } else {\n            setVideoUrl(val);\n          }\n        }\n      }), urlReady && /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        onClick: reset,\n        children: (0,build_module.__)(\'Clear\', \'wpmudev_vids\')\n      }), !urlReady && /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        disabled: !url,\n        "aria-live": "polite",\n        isLoading: updating,\n        onClick: getUrlEmbed,\n        onLoadingText: (0,build_module.__)(\'Adding\', \'wpmudev_vids\'),\n        children: (0,build_module.__)(\'Add Video\', \'wpmudev_vids\')\n      })]\n    })]\n  });\n}\n/* harmony default export */ var VideoUrlField_VideoUrlField = ((/* unused pure expression or super */ null && (VideoUrlField)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoUrlField/index.js\n\n;// CONCATENATED MODULE: ./app/src/utils.js\n/**\n * Time Regex returns true/false\n *\n * @return {boolean}\n **/\nfunction timeRegex(value) {\n  var timeRegex = /^([0-9]{1,3})([:|.]([0-9]{1,3})([:|.]([0-9]{1,3}))?)?$/gm;\n  return timeRegex.test(value);\n}\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoSettings/TimeForm.js\nfunction TimeForm_typeof(o) { "@babel/helpers - typeof"; return TimeForm_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, TimeForm_typeof(o); }\nfunction TimeForm_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction TimeForm_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? TimeForm_ownKeys(Object(t), !0).forEach(function (r) { TimeForm_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : TimeForm_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction TimeForm_defineProperty(e, r, t) { return (r = TimeForm_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction TimeForm_toPropertyKey(t) { var i = TimeForm_toPrimitive(t, "string"); return "symbol" == TimeForm_typeof(i) ? i : i + ""; }\nfunction TimeForm_toPrimitive(t, r) { if ("object" != TimeForm_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != TimeForm_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction TimeForm_slicedToArray(r, e) { return TimeForm_arrayWithHoles(r) || TimeForm_iterableToArrayLimit(r, e) || TimeForm_unsupportedIterableToArray(r, e) || TimeForm_nonIterableRest(); }\nfunction TimeForm_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction TimeForm_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return TimeForm_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? TimeForm_arrayLikeToArray(r, a) : void 0; } }\nfunction TimeForm_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction TimeForm_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction TimeForm_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n\n/**\n * Library dependencies\n */\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction TimeForm(_ref) {\n  var video = _ref.video,\n    setVideo = _ref.setVideo,\n    modalID = _ref.modalID;\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    start_enabled = _ref2.start_enabled,\n    end_enabled = _ref2.end_enabled,\n    end_time = _ref2.end_time,\n    start_time = _ref2.start_time;\n  var _useState = (0,react.useState)(false),\n    _useState2 = TimeForm_slicedToArray(_useState, 2),\n    startTimeError = _useState2[0],\n    setStartTimeError = _useState2[1];\n  var _useState3 = (0,react.useState)(false),\n    _useState4 = TimeForm_slicedToArray(_useState3, 2),\n    endTimeError = _useState4[0],\n    setEndTimeError = _useState4[1];\n  (0,react.useEffect)(function () {\n    if (start_enabled) {\n      validateTime(start_time, setStartTimeError);\n    }\n    if (end_enabled) {\n      validateTime(end_time, setEndTimeError);\n    }\n  }, [start_enabled, end_enabled, start_time, end_time]);\n  var validateTime = function validateTime(time, setError) {\n    if (time && !timeRegex(time)) {\n      setError(true);\n    } else {\n      setError(false);\n    }\n  };\n  var setEnabled = function setEnabled(_ref3) {\n    var _ref3$type = _ref3.type,\n      type = _ref3$type === void 0 ? \'start\' : _ref3$type,\n      value = _ref3.value;\n    var finalValue = value ? 1 : 0;\n    setVideo(TimeForm_objectSpread(TimeForm_objectSpread({}, video), {}, TimeForm_defineProperty({}, "".concat(type, "_enabled"), finalValue)));\n  };\n  var setTime = function setTime(_ref4) {\n    var _ref4$type = _ref4.type,\n      type = _ref4$type === void 0 ? \'start\' : _ref4$type,\n      value = _ref4.value;\n    validateTime(value, type === \'start\' ? setStartTimeError : setEndTimeError);\n    setVideo(TimeForm_objectSpread(TimeForm_objectSpread({}, video), {}, TimeForm_defineProperty({}, "".concat(type, "_time"), value)));\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: classnames_default()(\'sui-form-field\', {\n        \'sui-form-field-error\': startTimeError\n      }),\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {\n        className: "sui-field-prefix",\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Checkbox */.Sc, {\n          checked: !!start_enabled,\n          label: (0,build_module.__)(\'Start at:\', \'wpmudev_vids\'),\n          id: "".concat(modalID, "-video-start"),\n          onChange: function onChange(value) {\n            return setEnabled({\n              type: \'start\',\n              value: value\n            });\n          }\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Input */.pd, {\n          id: "start-time",\n          placeholder: "00:00",\n          value: start_time,\n          checked: end_enabled,\n          disabled: !start_enabled,\n          onChange: function onChange(value) {\n            return setTime({\n              type: \'start\',\n              value: value\n            });\n          },\n          className: classnames_default()(\'sui-input-sm\', \'sui-field-has-prefix\')\n        }), startTimeError && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n          id: "error-start-time",\n          className: "sui-error-message",\n          role: "alert",\n          children: (0,build_module.__)(\'Invalid time format.\', \'wpmudev_vids\')\n        })]\n      })\n    }), typeof video.host !== \'undefined\' && video.host === \'youtube\' && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: classnames_default()(\'sui-form-field\', {\n        \'sui-form-field-error\': endTimeError\n      }),\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {\n        className: "sui-field-prefix",\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Checkbox */.Sc, {\n          label: (0,build_module.__)(\'End at:\', \'wpmudev_vids\'),\n          id: "".concat(modalID, "-video-end"),\n          checked: !!end_enabled,\n          onChange: function onChange(value) {\n            return setEnabled({\n              type: \'end\',\n              value: value\n            });\n          }\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Input */.pd, {\n          id: "end-time",\n          placeholder: "00:00",\n          value: end_time,\n          disabled: !end_enabled,\n          onChange: function onChange(value) {\n            return setTime({\n              type: \'end\',\n              value: value\n            });\n          },\n          className: classnames_default()(\'sui-input-sm\', \'sui-field-has-prefix\')\n        }), endTimeError && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n          id: "error-end-time",\n          className: "sui-error-message",\n          role: "alert",\n          children: (0,build_module.__)(\'Invalid time format.\', \'wpmudev_vids\')\n        })]\n      })\n    })]\n  });\n}\n/* harmony default export */ var VideoSettings_TimeForm = (TimeForm);\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoSettings/VideoSettings.js\nfunction VideoSettings_typeof(o) { "@babel/helpers - typeof"; return VideoSettings_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, VideoSettings_typeof(o); }\nfunction VideoSettings_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction VideoSettings_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? VideoSettings_ownKeys(Object(t), !0).forEach(function (r) { VideoSettings_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : VideoSettings_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction VideoSettings_defineProperty(e, r, t) { return (r = VideoSettings_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction VideoSettings_toPropertyKey(t) { var i = VideoSettings_toPrimitive(t, "string"); return "symbol" == VideoSettings_typeof(i) ? i : i + ""; }\nfunction VideoSettings_toPrimitive(t, r) { if ("object" != VideoSettings_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != VideoSettings_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\nfunction VideoSettings(_ref) {\n  var video = _ref.video,\n    setVideo = _ref.setVideo,\n    modalID = _ref.modalID;\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    thumbnail = _ref2.thumbnail;\n\n  /**\n   * Set Video Thumbnial\n   *\n   * @return {void}\n   */\n  var setVideoThumbnail = function setVideoThumbnail(value) {\n    setVideo(VideoSettings_objectSpread(VideoSettings_objectSpread({}, video), {}, {\n      thumbnail: value\n    }));\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    className: "sui-box-body",\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      className: "sui-settings-label",\n      children: (0,build_module.__)(\'Settings\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      className: "sui-description",\n      children: (0,build_module.__)(\'Customize the duration of the video.\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoSettings_TimeForm, {\n      modalID: modalID,\n      video: video,\n      setVideo: setVideo\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      className: "sui-settings-label"\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      className: "sui-settings-label",\n      children: (0,build_module.__)(\'Thumbnail image\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      className: "sui-description",\n      children: (0,build_module.__)(\'Add a custom thumbnail to your video.\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: "sui-form-field",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* UploadThumb */.cd, {\n        thumbnail: Array.isArray(thumbnail) ? {} : thumbnail,\n        onSelect: setVideoThumbnail\n      })\n    })]\n  });\n}\n/* harmony default export */ var VideoSettings_VideoSettings = ((/* unused pure expression or super */ null && (VideoSettings)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoSettings/index.js\n\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoForm/VideoForm.js\nfunction VideoForm_typeof(o) { "@babel/helpers - typeof"; return VideoForm_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, VideoForm_typeof(o); }\nfunction VideoForm_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction VideoForm_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? VideoForm_ownKeys(Object(t), !0).forEach(function (r) { VideoForm_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : VideoForm_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction VideoForm_defineProperty(e, r, t) { return (r = VideoForm_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction VideoForm_toPropertyKey(t) { var i = VideoForm_toPrimitive(t, "string"); return "symbol" == VideoForm_typeof(i) ? i : i + ""; }\nfunction VideoForm_toPrimitive(t, r) { if ("object" != VideoForm_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != VideoForm_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction VideoForm_slicedToArray(r, e) { return VideoForm_arrayWithHoles(r) || VideoForm_iterableToArrayLimit(r, e) || VideoForm_unsupportedIterableToArray(r, e) || VideoForm_nonIterableRest(); }\nfunction VideoForm_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction VideoForm_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return VideoForm_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? VideoForm_arrayLikeToArray(r, a) : void 0; } }\nfunction VideoForm_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction VideoForm_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction VideoForm_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n// Empty video data structure\n\nvar emptyVideo = {\n  host: \'\',\n  url: \'\',\n  title: \'\',\n  start_enabled: 0,\n  end_enabled: 0,\n  start_time: \'\',\n  end_time: \'\',\n  playlists: [],\n  thumbnail: {\n    id: 0,\n    file: \'\',\n    url: \'\'\n  },\n  duration: \'\',\n  embed: \'\'\n};\nfunction VideoForm(_ref) {\n  var video = _ref.video,\n    setVideo = _ref.setVideo,\n    setShowError = _ref.setShowError,\n    modalID = _ref.modalID,\n    urlReady = _ref.urlReady,\n    setUrlReady = _ref.setUrlReady;\n  var _useState = (0,react.useState)(false),\n    _useState2 = VideoForm_slicedToArray(_useState, 2),\n    updating = _useState2[0],\n    setUpdating = _useState2[1];\n  var selectorsClasses = classnames_default()(\'sui-box-selectors\', \'sui-box-selectors-col-2\');\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    title = _ref2.title,\n    url = _ref2.url,\n    host = _ref2.host,\n    thumbnail = _ref2.thumbnail,\n    start_enabled = _ref2.start_enabled,\n    end_enabled = _ref2.end_enabled,\n    start_time = _ref2.start_time,\n    end_time = _ref2.end_time,\n    embed = _ref2.embed,\n    id = _ref2.id,\n    duration = _ref2.duration;\n\n  // Get url embed\n  (0,react.useEffect)(function () {\n    if (urlReady) {\n      getUrlEmbed();\n    }\n  }, [id]);\n\n  /**\n   * Resets video state but keep needed data\n   *\n   * @return {void}\n   */\n  var _reset = function reset() {\n    setVideo(VideoForm_objectSpread(VideoForm_objectSpread({}, emptyVideo), {}, {\n      host: video.host,\n      id: video.id,\n      playlists: video.palylists\n    }));\n  };\n\n  /**\n   * Update url in the video state\n   *\n   * @return {void}\n   */\n  var setVideoUrl = function setVideoUrl(value) {\n    setVideo(VideoForm_objectSpread(VideoForm_objectSpread({}, video), {}, {\n      url: value\n    }));\n  };\n\n  /**\n   * Set video title\n   *\n   * @return {void}\n   */\n  var setVideoTitle = function setVideoTitle(value) {\n    setVideo(VideoForm_objectSpread(VideoForm_objectSpread({}, video), {}, {\n      title: value\n    }));\n  };\n\n  /**\n   * Update the video data using embed.\n   *\n   * Once the embed is updated, set that\n   * to video object.\n   *\n   */\n  var setVideoEmbed = function setVideoEmbed(data) {\n    var newVideo = VideoForm_objectSpread({}, video);\n\n    // Set the embed.\n    newVideo.embed = data.html;\n\n    // Update the title.\n    if (data.title && video.title === \'\') {\n      newVideo.title = data.title;\n    }\n\n    // Set the duration.\n    if (data.duration) {\n      newVideo.duration = data.duration;\n    }\n    setVideo(newVideo);\n  };\n\n  /**\n   * Update the embed using the URL.\n   *\n   * We need to pass the custom thumbnail and\n   * start/end time strings.\n   *\n   */\n  var getUrlEmbed = function getUrlEmbed() {\n    if (updating || url === \'\') {\n      return;\n    }\n    setUpdating(true);\n    (0,api/* restGet */.B8)({\n      path: \'videos/embed\',\n      params: {\n        url: url,\n        host: host,\n        width: 300,\n        thumbnail: (thumbnail === null || thumbnail === void 0 ? void 0 : thumbnail.id) || 0,\n        start_enabled: start_enabled,\n        end_enabled: end_enabled,\n        start_time: start_time,\n        end_time: end_time\n      }\n    }).then(function (response) {\n      if (response.success && response.data) {\n        // Update the embed.\n        setVideoEmbed(response.data);\n        setUrlReady(true);\n        setShowError(false);\n      } else {\n        setShowError(false);\n      }\n    }).catch(function (err) {\n      setUrlReady(false);\n      setShowError(true);\n    }).finally(function () {\n      setUpdating(false);\n    });\n  };\n\n  /**\n   * Should we show video duration.\n   *\n   * @since 1.8.0\n   *\n   * @return {boolean}\n   */\n  var showDuration = function showDuration() {\n    return ![\'\', \'00.00\', 0, \'0\'].includes(duration);\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n      className: selectorsClasses,\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n        className: "sui-form-field",\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(VideoUrlField, {\n          url: url,\n          updating: updating,\n          urlReady: urlReady,\n          setVideoUrl: setVideoUrl,\n          getUrlEmbed: getUrlEmbed,\n          reset: function reset() {\n            setUrlReady(false);\n            setShowError(false);\n            _reset();\n          }\n        })\n      }), urlReady && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n        className: "sui-row",\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n          className: "sui-col-md-6 sui-col-sm-12",\n          children: /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* VideoIframe */.Sy, {\n            embed: embed,\n            type: "custom"\n          })\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n          className: "sui-col-md-6 sui-col-sm-12",\n          children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n            className: "sui-form-field",\n            children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Input */.pd, {\n              value: title,\n              onChange: setVideoTitle,\n              id: "".concat(modalID, "-video-title")\n            }), showDuration() && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n              className: "sui-description",\n              children: (0,build_module/* sprintf */.nv)((0,build_module.__)(\'Duration %s\', \'wpmudev_vids\'), duration)\n            })]\n          })\n        })]\n      })]\n    }), urlReady && /*#__PURE__*/(0,jsx_runtime.jsx)(VideoSettings, {\n      video: video,\n      setVideo: setVideo,\n      modalID: modalID\n    })]\n  });\n}\nVideoForm.defaultProps = {\n  video: {},\n  setShowError: function setShowError() {\n    return null;\n  }\n};\n/* harmony default export */ var VideoForm_VideoForm = ((/* unused pure expression or super */ null && (VideoForm)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/VideoForm/index.js\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/components/index.js\n\n\n\n\n\n// EXTERNAL MODULE: ./app/src/helpers/utils/utils.js\nvar utils = __webpack_require__(7755);\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/slides/VideoHost.js\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction VideoHost(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    next = _ref.next,\n    video = _ref.video,\n    setVideo = _ref.setVideo;\n  var classes = classnames_default()(\'sui-modal-slide\', \'sui-active\', \'sui-loaded\');\n  var headerClasses = classnames_default()(\'sui-flatten sui-content-center\', \'sui-spacing-top--60\', \'sui-spacing-right--60\', \'sui-spacing-left--60\');\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    host = _ref2.host;\n  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n    className: classes,\n    "data-modal-size": "lg",\n    id: "".concat(modalID, "-host-selector"),\n    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n        className: headerClasses,\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* WhiteLabelBanner */.S3, {\n          src: "modal/modal-header-videos.png",\n          alt: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {\n          onClick: closeModal,\n          className: classnames_default()(\'sui-button-icon\', \'sui-button-float--right\'),\n          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Icon */.In, {\n            icon: "close",\n            size: "md"\n          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {\n            className: "sui-screen-reader-text",\n            children: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n          })]\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("h3", {\n          id: "".concat(modalID, "-title"),\n          className: "sui-box-title sui-lg",\n          children: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          id: "".concat(modalID, "-desc"),\n          className: "sui-description",\n          children: (0,build_module.__)("Link to custom videos you\'ve found, or uploaded on another video host. Choose from the available hosts below.", \'wpmudev_vids\')\n        })]\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoHostsList, {\n        video: video,\n        setVideo: setVideo,\n        modalID: modalID\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n        isFlushed: true,\n        isCentered: true,\n        isFlatten: true,\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n          disabled: !host,\n          "data-modal-slide": next,\n          "data-modal-slide-intro": "next",\n          children: (0,build_module.__)(\'Continue\', \'wpmudev_vids\')\n        })\n      })]\n    })\n  });\n}\nVideoHost.propTypes = {\n  modalID: (prop_types_default()).string,\n  closeModal: (prop_types_default()).func,\n  next: (prop_types_default()).string,\n  video: (prop_types_default()).object\n};\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/slides/VideoUrl.js\nfunction VideoUrl_slicedToArray(r, e) { return VideoUrl_arrayWithHoles(r) || VideoUrl_iterableToArrayLimit(r, e) || VideoUrl_unsupportedIterableToArray(r, e) || VideoUrl_nonIterableRest(); }\nfunction VideoUrl_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction VideoUrl_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return VideoUrl_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? VideoUrl_arrayLikeToArray(r, a) : void 0; } }\nfunction VideoUrl_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction VideoUrl_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction VideoUrl_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n\nfunction VideoUrl(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    video = _ref.video,\n    setVideo = _ref.setVideo,\n    prev = _ref.prev,\n    next = _ref.next,\n    urlReady = _ref.urlReady,\n    setUrlReady = _ref.setUrlReady;\n  var _useState = (0,react.useState)(false),\n    _useState2 = VideoUrl_slicedToArray(_useState, 2),\n    showError = _useState2[0],\n    setShowError = _useState2[1];\n  var headerClasses = classnames_default()(\'sui-flatten sui-content-center\', \'sui-spacing-top--60\', \'sui-spacing-right--60\', \'sui-spacing-left--60\');\n  var timeReady = video.start_enabled && !timeRegex(video.start_time) || video.end_enabled && !timeRegex(video.end_time);\n  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n    id: "".concat(modalID, "-url-form"),\n    className: "sui-modal-slide",\n    "data-modal-size": "lg",\n    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n        className: headerClasses,\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* WhiteLabelBanner */.S3, {\n          src: "modal/modal-header-videos.png",\n          alt: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n          className: "sui-button-float--right",\n          icon: "close",\n          onClick: closeModal,\n          size: "md",\n          outlined: false,\n          label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n          className: "sui-button-float--left",\n          icon: "chevron-left",\n          "data-modal-slide": prev,\n          "data-modal-slide-intro": "back",\n          size: "md",\n          outlined: false,\n          label: (0,build_module.__)(\'Go back to previous slide.\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("h3", {\n          id: "".concat(modalID, "-title"),\n          className: "sui-box-title sui-lg",\n          children: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          id: "".concat(modalID, "-desc"),\n          className: "sui-description",\n          children: (0,build_module.__)(\'Copy and paste the video URL from your browser into the input field below.\', \'wpmudev_vids\')\n        }), showError && /*#__PURE__*/(0,jsx_runtime.jsx)(components/* StaticNotice */.RL, {\n          type: "error",\n          children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n            className: "sui-content-left",\n            children: (0,build_module.__)(\'The URL you have attached is invalid. Try again by copying the URL from your browser and pasting it into the input field below.\', \'wpmudev_vids\')\n          })\n        })]\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoForm, {\n        video: video,\n        setVideo: setVideo,\n        modalID: modalID,\n        urlReady: urlReady,\n        setUrlReady: setUrlReady,\n        setShowError: setShowError\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n        isCentered: true,\n        isFlatten: true,\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n          "data-modal-slide-intro": "next",\n          "data-modal-slide": next,\n          disabled: !urlReady || timeReady,\n          children: (0,build_module.__)(\'Continue\', \'wpmudev_vids\')\n        })\n      })]\n    })\n  });\n}\n/* harmony default export */ var slides_VideoUrl = ((/* unused pure expression or super */ null && (VideoUrl)));\n// EXTERNAL MODULE: ./app/src/store/slices/playlists.js\nvar slices_playlists = __webpack_require__(9317);\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/slides/VideoPlaylists.js\nfunction VideoPlaylists_typeof(o) { "@babel/helpers - typeof"; return VideoPlaylists_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, VideoPlaylists_typeof(o); }\nfunction VideoPlaylists_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction VideoPlaylists_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? VideoPlaylists_ownKeys(Object(t), !0).forEach(function (r) { VideoPlaylists_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : VideoPlaylists_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction VideoPlaylists_defineProperty(e, r, t) { return (r = VideoPlaylists_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction VideoPlaylists_toPropertyKey(t) { var i = VideoPlaylists_toPrimitive(t, "string"); return "symbol" == VideoPlaylists_typeof(i) ? i : i + ""; }\nfunction VideoPlaylists_toPrimitive(t, r) { if ("object" != VideoPlaylists_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != VideoPlaylists_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction VideoPlaylists_slicedToArray(r, e) { return VideoPlaylists_arrayWithHoles(r) || VideoPlaylists_iterableToArrayLimit(r, e) || VideoPlaylists_unsupportedIterableToArray(r, e) || VideoPlaylists_nonIterableRest(); }\nfunction VideoPlaylists_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction VideoPlaylists_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return VideoPlaylists_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? VideoPlaylists_arrayLikeToArray(r, a) : void 0; } }\nfunction VideoPlaylists_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction VideoPlaylists_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction VideoPlaylists_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n\nfunction VideoPlaylists(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    video = _ref.video,\n    setVideo = _ref.setVideo,\n    prev = _ref.prev,\n    emptyVideo = _ref.emptyVideo,\n    setUrlReady = _ref.setUrlReady;\n  var videoPlaylists = video.playlists,\n    url = video.url,\n    host = video.host,\n    title = video.title,\n    start_enabled = video.start_enabled,\n    end_enabled = video.end_enabled,\n    start_time = video.start_time,\n    end_time = video.end_time,\n    thumbnail = video.thumbnail,\n    duration = video.duration;\n  var _useState = (0,react.useState)(false),\n    _useState2 = VideoPlaylists_slicedToArray(_useState, 2),\n    showError = _useState2[0],\n    setShowError = _useState2[1];\n  var _useState3 = (0,react.useState)({}),\n    _useState4 = VideoPlaylists_slicedToArray(_useState3, 2),\n    formattedPlaylists = _useState4[0],\n    setFormattedPlaylists = _useState4[1];\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var _useState5 = (0,react.useState)(false),\n    _useState6 = VideoPlaylists_slicedToArray(_useState5, 2),\n    isPublishing = _useState6[0],\n    setIsPublishing = _useState6[1];\n  var playlists = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_playlists/* getPlaylists */.Eo)(state);\n  });\n  var headerClasses = classnames_default()(\'sui-flatten sui-content-center\', \'sui-spacing-top--60\', \'sui-spacing-right--60\', \'sui-spacing-left--60\');\n\n  /**\n   * Format the playlist data to Select2 format.\n   *\n   * Select2 accept id and text as option object.\n   *\n   * @return {object}\n   */\n  var formatPlaylists = function formatPlaylists() {\n    var list = {};\n\n    // Format playlists.\n    if (Object.keys(playlists).length > 0) {\n      Object.keys(playlists).forEach(function (id) {\n        var _playlists$id;\n        list = VideoPlaylists_objectSpread(VideoPlaylists_objectSpread({}, list), {}, VideoPlaylists_defineProperty({}, id, playlists === null || playlists === void 0 || (_playlists$id = playlists[id]) === null || _playlists$id === void 0 ? void 0 : _playlists$id.title));\n      });\n    }\n    setFormattedPlaylists(list);\n  };\n  (0,react.useEffect)(function () {\n    formatPlaylists();\n  }, [playlists]);\n\n  /**\n   * Update selected playlists\n   *\n   * @return {void}\n   */\n  var updateSelectedPlaylists = function updateSelectedPlaylists(selected) {\n    var newVideo = VideoPlaylists_objectSpread(VideoPlaylists_objectSpread({}, video), {}, {\n      playlists: selected\n    });\n    setVideo(newVideo);\n  };\n\n  /**\n   * Publish Video\n   *\n   * @return {void}\n   */\n  var publishVideo = function publishVideo() {\n    setIsPublishing(true);\n    dispatch((0,slices_videos/* createVideo */.g5)({\n      video: {\n        playlists: videoPlaylists,\n        url: url,\n        host: host,\n        title: title,\n        start_enabled: start_enabled,\n        end_enabled: end_enabled,\n        start_time: start_time,\n        end_time: end_time,\n        thumbnail: thumbnail.id || 0,\n        duration: duration\n      }\n    })).then(function (response) {\n      var _response$payload;\n      if (response !== null && response !== void 0 && (_response$payload = response.payload) !== null && _response$payload !== void 0 && _response$payload.success) {\n        var _response$payload2;\n        // Close the modal\n        closeModal();\n        var _video = response === null || response === void 0 || (_response$payload2 = response.payload) === null || _response$payload2 === void 0 ? void 0 : _response$payload2.data;\n\n        // Show success notice\n        var message = _video !== null && _video !== void 0 && _video.view_link ? (0,build_module.__)(\'Custom video added successfully. You can <a href="%s">view the video</a> on the Video Tutorials page.\', \'wpmudev_vids\') : (0,build_module.__)(\'Custom video added successfully. Assign it to a playlist so the video becomes available on the Video Tutorials page.\', \'wpmudev_vids\');\n\n        // Add Success notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          message: (0,build_module/* sprintf */.nv)(message, _video === null || _video === void 0 ? void 0 : _video.view_link),\n          dismiss: true\n        }));\n\n        // Empty the video object\n        setVideo(emptyVideo);\n        setUrlReady(false);\n      } else {\n        setShowError(true);\n      }\n    }).finally(function () {\n      setIsPublishing(false);\n    });\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n    id: "".concat(modalID, "-playlist-form"),\n    className: "sui-modal-slide",\n    "data-modal-size": "lg",\n    children: /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n        className: headerClasses,\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* WhiteLabelBanner */.S3, {\n          src: "modal/modal-header-videos.png",\n          alt: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n          className: "sui-button-float--right",\n          icon: "close",\n          onClick: closeModal,\n          size: "md",\n          outlined: false,\n          label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n          className: "sui-button-float--left",\n          icon: "chevron-left",\n          "data-modal-slide": prev,\n          "data-modal-slide-intro": "back",\n          size: "md",\n          outlined: false,\n          label: (0,build_module.__)(\'Go back to previous slide.\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("h3", {\n          id: "".concat(modalID, "-title"),\n          className: "sui-box-title sui-lg",\n          children: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          id: "".concat(modalID, "-desc"),\n          className: "sui-description",\n          children: (0,build_module.__)(\'To finish adding this video, assign it to a playlist.\', \'wpmudev_vids\')\n        })]\n      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Body, {\n        children: [showError && /*#__PURE__*/(0,jsx_runtime.jsx)(components/* StaticNotice */.RL, {\n          type: "error",\n          children: (0,build_module.__)(\'There was an error publishing the video. Please try again.\', \'wpmudev_vids\')\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* StaticNotice */.RL, {\n          type: "info",\n          children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n            children: (0,build_module.__)("Note: We recommend adding your custom video to an existing playlist so it\'s available on the Video Tutorials page.", \'wpmudev_vids\')\n          })\n        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n          className: "sui-form-field",\n          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Label */.JU, {\n            className: "sui-label",\n            htmlFor: "".concat(modalID, "-playlist"),\n            id: "".concat(modalID, "-playlist-label"),\n            children: (0,build_module.__)(\'Choose playlist\', \'wpmudev_vids\')\n          }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Select */.l6, {\n            parentElement: "wpmudev-videos-video-create-modal",\n            id: "".concat(modalID, "-playlist"),\n            value: videoPlaylists,\n            onChange: updateSelectedPlaylists,\n            options: formattedPlaylists,\n            labelID: "".concat(modalID, "-playlist-label"),\n            multiple: true,\n            placeholder: (0,build_module.__)(\'Choose playlist\', \'wpmudev_vids\')\n          })]\n        })]\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n        isCentered: true,\n        isFlatten: true,\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n          onLoadingText: (0,build_module.__)(\'Publishing\', \'wpmudev_vids\'),\n          onClick: publishVideo,\n          isLoading: isPublishing,\n          children: (0,build_module.__)(\'Publish\', \'wpmudev_vids\')\n        })\n      })]\n    })\n  });\n}\n/* harmony default export */ var slides_VideoPlaylists = ((/* unused pure expression or super */ null && (VideoPlaylists)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/slides/index.js\n\n\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/CreateCustomVideo.js\nfunction CreateCustomVideo_slicedToArray(r, e) { return CreateCustomVideo_arrayWithHoles(r) || CreateCustomVideo_iterableToArrayLimit(r, e) || CreateCustomVideo_unsupportedIterableToArray(r, e) || CreateCustomVideo_nonIterableRest(); }\nfunction CreateCustomVideo_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction CreateCustomVideo_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return CreateCustomVideo_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? CreateCustomVideo_arrayLikeToArray(r, a) : void 0; } }\nfunction CreateCustomVideo_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction CreateCustomVideo_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction CreateCustomVideo_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Internal dependencies\n */\n\n\n/**\n * External dependencies\n */\n\n\n// Empty video data structure\n\nvar CreateCustomVideo_emptyVideo = {\n  host: \'\',\n  url: \'\',\n  title: \'\',\n  start_enabled: 0,\n  end_enabled: 0,\n  start_time: \'\',\n  end_time: \'\',\n  playlists: [],\n  thumbnail: {\n    id: 0,\n    file: \'\',\n    url: \'\'\n  },\n  duration: \'\',\n  embed: \'\'\n};\nfunction CreateCustomVideo(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal;\n  var _useState = (0,react.useState)(CreateCustomVideo_emptyVideo),\n    _useState2 = CreateCustomVideo_slicedToArray(_useState, 2),\n    video = _useState2[0],\n    setVideo = _useState2[1];\n\n  // This variable is used to check if the video url is valid\n  var _useState3 = (0,react.useState)(false),\n    _useState4 = CreateCustomVideo_slicedToArray(_useState3, 2),\n    urlReady = _useState4[0],\n    setUrlReady = _useState4[1];\n\n  /**\n   * Close the modal and resets Video State\n   *\n   * @return {null}\n   */\n  var closeAndReset = function closeAndReset() {\n    // set url\n    setUrlReady(false);\n\n    // Reset Video State\n    setVideo(CreateCustomVideo_emptyVideo);\n\n    // Close the modal\n    closeModal();\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(VideoHost, {\n      video: video,\n      setVideo: setVideo,\n      modalID: modalID,\n      closeModal: closeAndReset,\n      next: "".concat(modalID, "-url-form")\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoUrl, {\n      video: video,\n      setVideo: setVideo,\n      modalID: modalID,\n      closeModal: closeAndReset,\n      prev: "".concat(modalID, "-host-selector"),\n      next: "".concat(modalID, "-playlist-form"),\n      urlReady: urlReady,\n      setUrlReady: setUrlReady\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoPlaylists, {\n      video: video,\n      setVideo: setVideo,\n      prev: "".concat(modalID, "-url-form"),\n      modalID: modalID,\n      closeModal: closeAndReset,\n      emptyVideo: CreateCustomVideo_emptyVideo,\n      setUrlReady: setUrlReady\n    })]\n  });\n}\n/* harmony default export */ var modals_CreateCustomVideo = ((/* unused pure expression or super */ null && (CreateCustomVideo)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/EditVideo.js\nfunction EditVideo_slicedToArray(r, e) { return EditVideo_arrayWithHoles(r) || EditVideo_iterableToArrayLimit(r, e) || EditVideo_unsupportedIterableToArray(r, e) || EditVideo_nonIterableRest(); }\nfunction EditVideo_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction EditVideo_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return EditVideo_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? EditVideo_arrayLikeToArray(r, a) : void 0; } }\nfunction EditVideo_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction EditVideo_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction EditVideo_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction EditVideo(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    video = _ref.video;\n  var _useState = (0,react.useState)(false),\n    _useState2 = EditVideo_slicedToArray(_useState, 2),\n    showError = _useState2[0],\n    setShowError = _useState2[1];\n  var _useState3 = (0,react.useState)(false),\n    _useState4 = EditVideo_slicedToArray(_useState3, 2),\n    urlReady = _useState4[0],\n    setUrlReady = _useState4[1];\n  var _useState5 = (0,react.useState)({}),\n    _useState6 = EditVideo_slicedToArray(_useState5, 2),\n    newVideo = _useState6[0],\n    setNewVideo = _useState6[1];\n  var _useState7 = (0,react.useState)(false),\n    _useState8 = EditVideo_slicedToArray(_useState7, 2),\n    isSaving = _useState8[0],\n    setIsSaving = _useState8[1];\n  var dispatch = (0,es/* useDispatch */.wA)();\n\n  // Update Url Ready\n  (0,react.useEffect)(function () {\n    setUrlReady(!!video.video_url);\n  }, [video]);\n  (0,react.useEffect)(function () {\n    // Update newVideo structure to correspond to VideoForm structure\n    setNewVideo({\n      id: video.id,\n      host: video.video_host,\n      url: video.video_url,\n      title: video.video_title,\n      start_enabled: video.video_start,\n      end_enabled: video.video_end,\n      start_time: video.video_start_time,\n      end_time: video.video_end_time,\n      playlists: video.playlists,\n      thumbnail: video.thumbnail,\n      duration: video.video_duration\n    });\n  }, [video]);\n  var saveChanges = function saveChanges() {\n    setIsSaving(true);\n    dispatch((0,slices_videos/* updateVideo */.h5)({\n      id: newVideo.id,\n      video: {\n        url: newVideo.url,\n        title: newVideo.title,\n        start_enabled: newVideo.start_enabled,\n        end_enabled: newVideo.end_enabled,\n        start_time: newVideo.start_time,\n        end_time: newVideo.end_time,\n        thumbnail: newVideo.thumbnail.id,\n        duration: newVideo.duration\n      }\n    })).then(function (response) {\n      var _response$payload;\n      if (response !== null && response !== void 0 && (_response$payload = response.payload) !== null && _response$payload !== void 0 && _response$payload.success) {\n        // Display Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          message: sprintf((0,build_module.__)(\'“%s” updated successfully.\', \'wpmudev_vids\'), newVideo.title)\n        }));\n\n        // Close the modal\n        closeModal();\n      } else {\n        // Display Error Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          type: \'error\',\n          message: (0,build_module.__)(\'Updated failed: Please enter a valid URL and Title.\', \'wpmudev_vids\')\n        }));\n      }\n    }).finally(function () {\n      setIsSaving(false);\n    });\n  };\n  var btnDisabled = newVideo.start_enabled && !timeRegex(newVideo.start_time) || newVideo.end_enabled && !timeRegex(newVideo.end_time);\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n      className: "sui-flatter",\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Title, {\n        id: modalID,\n        children: (0,build_module.__)(\'Edit video\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n        className: "sui-button-float--right",\n        icon: "close",\n        onClick: closeModal,\n        size: "md",\n        outlined: false,\n        label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n      })]\n    }), showError && /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Body, {\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* StaticNotice */.RL, {\n        type: "error",\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          children: (0,build_module.__)(\'The URL you have attached is invalid. Try again by copying the URL from your browser and pasting it into the input field below.\', \'wpmudev_vids\')\n        })\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(VideoForm, {\n      video: newVideo,\n      setVideo: setNewVideo,\n      modalID: modalID,\n      urlReady: urlReady,\n      setUrlReady: setUrlReady,\n      setShowError: setShowError\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n      isCentered: true,\n      isFlatten: true,\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        onLoadingText: (0,build_module.__)(\'Saving Changes\', \'wpmudev_vids\'),\n        isLoading: isSaving,\n        onClick: saveChanges,\n        disabled: btnDisabled,\n        children: (0,build_module.__)(\'Save Changes\', \'wpmudev_vids\')\n      })\n    })]\n  });\n}\n/* harmony default export */ var modals_EditVideo = ((/* unused pure expression or super */ null && (EditVideo)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/DeleteVideo.js\nfunction DeleteVideo_slicedToArray(r, e) { return DeleteVideo_arrayWithHoles(r) || DeleteVideo_iterableToArrayLimit(r, e) || DeleteVideo_unsupportedIterableToArray(r, e) || DeleteVideo_nonIterableRest(); }\nfunction DeleteVideo_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction DeleteVideo_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return DeleteVideo_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? DeleteVideo_arrayLikeToArray(r, a) : void 0; } }\nfunction DeleteVideo_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction DeleteVideo_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction DeleteVideo_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction DeleteVideo(_ref) {\n  var modal = _ref.modal,\n    video = _ref.video,\n    closeModal = _ref.closeModal;\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var _useState = (0,react.useState)(false),\n    _useState2 = DeleteVideo_slicedToArray(_useState, 2),\n    isDeleting = _useState2[0],\n    setIsDeleting = _useState2[1];\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    id = _ref2.id;\n\n  /**\n   * Deletes the video upon confirmation\n   *\n   * @return {void}\n   */\n  var onDelete = function onDelete() {\n    setIsDeleting(true);\n    dispatch((0,slices_videos/* deleteVideo */.Ln)({\n      id: id\n    })).then(function (response) {\n      var _response$payload;\n      if (response !== null && response !== void 0 && (_response$payload = response.payload) !== null && _response$payload !== void 0 && _response$payload.success) {\n        // Close the modal\n        closeModal();\n\n        //Add the notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          message: (0,build_module.__)(\'Video deleted successfully.\', \'wpmudev_vids\')\n        }));\n      } else {\n        var _response$error;\n        // Display Error message\n        dispatch((0,notice/* addNotice */.Mp)({\n          type: \'error\',\n          message: response === null || response === void 0 || (_response$error = response.error) === null || _response$error === void 0 ? void 0 : _response$error.message\n        }));\n      }\n    }).finally(function () {\n      setIsDeleting(false);\n    });\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n      className: "sui-flatten sui-content-center sui-spacing-top--60",\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n        outlined: false,\n        className: "sui-button-float--right",\n        onClick: closeModal,\n        id: "".concat(modal, "-close"),\n        icon: "close",\n        label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\'),\n        tooltip: false\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Title, {\n        className: "sui-lg",\n        id: "".concat(modal, "-title"),\n        children: (0,build_module.__)(\'Delete video\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Description, {\n        id: "".concat(modal, "-title"),\n        children: (0,build_module.__)(\'Are you sure you want to delete the video?\', \'wpmudev_vids\')\n      })]\n    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Footer, {\n      isFlatten: true,\n      isCentered: true,\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        onClick: closeModal,\n        id: "".concat(modal, "-submit"),\n        type: "ghost",\n        children: (0,build_module.__)(\'Cancel\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        id: "".concat(modal, "-submit"),\n        type: "ghost",\n        color: "red",\n        isLoading: isDeleting,\n        onLoadingText: (0,build_module.__)(\'Deleting\', \'wpmudev_vids\'),\n        onClick: onDelete,\n        children: (0,build_module.__)(\'Delete\', \'wpmudev_vids\')\n      })]\n    })]\n  });\n}\n/* harmony default export */ var modals_DeleteVideo = ((/* unused pure expression or super */ null && (DeleteVideo)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/EditTitle.js\nfunction EditTitle_typeof(o) { "@babel/helpers - typeof"; return EditTitle_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, EditTitle_typeof(o); }\nfunction EditTitle_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction EditTitle_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? EditTitle_ownKeys(Object(t), !0).forEach(function (r) { EditTitle_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : EditTitle_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction EditTitle_defineProperty(e, r, t) { return (r = EditTitle_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction EditTitle_toPropertyKey(t) { var i = EditTitle_toPrimitive(t, "string"); return "symbol" == EditTitle_typeof(i) ? i : i + ""; }\nfunction EditTitle_toPrimitive(t, r) { if ("object" != EditTitle_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != EditTitle_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction EditTitle_slicedToArray(r, e) { return EditTitle_arrayWithHoles(r) || EditTitle_iterableToArrayLimit(r, e) || EditTitle_unsupportedIterableToArray(r, e) || EditTitle_nonIterableRest(); }\nfunction EditTitle_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction EditTitle_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return EditTitle_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? EditTitle_arrayLikeToArray(r, a) : void 0; } }\nfunction EditTitle_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction EditTitle_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction EditTitle_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Libraries dependecies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n/**\n * Libraries dependecies\n */\n\n\n\n\n\n\nfunction EditTitle(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    video = _ref.video,\n    setCurrentVideo = _ref.setCurrentVideo;\n  var _useState = (0,react.useState)(false),\n    _useState2 = EditTitle_slicedToArray(_useState, 2),\n    isSaving = _useState2[0],\n    setIsSaving = _useState2[1];\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var headerClasses = classnames_default()(\'sui-flatten\', \'sui-content-center\', \'sui-spacing-top--60\');\n  var imageClasses = classnames_default()(\'sui-image\', \'sui-image-center\');\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    id = _ref2.id,\n    video_title = _ref2.video_title;\n\n  /**\n   * On title change\n   *\n   * @return {void}\n   */\n  var onTitleChange = function onTitleChange(value) {\n    setCurrentVideo(EditTitle_objectSpread(EditTitle_objectSpread({}, video), {}, {\n      video_title: value\n    }));\n  };\n\n  /**\n   * saveChanges\n   *\n   * @return {void}\n   */\n  var saveChanges = function saveChanges() {\n    setIsSaving(true);\n    dispatch((0,slices_videos/* updateVideo */.h5)({\n      id: id,\n      video: {\n        title: video_title\n      }\n    })).then(function (response) {\n      var _response$payload;\n      if (response !== null && response !== void 0 && (_response$payload = response.payload) !== null && _response$payload !== void 0 && _response$payload.success) {\n        // Display Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          message: sprintf((0,build_module.__)(\'Video title is changed to “%s”.\', \'wpmudev_vids\'), video_title)\n        }));\n\n        // Close the modal\n        closeModal();\n      } else {\n        // Display Error Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          type: \'error\',\n          message: (0,build_module.__)(\'Sorry. Could not update the video title.\', \'wpmudev_vids\')\n        }));\n      }\n    }).finally(function () {\n      setIsSaving(false);\n    });\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n      className: headerClasses,\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n        outlined: false,\n        className: "sui-button-float--right",\n        onClick: closeModal,\n        id: "".concat(modalID, "-close"),\n        icon: "close",\n        label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Title, {\n        className: "sui-lg",\n        id: "".concat(modalID, "-title"),\n        children: (0,build_module.__)(\'Video title\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Description, {\n        id: "".concat(modalID, "-title"),\n        children: (0,build_module.__)(\'Change the title of the video below.\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n        className: "sui-form-field",\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Input */.pd, {\n          id: "wpmudev-videos-video-title-form-title-input",\n          placeholder: (0,build_module.__)(\'Video title\', \'wpmudev_vids\'),\n          value: video_title,\n          onChange: onTitleChange\n        })\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        color: "blue",\n        onLoadingText: (0,build_module.__)(\'Saving Changes\', \'wpmudev_vids\'),\n        isLoading: isSaving,\n        onClick: saveChanges,\n        children: (0,build_module.__)(\'Save Changes\', \'wpmudev_vids\')\n      })]\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n      isFlatten: true,\n      isCentered: true\n    })]\n  });\n}\n/* harmony default export */ var modals_EditTitle = ((/* unused pure expression or super */ null && (EditTitle)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/EditPlaylists.js\nfunction EditPlaylists_typeof(o) { "@babel/helpers - typeof"; return EditPlaylists_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, EditPlaylists_typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || EditPlaylists_unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return EditPlaylists_arrayLikeToArray(r); }\nfunction EditPlaylists_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction EditPlaylists_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? EditPlaylists_ownKeys(Object(t), !0).forEach(function (r) { EditPlaylists_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : EditPlaylists_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction EditPlaylists_defineProperty(e, r, t) { return (r = EditPlaylists_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction EditPlaylists_toPropertyKey(t) { var i = EditPlaylists_toPrimitive(t, "string"); return "symbol" == EditPlaylists_typeof(i) ? i : i + ""; }\nfunction EditPlaylists_toPrimitive(t, r) { if ("object" != EditPlaylists_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != EditPlaylists_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction EditPlaylists_slicedToArray(r, e) { return EditPlaylists_arrayWithHoles(r) || EditPlaylists_iterableToArrayLimit(r, e) || EditPlaylists_unsupportedIterableToArray(r, e) || EditPlaylists_nonIterableRest(); }\nfunction EditPlaylists_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction EditPlaylists_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return EditPlaylists_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? EditPlaylists_arrayLikeToArray(r, a) : void 0; } }\nfunction EditPlaylists_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction EditPlaylists_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction EditPlaylists_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Libraries dependecies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n/**\n * Libraries dependecies\n */\n\n\n\n\n\n\nfunction EditPlaylists(_ref) {\n  var modalID = _ref.modalID,\n    closeModal = _ref.closeModal,\n    video = _ref.video,\n    setCurrentVideo = _ref.setCurrentVideo;\n  var _useState = (0,react.useState)(false),\n    _useState2 = EditPlaylists_slicedToArray(_useState, 2),\n    isSaving = _useState2[0],\n    setIsSaving = _useState2[1];\n  var _useState3 = (0,react.useState)([]),\n    _useState4 = EditPlaylists_slicedToArray(_useState3, 2),\n    playlists = _useState4[0],\n    setPlaylists = _useState4[1];\n  var dispatch = (0,es/* useDispatch */.wA)();\n  var _ref2 = video !== null && video !== void 0 ? video : {},\n    videoPlaylists = _ref2.playlists;\n  var playlistsObject = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_playlists/* getPlaylists */.Eo)(state);\n  });\n  var filtered = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_playlists/* getFiltered */.A1)(state);\n  });\n  var headerClasses = classnames_default()(\'sui-flatten\', \'sui-content-center\', \'sui-spacing-top--60\');\n  var labelClasses = classnames_default()(\'sui-checkbox\', \'sui-checkbox-sm\', \'sui-checkbox-stacked\');\n  var imageClasses = classnames_default()(\'sui-image\', \'sui-image-center\');\n  var _ref3 = video !== null && video !== void 0 ? video : {},\n    id = _ref3.id,\n    video_title = _ref3.video_title;\n  (0,react.useEffect)(function () {\n    var newPlaylists = [];\n    if (Array.isArray(filtered)) {\n      filtered.forEach(function (id) {\n        if (playlistsObject[id]) {\n          newPlaylists.push(playlistsObject[id]);\n        }\n      });\n    }\n    setPlaylists(newPlaylists);\n  }, [playlistsObject, filtered]);\n\n  /**\n   * Checkes if video is added to playlist\n   *\n   * @argument {id} id playlist id\n   *\n   * @return {boolean}\n   */\n  var isPlaylistChecked = function isPlaylistChecked(id) {\n    if (Array.isArray(videoPlaylists)) {\n      return videoPlaylists.includes(id);\n    }\n    return false;\n  };\n\n  /**\n   * Toggles Playlist\n   *\n   * @argument {id} id playlist id\n   *\n   * @return {null}\n   *\n   */\n  var togglePlaylist = function togglePlaylist(id, value) {\n    if (value) {\n      // Add the playlist id\n      setCurrentVideo(EditPlaylists_objectSpread(EditPlaylists_objectSpread({}, video), {}, {\n        playlists: [].concat(_toConsumableArray(videoPlaylists), [id])\n      }));\n    } else {\n      // Remove the playlist id\n      setCurrentVideo(EditPlaylists_objectSpread(EditPlaylists_objectSpread({}, video), {}, {\n        playlists: videoPlaylists.filter(function (el) {\n          return id !== el;\n        })\n      }));\n    }\n  };\n\n  /**\n   * Check if we need to disable the submit button\n   */\n  var isSubmitDisabled = function isSubmitDisabled() {\n    if (Array.isArray(videoPlaylists)) {\n      return videoPlaylists.length === 0;\n    }\n    return false;\n  };\n\n  /**\n   * Submit to backend\n   *\n   * @return {null}\n   */\n  var saveChanges = function saveChanges() {\n    setIsSaving(true);\n    dispatch((0,slices_videos/* updateVideo */.h5)({\n      id: id,\n      video: {\n        playlist: videoPlaylists\n      }\n    })).then(function (response) {\n      var _response$payload;\n      if (response !== null && response !== void 0 && (_response$payload = response.payload) !== null && _response$payload !== void 0 && _response$payload.success) {\n        // Display Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          message: sprintf((0,build_module.__)(\'Playlists of "%s" was successfully updated.\', \'wpmudev_vids\'), video_title)\n        }));\n\n        // Close the modal\n        closeModal();\n      } else {\n        // Display Error Notice\n        dispatch((0,notice/* addNotice */.Mp)({\n          type: \'error\',\n          message: sprintf((0,build_module.__)(\'Updating “%s” failed.\', \'wpmudev_vids\'), video_title)\n        }));\n      }\n    }).finally(function () {\n      setIsSaving(false);\n    });\n  };\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az.Header, {\n      className: headerClasses,\n      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* IconButton */.K0, {\n        outlined: false,\n        className: "sui-button-float--right",\n        onClick: closeModal,\n        id: "".concat(modalID, "-close"),\n        icon: "close",\n        label: (0,build_module.__)(\'Close this dialog.\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Title, {\n        className: "sui-lg",\n        id: "".concat(modalID, "-title"),\n        children: (0,build_module.__)(\'Add to playlist\', \'wpmudev_vids\')\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Description, {\n        id: "".concat(modalID, "-title"),\n        children: sprintf((0,build_module.__)(\'Choose which playlists you want to add the "%s" video to. It will be available for people to watch if they can access the playlist.\', \'wpmudev_vids\'), video_title)\n      })]\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Body, {\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n        className: "sui-form-field",\n        children: playlists.map(function (playlist) {\n          return /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Checkbox */.Sc, {\n            id: "".concat(modalID, "-playlist-").concat(playlist.id),\n            className: "sui-checkbox-sm",\n            isStacked: true,\n            checked: isPlaylistChecked(playlist.id),\n            label: playlist.title,\n            onChange: function onChange(value) {\n              return togglePlaylist(playlist.id, value);\n            }\n          }, playlist.id);\n        })\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Footer, {\n      isFlatten: true,\n      isCentered: true,\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        color: "blue",\n        onLoadingText: (0,build_module.__)(\'Updating playlist\', \'wpmudev_vids\'),\n        isLoading: isSaving,\n        disabled: isSubmitDisabled(),\n        onClick: saveChanges,\n        children: (0,build_module.__)(\'Add to Playlist\', \'wpmudev_vids\')\n      })\n    })]\n  });\n}\n/* harmony default export */ var modals_EditPlaylists = ((/* unused pure expression or super */ null && (EditPlaylists)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/modals/index.js\n\n\n\n\n\n// EXTERNAL MODULE: ./node_modules/clipboard/dist/clipboard.js\nvar clipboard = __webpack_require__(7576);\nvar clipboard_default = /*#__PURE__*/__webpack_require__.n(clipboard);\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/VideosBox/VideosBox.js\nfunction VideosBox_toConsumableArray(r) { return VideosBox_arrayWithoutHoles(r) || VideosBox_iterableToArray(r) || VideosBox_unsupportedIterableToArray(r) || VideosBox_nonIterableSpread(); }\nfunction VideosBox_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction VideosBox_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction VideosBox_arrayWithoutHoles(r) { if (Array.isArray(r)) return VideosBox_arrayLikeToArray(r); }\nfunction VideosBox_slicedToArray(r, e) { return VideosBox_arrayWithHoles(r) || VideosBox_iterableToArrayLimit(r, e) || VideosBox_unsupportedIterableToArray(r, e) || VideosBox_nonIterableRest(); }\nfunction VideosBox_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction VideosBox_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return VideosBox_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? VideosBox_arrayLikeToArray(r, a) : void 0; } }\nfunction VideosBox_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction VideosBox_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction VideosBox_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library components\n */\n\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n\n\n/**\n * External Dependencies\n */\n\n\n\n\n\n\n\nfunction VideosBox() {\n  var _useState = (0,react.useState)({}),\n    _useState2 = VideosBox_slicedToArray(_useState, 2),\n    currentVideo = _useState2[0],\n    setCurrentVideo = _useState2[1];\n\n  // videos list\n  var _useState3 = (0,react.useState)({\n      custom: [],\n      default: []\n    }),\n    _useState4 = VideosBox_slicedToArray(_useState3, 2),\n    videos = _useState4[0],\n    setVideos = _useState4[1];\n  var _useState5 = (0,react.useState)(),\n    _useState6 = VideosBox_slicedToArray(_useState5, 2),\n    openedId = _useState6[0],\n    setOpenedId = _useState6[1];\n  var videosObject = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_videos/* getVideos */.fY)(state);\n  });\n  var filtered = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_videos/* getFilteredIds */.Q6)(state);\n  });\n  var isLoading = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_videos/* getLoadingStatus */.H)(state);\n  });\n  var videosHasInitiated = Object.keys(videosObject).length > 0;\n\n  // Edit Modal\n  var editModalID = \'wpmudev-videos-video-edit-modal\';\n  var _useModal = (0,hooks/* useModal */.h)({\n      id: editModalID\n    }),\n    _useModal2 = VideosBox_slicedToArray(_useModal, 2),\n    openEditModal = _useModal2[0],\n    closeEditModal = _useModal2[1];\n\n  // Delete Modal\n  var deleteModalID = \'wpmudev-videos-video-delete-modal\';\n  var _useModal3 = (0,hooks/* useModal */.h)({\n      id: deleteModalID\n    }),\n    _useModal4 = VideosBox_slicedToArray(_useModal3, 2),\n    openDeleteModal = _useModal4[0],\n    closeDeleteModal = _useModal4[1];\n\n  // Title Modal\n  var titleModalID = \'wpmudev-videos-video-title-modal\';\n  var _useModal5 = (0,hooks/* useModal */.h)({\n      id: titleModalID\n    }),\n    _useModal6 = VideosBox_slicedToArray(_useModal5, 2),\n    openTitleModal = _useModal6[0],\n    closeTitleModal = _useModal6[1];\n\n  // Playlists Modal\n  var playlistsModalID = \'wpmudev-videos-video-playlist-modal\';\n  var _useModal7 = (0,hooks/* useModal */.h)({\n      id: playlistsModalID\n    }),\n    _useModal8 = VideosBox_slicedToArray(_useModal7, 2),\n    openPlaylistsModal = _useModal8[0],\n    closePlaylistsModal = _useModal8[1];\n  var location = (0,react_router_dist/* useLocation */.zy)();\n\n  /**\n   * Get videos list & update the state\n   *\n   * We will use the filtered list to include\n   * search results.\n   * @return {void}\n   */\n  var updateVideosList = function updateVideosList() {\n    var videos = {\n      default: [],\n      custom: []\n    };\n\n    // Get filtered ids in reverse order.\n    var filteredCopy = VideosBox_toConsumableArray(filtered);\n    var sorted = filteredCopy.sort().reverse();\n    sorted.forEach(function (id) {\n      if (videosObject[id]) {\n        var video = videosObject[id];\n        // Get the video object.\n        if (\'default\' === video.video_type) {\n          // Default videos.\n          videos.default.push(video);\n        } else {\n          // Custom videos.\n          videos.custom.push(video);\n        }\n      }\n    });\n    setVideos(videos);\n  };\n  (0,react.useEffect)(function () {\n    // Update videos list\n    updateVideosList();\n  }, [filtered, videosObject]);\n  var boxClasses = classnames_default()({\n    loading: isLoading\n  });\n\n  // Initialize clipboard library\n  (0,react.useEffect)(function () {\n    new (clipboard_default())(\'.ivt-copy-shortcode\');\n  }, []);\n\n  /**\n   * Check if current membership needs an upgrade.\n   *\n   * @return {boolean}\n   */\n  var shouldUpgrade = function shouldUpgrade() {\n    return !(0,utils/* expiredMember */.gL)() && !(0,utils/* validMember */.xH)() && (0,utils/* dashConnected */.YT)();\n  };\n  var displayNotices = /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {});\n  if (shouldUpgrade()) {\n    displayNotices = /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* UpgradeNotice */.dh, {});\n  } else if (!shouldUpgrade() && (0,utils/* expiredMember */.gL)()) {\n    displayNotices = /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* ExpiredNotice */.oK, {});\n  } else {\n    displayNotices = /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* DashNotice */.xY, {});\n  }\n\n  // should disable row for default videos\n  var shouldDisableDefault = !(0,utils/* validMember */.xH)() || (0,utils/* expiredMember */.gL)();\n\n  // Handle routes coming from dashboard page\n  (0,react.useEffect)(function () {\n    if (videosHasInitiated) {\n      // regex to match with url pathname\n      var pattern = /^(\\/(view|edit|playlist|delete))\\/(\\d+)$/;\n      var matches = location.pathname.match(pattern);\n      if (matches) {\n        var _matches = VideosBox_slicedToArray(matches, 4),\n          action = _matches[2],\n          videoID = _matches[3];\n\n        // View Video: Open correspondant accordion\n        if (action === \'view\') {\n          setOpenedId(Number(videoID));\n          return;\n        }\n\n        // Playlist: Open playlists modal\n        if (videosObject[videoID] && action === \'playlist\') {\n          setCurrentVideo(videosObject[videoID]);\n          openPlaylistsModal();\n          return;\n        }\n\n        // edit: Open edit modal\n        if (videosObject[videoID] && action === \'edit\') {\n          setCurrentVideo(videosObject[videoID]);\n          if (videosObject[videoID].video_type === \'custom\') {\n            // Edit modal for custom videos\n            openEditModal();\n          } else {\n            // Edit title modal for default videos\n            openTitleModal();\n          }\n        }\n\n        // edit: Open delete confirmation modal\n        if (videosObject[videoID] && action === \'delete\') {\n          setCurrentVideo(videosObject[videoID]);\n          if (videosObject[videoID].video_type === \'custom\') {\n            openDeleteModal();\n          }\n        }\n      }\n    }\n  }, [videosHasInitiated]);\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Modal */.aF, {\n      id: editModalID,\n      size: "lg",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(EditVideo, {\n        video: currentVideo,\n        modalID: editModalID,\n        closeModal: closeEditModal\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Modal */.aF, {\n      id: deleteModalID,\n      size: "sm",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(DeleteVideo, {\n        video: currentVideo,\n        modalID: deleteModalID,\n        closeModal: closeDeleteModal,\n        setCurrentVideo: setCurrentVideo\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Modal */.aF, {\n      id: titleModalID,\n      size: "sm",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(EditTitle, {\n        video: currentVideo,\n        modalID: titleModalID,\n        closeModal: closeTitleModal,\n        setCurrentVideo: setCurrentVideo\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Modal */.aF, {\n      id: playlistsModalID,\n      size: "sm",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(EditPlaylists, {\n        video: currentVideo,\n        modalID: playlistsModalID,\n        closeModal: closePlaylistsModal,\n        setCurrentVideo: setCurrentVideo\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n      id: "wpmudev-videos-videos-list",\n      className: boxClasses,\n      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("p", {\n        role: "alert",\n        className: "loading-text",\n        "aria-live": "polite",\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Icon */.In, {\n          icon: "loader",\n          size: "md",\n          animate: true\n        }), (0,build_module.__)(\'Loading...\', \'wpmudev_vids\')]\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Header, {\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Title, {\n          children: (0,build_module.__)(\'Available Videos\', \'wpmudev_vids\')\n        })\n      }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Box */.az.Body, {\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          children: (0,build_module.__)(\'Add, edit and view video tutorials all in one handy place.\', \'wpmudev_vids\')\n        })\n      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n        className: "wpmudev-videos-accordion",\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n          className: "wpmudev-videos-accordion--header",\n          "aria-hidden": "true",\n          children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n            className: "wpmudev-videos-accordion--row",\n            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n              className: "wpmudev-videos-accordion--col-large",\n              children: (0,build_module.__)(\'Video title\', \'wpmudev_vids\')\n            }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n              className: "wpmudev-videos-accordion--col-small",\n              children: (0,build_module.__)(\'Duration\', \'wpmudev_vids\')\n            })]\n          })\n        }), videos.custom.length > 0 && videos.custom.map(function (video) {\n          return /*#__PURE__*/(0,jsx_runtime.jsx)(VideoRow, {\n            openedId: openedId,\n            setOpenedId: setOpenedId,\n            video: video,\n            disabled: false,\n            setCurrentVideo: setCurrentVideo,\n            openEditModal: openEditModal,\n            openDeleteModal: openDeleteModal,\n            openPlaylistsModal: openPlaylistsModal\n          }, video.id);\n        }), !(0,utils/* validMember */.xH)() && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n          className: "wpmudev-videos-accordion--notice",\n          children: displayNotices\n        }), videos.default.length > 0 && videos.default.map(function (video) {\n          return /*#__PURE__*/(0,jsx_runtime.jsx)(VideoRow, {\n            openedId: openedId,\n            setOpenedId: setOpenedId,\n            video: video,\n            disabled: shouldDisableDefault,\n            setCurrentVideo: setCurrentVideo,\n            openDeleteModal: openDeleteModal,\n            openTitleModal: openTitleModal,\n            openPlaylistsModal: openPlaylistsModal\n          }, video.id);\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* GoTopButton */.uh, {})]\n      })]\n    })]\n  });\n}\n/* harmony default export */ var VideosBox_VideosBox = ((/* unused pure expression or super */ null && (VideosBox)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/VideosBox/index.js\n\n// EXTERNAL MODULE: ./node_modules/interweave/esm/index.js\nvar esm = __webpack_require__(5013);\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/EmptyBox/EmptyBox.js\n/**\n * Library dependencies\n */\n\n\n/**\n * Internal dependencies\n */\n\n\n/**\n * External dependencies\n */\n\n\n\n\nfunction EmptyBox(_ref) {\n  var _window$ivtVars$white, _window$ivtVars;\n  var search = _ref.search;\n  var _ref2 = (_window$ivtVars$white = (_window$ivtVars = window.ivtVars) === null || _window$ivtVars === void 0 ? void 0 : _window$ivtVars.whitelabel) !== null && _window$ivtVars$white !== void 0 ? _window$ivtVars$white : {},\n    hide_branding = _ref2.hide_branding;\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)(components/* Box */.az, {\n    className: classnames_default()(\'sui-message\', \'sui-message-lg\'),\n    children: [!hide_branding && /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* ImageTag */.E0, {\n      src: "message/no-results.png",\n      className: "sui-image",\n      alt: (0,build_module.__)(\'Empty results\', \'wpmudev_vids\')\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: "sui-message-content",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(esm/* Interweave */.BW, {\n          content: (0,build_module/* sprintf */.nv)((0,build_module.__)("We couldn\'t find any videos matching your search <strong>“%s”</strong>. Please try again"), search)\n        })\n      })\n    })]\n  });\n}\n/* harmony default export */ var EmptyBox_EmptyBox = ((/* unused pure expression or super */ null && (EmptyBox)));\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/EmptyBox/index.js\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/partials/index.js\n\n\n\n;// CONCATENATED MODULE: ./app/src/pages/videos/App.js\nfunction App_slicedToArray(r, e) { return App_arrayWithHoles(r) || App_iterableToArrayLimit(r, e) || App_unsupportedIterableToArray(r, e) || App_nonIterableRest(); }\nfunction App_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction App_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return App_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? App_arrayLikeToArray(r, a) : void 0; } }\nfunction App_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction App_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction App_arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/**\n * Library dependencies\n */\n\n\n\n/**\n * Internal dependencies\n */\n\n\n\n\n\n\n\n\n\n/**\n * External dependencies\n */\n\n\n\n\n\nfunction App() {\n  var _window$ivtVars;\n  var _useState = (0,react.useState)(\'\'),\n    _useState2 = App_slicedToArray(_useState, 2),\n    search = _useState2[0],\n    setSearch = _useState2[1];\n  var filtered = (0,es/* useSelector */.d4)(function (state) {\n    return (0,slices_videos/* getFilteredIds */.Q6)(state);\n  });\n  var currentNotice = (0,es/* useSelector */.d4)(function (state) {\n    return (0,notice/* getCurrentNotice */.Og)(state);\n  });\n  var dispatch = (0,es/* useDispatch */.wA)();\n\n  // Notice Data\n  var id = currentNotice.id,\n    message = currentNotice.message,\n    type = currentNotice.type,\n    dismiss = currentNotice.dismiss;\n\n  // Add Custom Video Modal\n  var customVideoModalId = \'wpmudev-videos-video-create-modal\';\n  var _useModal = (0,hooks/* useModal */.h)({\n      id: customVideoModalId\n    }),\n    _useModal2 = App_slicedToArray(_useModal, 2),\n    openVideoModal = _useModal2[0],\n    closeVideoModal = _useModal2[1];\n\n  /**\n   * Load data on mount\n   */\n  (0,react.useEffect)(function () {\n    // Load videos\n    dispatch((0,slices_videos/* initVideos */.r2)());\n\n    // Load Playlists\n    dispatch((0,slices_playlists/* initPlaylists */.cM)());\n  }, []);\n\n  // Global Variables\n  var _ref = (_window$ivtVars = window.ivtVars) !== null && _window$ivtVars !== void 0 ? _window$ivtVars : {},\n    hide_doc_link = _ref.whitelabel.hide_doc_link;\n  var location = (0,react_router_dist/* useLocation */.zy)();\n\n  // Handeling routes coming from dashbaord\n  (0,react.useEffect)(function () {\n    var pathname = location.pathname;\n    if (pathname.slice(1) === \'create\') {\n      openVideoModal();\n    }\n  }, []);\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    className: "sui-wrap",\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(components/* Modal */.aF, {\n      size: "lg",\n      id: customVideoModalId,\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(CreateCustomVideo, {\n        closeModal: closeVideoModal,\n        modalID: customVideoModalId\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Header */.Y9, {\n      showDocLink: !hide_doc_link,\n      docLink: "https://wpmudev.com/docs/wpmu-dev-plugins/integrated-video-tutorials/",\n      docText: (0,build_module.__)(\'View Documentation\', \'wpmudev_vids\'),\n      title: (0,build_module.__)(\'Videos\', \'wpmudev_vids\'),\n      actionsLeft: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* Button */.$n, {\n        icon: "plus",\n        color: "blue",\n        onClick: openVideoModal,\n        children: (0,build_module.__)(\'Add Custom Video\', \'wpmudev_vids\')\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n      className: "sui-floating-notices",\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(components/* TopNotice */.ii, {\n        id: id,\n        dismiss: dismiss,\n        message: message,\n        type: type,\n        label: (0,build_module.__)(\'Dismiss this notice\', \'wpmudev_vids\')\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(SummaryBox, {\n      search: search,\n      setSearch: setSearch\n    }), search && filtered.length === 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(EmptyBox, {\n      search: search\n    }), filtered.length != 0 && /*#__PURE__*/(0,jsx_runtime.jsx)(VideosBox, {}), /*#__PURE__*/(0,jsx_runtime.jsx)(src_components/* PageFooter */.FM, {})]\n  });\n}\n/* harmony default export */ var videos_App = (App);\n;// CONCATENATED MODULE: ./app/src/pages/videos/main.js\n\n\n\n\n\n\n\nvar root = client.createRoot(document.getElementById(\'wpmudev-videos-videos-app\'));\nroot.render( /*#__PURE__*/(0,jsx_runtime.jsx)(react.StrictMode, {\n  children: /*#__PURE__*/(0,jsx_runtime.jsx)(es/* Provider */.Kq, {\n    store: store/* default */.A,\n    children: /*#__PURE__*/(0,jsx_runtime.jsx)(dist/* HashRouter */.I9, {\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(videos_App, {})\n    })\n  })\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQ4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FFbkpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FFeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBRTNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBRXpEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FFdFBBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqT0E7QUFDQTs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlNQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBRXhUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUV0Q0E7QUFDQTs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL3BhcnRpYWxzL1N1bW1hcnlCb3gvU3VtbWFyeUJveC5qcz82OTU4Iiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvcGFydGlhbHMvU3VtbWFyeUJveC9pbmRleC5qcz82N2Q2Iiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvY29tcG9uZW50cy9WaWRlb1Jvdy9WaWRlb1Jvd0hlYWRlci5qcz9mMTAyIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvY29tcG9uZW50cy9WaWRlb1Jvdy9WaWRlb1Jvd0JvZHkuanM/NjA5YiIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvVmlkZW9Sb3cvVmlkZW9Sb3cuanM/YzJmNCIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvVmlkZW9Sb3cvaW5kZXguanM/MDE2MiIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvVmlkZW9Ib3N0cy9WaWRlb0hvc3RzTGlzdC5qcz9jMDBlIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvY29tcG9uZW50cy9WaWRlb0hvc3RzL2luZGV4LmpzPzQxMmIiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9jb21wb25lbnRzL1ZpZGVvVXJsRmllbGQvVmlkZW9VcmxGaWVsZC5qcz80NGMyIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvY29tcG9uZW50cy9WaWRlb1VybEZpZWxkL2luZGV4LmpzPzkwNmIiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3V0aWxzLmpzPzdjN2YiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9jb21wb25lbnRzL1ZpZGVvU2V0dGluZ3MvVGltZUZvcm0uanM/Y2U2NSIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvVmlkZW9TZXR0aW5ncy9WaWRlb1NldHRpbmdzLmpzP2Q4MTgiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9jb21wb25lbnRzL1ZpZGVvU2V0dGluZ3MvaW5kZXguanM/NTRmOCIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvVmlkZW9Gb3JtL1ZpZGVvRm9ybS5qcz8wOWZkIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvY29tcG9uZW50cy9WaWRlb0Zvcm0vaW5kZXguanM/NmUxNyIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL2NvbXBvbmVudHMvaW5kZXguanM/NTM2MSIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL21vZGFscy9zbGlkZXMvVmlkZW9Ib3N0LmpzPzAxYWIiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9tb2RhbHMvc2xpZGVzL1ZpZGVvVXJsLmpzP2M3NmYiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9tb2RhbHMvc2xpZGVzL1ZpZGVvUGxheWxpc3RzLmpzPzkzMjEiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9tb2RhbHMvc2xpZGVzL2luZGV4LmpzPzM4ZTYiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9tb2RhbHMvQ3JlYXRlQ3VzdG9tVmlkZW8uanM/OGYzOCIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL21vZGFscy9FZGl0VmlkZW8uanM/MDQ3YyIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL21vZGFscy9EZWxldGVWaWRlby5qcz83ZDhiIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvbW9kYWxzL0VkaXRUaXRsZS5qcz8xZjcyIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvbW9kYWxzL0VkaXRQbGF5bGlzdHMuanM/Yjk3YSIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL21vZGFscy9pbmRleC5qcz8zZjg1Iiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvcGFydGlhbHMvVmlkZW9zQm94L1ZpZGVvc0JveC5qcz9lZDU3Iiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvcGFydGlhbHMvVmlkZW9zQm94L2luZGV4LmpzPzczZWMiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9wYXJ0aWFscy9FbXB0eUJveC9FbXB0eUJveC5qcz82MmJlIiwid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9wYWdlcy92aWRlb3MvcGFydGlhbHMvRW1wdHlCb3gvaW5kZXguanM/ZWQ1MiIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL3BhcnRpYWxzL2luZGV4LmpzPzU2MTMiLCJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9hcHAvc3JjL3BhZ2VzL3ZpZGVvcy9BcHAuanM/YzU5MSIsIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvcGFnZXMvdmlkZW9zL21haW4uanM/ZDJhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX3dpbmRvdyRpdnRNb2R1bGVWYXJzO1xuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkociwgZSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBlKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgZSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAobnVsbCAhPSB0KSB7IHZhciBlLCBuLCBpLCB1LCBhID0gW10sIGYgPSAhMCwgbyA9ICExOyB0cnkgeyBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7IGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjsgZiA9ICExOyB9IGVsc2UgZm9yICg7ICEoZiA9IChlID0gaS5jYWxsKHQpKS5kb25lKSAmJiAoYS5wdXNoKGUudmFsdWUpLCBhLmxlbmd0aCAhPT0gbCk7IGYgPSAhMCk7IH0gY2F0Y2ggKHIpIHsgbyA9ICEwLCBuID0gcjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFmICYmIG51bGwgIT0gdC5yZXR1cm4gJiYgKHUgPSB0LnJldHVybigpLCBPYmplY3QodSkgIT09IHUpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChvKSB0aHJvdyBuOyB9IH0gcmV0dXJuIGE7IH0gfVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiByOyB9XG4vKipcbiAqIExpYnJhcnkgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IFdoaXRlTGFiZWxTdW1tYXJ5LCBMaXN0IH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2NvbXBvbmVudHMnO1xuXG4vKipcbiAqIEludGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyByZXN0R2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vaGVscGVycy9hcGknO1xuaW1wb3J0IHsgVmlkZW9TZWFyY2hGb3JtIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tcG9uZW50cyc7XG5cbi8qKlxuICogRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIG5ldmVyID0gX18oJ05ldmVyJywgJ3dwbXVkZXZfdmlkcycpO1xudmFyIF9yZWYgPSAoX3dpbmRvdyRpdnRNb2R1bGVWYXJzID0gd2luZG93Lml2dE1vZHVsZVZhcnMpICE9PSBudWxsICYmIF93aW5kb3ckaXZ0TW9kdWxlVmFycyAhPT0gdm9pZCAwID8gX3dpbmRvdyRpdnRNb2R1bGVWYXJzIDoge30sXG4gIGhvc3RzID0gX3JlZi5ob3N0cztcbmV4cG9ydCBmdW5jdGlvbiBTdW1tYXJ5Qm94KF9yZWYyKSB7XG4gIHZhciBzZWFyY2ggPSBfcmVmMi5zZWFyY2gsXG4gICAgc2V0U2VhcmNoID0gX3JlZjIuc2V0U2VhcmNoO1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoMCksXG4gICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgdG90YWwgPSBfdXNlU3RhdGUyWzBdLFxuICAgIHNldFRvdGFsID0gX3VzZVN0YXRlMlsxXTtcbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShuZXZlciksXG4gICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgIHJlY2VudCA9IF91c2VTdGF0ZTRbMF0sXG4gICAgc2V0UmVjZW50ID0gX3VzZVN0YXRlNFsxXTtcbiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZShuZXZlciksXG4gICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLFxuICAgIHJlY2VudEN1c3RvbSA9IF91c2VTdGF0ZTZbMF0sXG4gICAgc2V0UmVjZW50Q3VzdG9tID0gX3VzZVN0YXRlNlsxXTtcbiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZSgnJyksXG4gICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLFxuICAgIGhvc3QgPSBfdXNlU3RhdGU4WzBdLFxuICAgIHNldEhvc3QgPSBfdXNlU3RhdGU4WzFdO1xuXG4gIC8vIG9uIG1vdW50XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgLy8gVXBkYXRlIHN1bW1hcnkgc3RhdHNcbiAgICB1cGRhdGVTdGF0cygpO1xuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaG9zdCBuYW1lIGZyb20ga2V5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaG9zdCBIb3N0IGtleS5cbiAgICpcbiAgICogQHNpbmNlIDEuOC4wXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHZhciBnZXRIb3N0TmFtZSA9IGZ1bmN0aW9uIGdldEhvc3ROYW1lKCkge1xuICAgIHZhciBfaG9zdHMkaG9zdDtcbiAgICByZXR1cm4gKGhvc3RzID09PSBudWxsIHx8IGhvc3RzID09PSB2b2lkIDAgfHwgKF9ob3N0cyRob3N0ID0gaG9zdHNbaG9zdF0pID09PSBudWxsIHx8IF9ob3N0cyRob3N0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaG9zdHMkaG9zdC5uYW1lKSB8fCBuZXZlcjtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBzdW1tYXJ5IHN0YXRzIGZyb20gdGhlIEFQSSByZXNwb25zZS5cbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICB2YXIgc2V0U3RhdHMgPSBmdW5jdGlvbiBzZXRTdGF0cyhkYXRhKSB7XG4gICAgdmFyIHJlY2VudCA9IGRhdGEucmVjZW50O1xuICAgIHZhciBjb3VudHMgPSBkYXRhLmNvdW50O1xuXG4gICAgLy8gTGFzdCB1cGRhdGVkIHZpZGVvLlxuICAgIGlmIChyZWNlbnQudXBkYXRlZF92aWRlby52aWRlb190aXRsZSkge1xuICAgICAgc2V0UmVjZW50KHJlY2VudC51cGRhdGVkX3ZpZGVvKTtcbiAgICB9XG5cbiAgICAvLyBMYXN0IGNyZWF0ZWQgdmlkZW8uXG4gICAgaWYgKHJlY2VudC5jcmVhdGVkX2N1c3RvbV92aWRlby52aWRlb190aXRsZSkge1xuICAgICAgc2V0UmVjZW50Q3VzdG9tKHJlY2VudC5jcmVhdGVkX2N1c3RvbV92aWRlbyk7XG4gICAgfVxuXG4gICAgLy8gUmVjZW50IHZpZGVvIGhvc3QuXG4gICAgaWYgKHJlY2VudC5jcmVhdGVkX2N1c3RvbV92aWRlby52aWRlb19ob3N0KSB7XG4gICAgICB2YXIgdmlkZW9faG9zdCA9IHJlY2VudC5jcmVhdGVkX2N1c3RvbV92aWRlby52aWRlb19ob3N0O1xuICAgICAgc2V0SG9zdCh2aWRlb19ob3N0KTtcbiAgICB9XG5cbiAgICAvLyBUb3RhbCB2aWRlbyBjb3VudC5cbiAgICBpZiAoY291bnRzLnZpZGVvcykge1xuICAgICAgc2V0VG90YWwoY291bnRzLnZpZGVvcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHN1bW1hcnkgc3RhdHMgdXNpbmcgdGhlIEFQSS5cbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVTdGF0cygpIHtcbiAgICByZXN0R2V0KHtcbiAgICAgIHBhdGg6ICdzdW1tYXJ5J1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldFN0YXRzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gSXRlbXNcbiAgdmFyIGxpc3RJdGVtcyA9IFt7XG4gICAgbGFiZWw6IF9fKCdSZWNlbnRseSB1cGRhdGVkIHZpZGVvJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgIGRldGFpbHM6IHJlY2VudCA9PT0gbnVsbCB8fCByZWNlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY2VudC52aWRlb190aXRsZSxcbiAgICBuYXZsaW5rOiBcIi92aWV3L1wiLmNvbmNhdChyZWNlbnQgPT09IG51bGwgfHwgcmVjZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWNlbnQuaWQpXG4gIH0sIHtcbiAgICBsYWJlbDogX18oJ1JlY2VudCB2aWRlbyBob3N0JywgJ3dwbXVkZXZfdmlkcycpLFxuICAgIGRldGFpbHM6IGdldEhvc3ROYW1lKClcbiAgfSwge1xuICAgIGxhYmVsOiBfXygnUmVjZW50IGN1c3RvbSB2aWRlbycsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICBkZXRhaWxzOiByZWNlbnRDdXN0b20udmlkZW9fdGl0bGUsXG4gICAgbmF2bGluazogXCIvdmlldy9cIi5jb25jYXQocmVjZW50Q3VzdG9tID09PSBudWxsIHx8IHJlY2VudEN1c3RvbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVjZW50Q3VzdG9tLmlkKVxuICB9XTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhXaGl0ZUxhYmVsU3VtbWFyeSwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goV2hpdGVMYWJlbFN1bW1hcnkuU2VnbWVudCwge1xuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhXaGl0ZUxhYmVsU3VtbWFyeS5EZXRhaWxzLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLXN1bW1hcnktbGFyZ2VcIixcbiAgICAgICAgICBjaGlsZHJlbjogdG90YWxcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1zdW1tYXJ5LXN1YlwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBfXygnVmlkZW9zJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChWaWRlb1NlYXJjaEZvcm0sIHtcbiAgICAgICAgICBzZWFyY2g6IHNlYXJjaCxcbiAgICAgICAgICBzZXRTZWFyY2g6IHNldFNlYXJjaFxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFdoaXRlTGFiZWxTdW1tYXJ5LlNlZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChMaXN0LCB7XG4gICAgICAgIGl0ZW1zOiBsaXN0SXRlbXNcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgU3VtbWFyeUJveDsiLCJleHBvcnQgKiBmcm9tICcuL1N1bW1hcnlCb3gnOyIsIi8qKlxuICogTGlicmFyeSBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgSWNvbiwgSWNvbkJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgTGlzdFRodW1iIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tcG9uZW50cyc7XG5pbXBvcnQgeyBhZGROb3RpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zdG9yZS9zbGljZXMvbm90aWNlJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb1Jvd0hlYWRlcihfcmVmKSB7XG4gIHZhciB2aWRlbyA9IF9yZWYudmlkZW8sXG4gICAgc2V0T3BlbmVkSWQgPSBfcmVmLnNldE9wZW5lZElkLFxuICAgIG9wZW5lZElkID0gX3JlZi5vcGVuZWRJZCxcbiAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgb3BlbkVkaXRNb2RhbCA9IF9yZWYub3BlbkVkaXRNb2RhbCxcbiAgICBzZXRDdXJyZW50VmlkZW8gPSBfcmVmLnNldEN1cnJlbnRWaWRlbyxcbiAgICBvcGVuRGVsZXRlTW9kYWwgPSBfcmVmLm9wZW5EZWxldGVNb2RhbCxcbiAgICBvcGVuVGl0bGVNb2RhbCA9IF9yZWYub3BlblRpdGxlTW9kYWwsXG4gICAgb3BlblBsYXlsaXN0c01vZGFsID0gX3JlZi5vcGVuUGxheWxpc3RzTW9kYWw7XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjIuaWQsXG4gICAgdmlkZW9fdGl0bGUgPSBfcmVmMi52aWRlb190aXRsZSxcbiAgICB0aHVtYm5haWwgPSBfcmVmMi50aHVtYm5haWwsXG4gICAgdmlkZW9fc2x1ZyA9IF9yZWYyLnZpZGVvX3NsdWcsXG4gICAgdmlkZW9fZHVyYXRpb24gPSBfcmVmMi52aWRlb19kdXJhdGlvbjtcbiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcbiAgdmFyIG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcblxuICAvLyBpZCBvZiB0aGlzIGFjY29yZGlvbiBpcyBvcGVuZWRcbiAgdmFyIGlzT3BlbmVkID0gb3BlbmVkSWQgPT09IGlkO1xuXG4gIC8vIENoZWNrIGlmIGl0IGlzIGEgY3VzdG9tIHZpZGVvXG4gIHZhciBpc0N1c3RvbVZpZGVvID0gKHZpZGVvID09PSBudWxsIHx8IHZpZGVvID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWRlby52aWRlb190eXBlKSA9PT0gJ2N1c3RvbSc7XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIGEgbm90aWNlIHRoYXQgc2hvcnRjb2RlIHdhcyBjb3BpZWQgc3VjY2Vzc2Z1bGx5XG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgZGlzcGxheUNvcHlOb3RpY2UgPSBmdW5jdGlvbiBkaXNwbGF5Q29weU5vdGljZSgpIHtcbiAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgbWVzc2FnZTogX18oJ1Nob3J0Y29kZSBoYXMgYmVlbiBjb3BpZWQgc3VjY2Vzc2Z1bGx5LicsICd3cG11ZGV2X3ZpZHMnKVxuICAgIH0pKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHNob3J0Y29kZSBvZiB0aGUgY3VycmVudCB2aWRlby5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdmFyIGdldFNob3J0Q29kZSA9IGZ1bmN0aW9uIGdldFNob3J0Q29kZSgpIHtcbiAgICBpZiAoaXNDdXN0b21WaWRlbykge1xuICAgICAgcmV0dXJuIFwiW3dwbXVkZXYtdmlkZW8gdmlkZW89XFxcIlwiLmNvbmNhdChpZCwgXCJcXFwiXVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiW3dwbXVkZXYtdmlkZW8gdmlkZW89XFxcIlwiLmNvbmNhdCh2aWRlb19zbHVnLCBcIlxcXCJdXCIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogT3BlbiB0aGUgYWNjb3JkaW9uIGFuZCBjaGFuZ2VzIHJvdXRlXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqXG4gICAqL1xuICB2YXIgb3BlbkFjY29yZGlvbiA9IGZ1bmN0aW9uIG9wZW5BY2NvcmRpb24oKSB7XG4gICAgLy8gQ2hhbmdlIFJvdXRlXG4gICAgbmF2aWdhdGUoXCIvdmlldy9cIi5jb25jYXQoaWQpKTtcblxuICAgIC8vIHNldCBvcGVuZWQgaWRcbiAgICBzZXRPcGVuZWRJZChpZCk7XG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeHMoXCJkaXZcIiwge1xuICAgIHJvbGU6IFwiaGVhZGluZ1wiLFxuICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb24tLWhlYWRpbmcgd3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLS1yb3dcIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLS1jb2wtbGFyZ2VcIixcbiAgICAgIGNoaWxkcmVuOiBbIWlzT3BlbmVkICYmIC8qI19fUFVSRV9fKi9fanN4cyhcImJ1dHRvblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb24tLXRpdGxlXCIsXG4gICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiBmYWxzZSxcbiAgICAgICAgaWQ6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLWl0ZW0tXCIuY29uY2F0KGlkLCBcIi0tbGFiZWxcIiksXG4gICAgICAgIFwiYXJpYS1jb250cm9sc1wiOiBcIndwbXVkZXYtdmlkZW9zLWFjY29yZGlvbi1pdGVtLVwiLmNvbmNhdChpZCksXG4gICAgICAgIG9uQ2xpY2s6IG9wZW5BY2NvcmRpb24sXG4gICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChMaXN0VGh1bWIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwidmlkZW8tdGh1bWJcIixcbiAgICAgICAgICBpY29uOiB2aWRlb19zbHVnLFxuICAgICAgICAgIHVybDogdGh1bWJuYWlsID09PSBudWxsIHx8IHRodW1ibmFpbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGh1bWJuYWlsLnVybCxcbiAgICAgICAgICBpc0N1c3RvbTogaXNDdXN0b21WaWRlb1xuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goSWNvbiwge1xuICAgICAgICAgIGljb246IFwicGxheVwiLFxuICAgICAgICAgIHNpemU6IFwic21cIixcbiAgICAgICAgICBjbGFzc05hbWU6IFwidmlkZW8taWNvblwiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJ2aWRlby1uYW1lXCIsXG4gICAgICAgICAgY2hpbGRyZW46IHZpZGVvX3RpdGxlXG4gICAgICAgIH0pXVxuICAgICAgfSksIGlzT3BlbmVkICYmIC8qI19fUFVSRV9fKi9fanN4cyhfRnJhZ21lbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJ2aWRlby1uYW1lXCIsXG4gICAgICAgICAgY2hpbGRyZW46IHZpZGVvX3RpdGxlXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJ2aWRlby1sZW5ndGhcIixcbiAgICAgICAgICBjaGlsZHJlbjogdmlkZW9fZHVyYXRpb25cbiAgICAgICAgfSldXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIndwbXVkZXYtdmlkZW9zLWFjY29yZGlvbi0tY29sLXNtYWxsXCIsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIndwbXVkZXYtdmlkZW9zLWFjY29yZGlvbi0tYWN0aW9uc1wiLFxuICAgICAgICBjaGlsZHJlbjogW2lzT3BlbmVkICYmIC8qI19fUFVSRV9fKi9fanN4cyhfRnJhZ21lbnQsIHtcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KEljb25CdXR0b24sIHtcbiAgICAgICAgICAgIGljb246IFwiYWRkLXBsYXlsaXN0XCIsXG4gICAgICAgICAgICBsYWJlbDogX18oJ0FkZCB0byBQbGF5bGlzdCcsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICAgIG91dGxpbmVkOiB0cnVlLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLFxuICAgICAgICAgICAgdG9vbHRpcDogX18oJ0FkZCB0byBQbGF5bGlzdCcsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHZpZGVvIHN0YXRlXG4gICAgICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlbyk7XG5cbiAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgcGxheWxpc3RzIG1vZGFsXG4gICAgICAgICAgICAgIG9wZW5QbGF5bGlzdHNNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICAgICAgICBpY29uOiBcImNvZGVcIixcbiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJpdnQtY29weS1zaG9ydGNvZGVcIixcbiAgICAgICAgICAgIG9uQ2xpY2s6IGRpc3BsYXlDb3B5Tm90aWNlLFxuICAgICAgICAgICAgbGFiZWw6IF9fKCdDb3B5IFNob3J0Y29kZScsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICAgIHRvb2x0aXA6IF9fKCdDb3B5IFNob3J0Y29kZScsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICAgIFwiZGF0YS1jbGlwYm9hcmQtdGV4dFwiOiBnZXRTaG9ydENvZGUoKVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICAgICAgICBpY29uOiBcInBlbmNpbFwiLFxuICAgICAgICAgICAgbGFiZWw6IGlzQ3VzdG9tVmlkZW8gPyBfXygnRWRpdCB2aWRlbycsICd3cG11ZGV2X3ZpZHMnKSA6IF9fKCdFZGl0IHRpdGxlJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgICAgICAgb3V0bGluZWQ6IHRydWUsXG4gICAgICAgICAgICB0b29sdGlwOiBpc0N1c3RvbVZpZGVvID8gX18oJ0VkaXQgdmlkZW8nLCAnd3BtdWRldl92aWRzJykgOiBfXygnRWRpdCB0aXRsZScsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHZpZGVvIHN0YXRlXG4gICAgICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlbyk7XG5cbiAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgRWRpdCBtb2RhbFxuICAgICAgICAgICAgICBpZiAoaXNDdXN0b21WaWRlbykge1xuICAgICAgICAgICAgICAgIG9wZW5FZGl0TW9kYWwoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcGVuVGl0bGVNb2RhbCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCAhaXNPcGVuZWQgJiYgLyojX19QVVJFX18qL19qc3hzKF9GcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktZGVzY3JpcHRpb25cIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiB2aWRlb19kdXJhdGlvbiB8fCBfXygnVW5rbm93bicsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICAgICAgICBpY29uOiBcImFkZC1wbGF5bGlzdFwiLFxuICAgICAgICAgICAgbGFiZWw6IF9fKCdBZGQgdG8gUGxheWxpc3QnLCAnd3BtdWRldl92aWRzJyksXG4gICAgICAgICAgICBvdXRsaW5lZDogdHJ1ZSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgIHRvb2x0aXA6IF9fKCdBZGQgdG8gUGxheWxpc3QnLCAnd3BtdWRldl92aWRzJyksXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCB2aWRlbyBzdGF0ZVxuICAgICAgICAgICAgICBzZXRDdXJyZW50VmlkZW8odmlkZW8pO1xuXG4gICAgICAgICAgICAgIC8vIE9wZW4gdGhlIHBsYXlsaXN0cyBtb2RhbFxuICAgICAgICAgICAgICBvcGVuUGxheWxpc3RzTW9kYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktZHJvcGRvd25cIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWRyb3Bkb3duLWFuY2hvclwiLFxuICAgICAgICAgICAgICBpY29uOiBcIndpZGdldC1zZXR0aW5ncy1jb25maWdcIixcbiAgICAgICAgICAgICAgb3V0bGluZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBsYWJlbDogX18oJ1ZpZGVvIGFjdGlvbnMnLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeHMoXCJ1bFwiLCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbaXNDdXN0b21WaWRlbyAmJiAvKiNfX1BVUkVfXyovX2pzeChcImxpXCIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHZpZGVvIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlbyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgRWRpdCBtb2RhbFxuICAgICAgICAgICAgICAgICAgICBvcGVuRWRpdE1vZGFsKCk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWljb24tcGVuY2lsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIH0pLCBfXygnRWRpdCB2aWRlbycsICd3cG11ZGV2X3ZpZHMnKV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgIWlzQ3VzdG9tVmlkZW8gJiYgLyojX19QVVJFX18qL19qc3goXCJsaVwiLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCB2aWRlbyBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlkZW8odmlkZW8pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE9wZW4gdGhlIHRpdGxlIG1vZGFsXG4gICAgICAgICAgICAgICAgICAgIG9wZW5UaXRsZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWljb24tcGVuY2lsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIH0pLCBfXygnRWRpdCB0aXRsZScsICd3cG11ZGV2X3ZpZHMnKV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJsaVwiLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiaXZ0LWNvcHktc2hvcnRjb2RlXCIsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiBkaXNwbGF5Q29weU5vdGljZSxcbiAgICAgICAgICAgICAgICAgIFwiZGF0YS1jbGlwYm9hcmQtdGV4dFwiOiBnZXRTaG9ydENvZGUoKSxcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1pY29uLWNvZGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxuICAgICAgICAgICAgICAgICAgfSksIF9fKCdDb3B5IFNob3J0Y29kZScsICd3cG11ZGV2X3ZpZHMnKV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgaXNDdXN0b21WaWRlbyAmJiAvKiNfX1BVUkVfXyovX2pzeChcImxpXCIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1yZWRcIixcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHZpZGVvIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlbyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbiB0aGUgZGVsZXRlIG1vZGFsXG4gICAgICAgICAgICAgICAgICAgIG9wZW5EZWxldGVNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1pY29uLXRyYXNoXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIH0pLCBfXygnRGVsZXRlJywgJ3dwbXVkZXZfdmlkcycpXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5WaWRlb1Jvd0hlYWRlci5wcm9wVHlwZXMgPSB7XG4gIHZpZGVvOiBQcm9wVHlwZXMub2JqZWN0LFxuICBzZXRPcGVuZWRJZDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9wZW5lZElkOiBQcm9wVHlwZXMubnVtYmVyLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5leHBvcnQgZGVmYXVsdCBWaWRlb1Jvd0hlYWRlcjsiLCIvKipcbiAqIExpYnJhcnkgZGVwZW5kZW5jaWVzXG4gKi9cblxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgVmlkZW9JZnJhbWUgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzJztcbmltcG9ydCB7IGZldGNoRW1iZWQsIGdldEVtYmVkIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3RvcmUvc2xpY2VzL3ZpZGVvcyc7XG5cbi8qKlxuICogRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyB1c2VOYXZpZ2F0ZSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb1Jvd0JvZHkoX3JlZikge1xuICB2YXIgdmlkZW8gPSBfcmVmLnZpZGVvLFxuICAgIHNldE9wZW5lZElkID0gX3JlZi5zZXRPcGVuZWRJZCxcbiAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQ7XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjIuaWQsXG4gICAgdmlkZW9fdHlwZSA9IF9yZWYyLnZpZGVvX3R5cGU7XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIHZhciBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7XG4gIHZhciBlbWJlZCA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBnZXRFbWJlZChzdGF0ZSwgaWQpO1xuICB9KTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBJZiBlbWJlZCBpcyBub3QgYXZhaWxhYmxlIGluIHN0b3JlXG4gICAgaWYgKCFlbWJlZCkge1xuICAgICAgZGlzcGF0Y2goZmV0Y2hFbWJlZCh7XG4gICAgICAgIGlkOiBpZFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBDbG9zZSBhY2NvcmRpb24gYW5kIGNoYW5nZSByb3V0ZVxuICAgKlxuICAgKiBAcmV0dXJuIHtudWxsfVxuICAgKi9cbiAgdmFyIGNsb3NlQWNjb3JkaW9uID0gZnVuY3Rpb24gY2xvc2VBY2NvcmRpb24oKSB7XG4gICAgLy8gc2V0IG9wZW5lZCBpZFxuICAgIHNldE9wZW5lZElkKG51bGwpO1xuXG4gICAgLy8gQ2hhbmdlIHJvdXRlXG4gICAgbmF2aWdhdGUoJy8nKTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgcm9sZTogXCJyZWdpb25cIixcbiAgICBjbGFzc05hbWU6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLS1yZWdpb25cIixcbiAgICBpZDogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb24taXRlbS1cIi5jb25jYXQoaWQpLFxuICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLWl0ZW0tXCIuY29uY2F0KGlkLCBcIi0tbGFiZWxcIiksXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICBpY29uOiBcImNsb3NlXCIsXG4gICAgICBvdXRsaW5lZDogZmFsc2UsXG4gICAgICBjbGFzc05hbWU6IFwid3BtdWRldi12aWRlb3Mtc2hvd19kZXNrdG9wXCIsXG4gICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICBvbkNsaWNrOiBjbG9zZUFjY29yZGlvbixcbiAgICAgIGxhYmVsOiBfXygnQ2xvc2UgdGhpcyByZWdpb24nLCAnd3BtdWRldl92aWRzJyksXG4gICAgICB0b29sdGlwOiBfXygnQ2xvc2UgdmlkZW8nLCAnd3BtdWRldl92aWRzJylcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgaWNvbjogXCJjbG9zZVwiLFxuICAgICAgY2xhc3NOYW1lOiBcIndwbXVkZXYtdmlkZW9zLXNob3dfbW9iaWxlXCIsXG4gICAgICBvbkNsaWNrOiBjbG9zZUFjY29yZGlvbixcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIGxhYmVsOiBfXygnQ2xvc2UgdGhpcyByZWdpb24nLCAnd3BtdWRldl92aWRzJyksXG4gICAgICB0b29sdGlwOiBfXygnQ2xvc2UgdmlkZW8nLCAnd3BtdWRldl92aWRzJylcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goVmlkZW9JZnJhbWUsIHtcbiAgICAgIGVtYmVkOiBlbWJlZCA9PT0gbnVsbCB8fCBlbWJlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZW1iZWQuaHRtbCxcbiAgICAgIHR5cGU6IHZpZGVvX3R5cGVcbiAgICB9KV1cbiAgfSk7XG59XG5WaWRlb1Jvd0JvZHkucHJvcFR5cGVzID0ge1xuICB2aWRlbzogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2V0T3BlbmVkSWQ6IFByb3BUeXBlcy5mdW5jLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5leHBvcnQgZGVmYXVsdCBWaWRlb1Jvd0JvZHk7IiwiLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgZ2V0VmlkZW9zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3RvcmUvc2xpY2VzL3ZpZGVvcyc7XG5pbXBvcnQgeyBWaWRlb1Jvd0hlYWRlciB9IGZyb20gJy4vVmlkZW9Sb3dIZWFkZXInO1xuaW1wb3J0IHsgVmlkZW9Sb3dCb2R5IH0gZnJvbSAnLi9WaWRlb1Jvd0JvZHknO1xuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IF9fIH0gZnJvbSAnQHdvcmRwcmVzcy9pMThuJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb1JvdyhfcmVmKSB7XG4gIHZhciB2aWRlbyA9IF9yZWYudmlkZW8sXG4gICAgb3BlbmVkSWQgPSBfcmVmLm9wZW5lZElkLFxuICAgIHNldE9wZW5lZElkID0gX3JlZi5zZXRPcGVuZWRJZCxcbiAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgb3BlbkVkaXRNb2RhbCA9IF9yZWYub3BlbkVkaXRNb2RhbCxcbiAgICBzZXRDdXJyZW50VmlkZW8gPSBfcmVmLnNldEN1cnJlbnRWaWRlbyxcbiAgICBvcGVuRGVsZXRlTW9kYWwgPSBfcmVmLm9wZW5EZWxldGVNb2RhbCxcbiAgICBvcGVuVGl0bGVNb2RhbCA9IF9yZWYub3BlblRpdGxlTW9kYWwsXG4gICAgb3BlblBsYXlsaXN0c01vZGFsID0gX3JlZi5vcGVuUGxheWxpc3RzTW9kYWw7XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjIuaWQ7XG4gIHZhciBjbGFzc2VzID0gY2xhc3NuYW1lcyh7XG4gICAgJ3dwbXVkZXYtdmlkZW9zLWFjY29yZGlvbi0tZ3JvdXAnOiB0cnVlLFxuICAgICd3cG11ZGV2LXZpZGVvcy1hY3RpdmUnOiBvcGVuZWRJZCA9PT0gaWQsXG4gICAgJ3dwbXVkZXYtdmlkZW9zLWRpc2FibGVkJzogZGlzYWJsZWRcbiAgfSk7XG4gIHZhciBpc09wZW5lZCA9IGlkID09PSBvcGVuZWRJZDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc2VzLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goVmlkZW9Sb3dIZWFkZXIsIHtcbiAgICAgIG9wZW5lZElkOiBvcGVuZWRJZCxcbiAgICAgIHNldE9wZW5lZElkOiBzZXRPcGVuZWRJZCxcbiAgICAgIHZpZGVvOiB2aWRlbyxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgIG9wZW5FZGl0TW9kYWw6IG9wZW5FZGl0TW9kYWwsXG4gICAgICBzZXRDdXJyZW50VmlkZW86IHNldEN1cnJlbnRWaWRlbyxcbiAgICAgIG9wZW5EZWxldGVNb2RhbDogb3BlbkRlbGV0ZU1vZGFsLFxuICAgICAgb3BlblRpdGxlTW9kYWw6IG9wZW5UaXRsZU1vZGFsLFxuICAgICAgb3BlblBsYXlsaXN0c01vZGFsOiBvcGVuUGxheWxpc3RzTW9kYWxcbiAgICB9KSwgaXNPcGVuZWQgJiYgLyojX19QVVJFX18qL19qc3goVmlkZW9Sb3dCb2R5LCB7XG4gICAgICBzZXRPcGVuZWRJZDogc2V0T3BlbmVkSWQsXG4gICAgICBvcGVuZWRJZDogb3BlbmVkSWQsXG4gICAgICB2aWRlbzogdmlkZW8sXG4gICAgICBkaXNhYmxlZDogZGlzYWJsZWRcbiAgICB9KV1cbiAgfSk7XG59XG5WaWRlb1Jvdy5wcm9wVHlwZXMgPSB7XG4gIHZpZGVvOiBQcm9wVHlwZXMub2JqZWN0LFxuICBvcGVuZWRJZDogUHJvcFR5cGVzLm51bWJlcixcbiAgc2V0T3BlbmVkSWQ6IFByb3BUeXBlcy5mdW5jXG59O1xuZXhwb3J0IGRlZmF1bHQgVmlkZW9Sb3c7IiwiZXhwb3J0ICogZnJvbSAnLi9WaWRlb1Jvdyc7IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxudmFyIF93aW5kb3ckaXZ0TW9kdWxlVmFycztcbmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIF9yZWYgPSAoX3dpbmRvdyRpdnRNb2R1bGVWYXJzID0gd2luZG93Lml2dE1vZHVsZVZhcnMpICE9PSBudWxsICYmIF93aW5kb3ckaXZ0TW9kdWxlVmFycyAhPT0gdm9pZCAwID8gX3dpbmRvdyRpdnRNb2R1bGVWYXJzIDoge30sXG4gIGhvc3RzID0gX3JlZi5ob3N0cztcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb0hvc3RzTGlzdChfcmVmMikge1xuICB2YXIgbW9kYWxJRCA9IF9yZWYyLm1vZGFsSUQsXG4gICAgdmlkZW8gPSBfcmVmMi52aWRlbyxcbiAgICBzZXRWaWRlbyA9IF9yZWYyLnNldFZpZGVvO1xuICB2YXIgY2xhc3NlcyA9IGNsYXNzbmFtZXMoJ3N1aS1ib3gtc2VsZWN0b3JzJywgJ3N1aS1ib3gtc2VsZWN0b3JzLWNvbC0yJyk7XG4gIHZhciBfcmVmMyA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGhvc3QgPSBfcmVmMy5ob3N0O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgaG9zdCBrZXkgaW4gdGhlIHZpZGVvIG9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIHNldEhvc3QgPSBmdW5jdGlvbiBzZXRIb3N0KGV2ZW50KSB7XG4gICAgc2V0VmlkZW8oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWRlbyksIHt9LCB7XG4gICAgICBob3N0OiBldmVudC50YXJnZXQudmFsdWVcbiAgICB9KSk7XG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc2VzLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChcInVsXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBPYmplY3Qua2V5cyhob3N0cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4KFwibGlcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeHMoXCJsYWJlbFwiLCB7XG4gICAgICAgICAgICBodG1sRm9yOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi12aWRlby1ob3N0LVwiKS5jb25jYXQoa2V5KSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktYm94LXNlbGVjdG9yXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICB0eXBlOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi12aWRlby1ob3N0LVwiKS5jb25jYXQoa2V5KSxcbiAgICAgICAgICAgICAgbmFtZTogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdmlkZW8taG9zdC1cIikuY29uY2F0KGtleSksXG4gICAgICAgICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgICAgICAgIGNoZWNrZWQ6IGtleSA9PT0gaG9zdCxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHNldEhvc3RcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeHMoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtob3N0c1trZXldLmljb24gJiYgLyojX19QVVJFX18qL19qc3goXCJpXCIsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGhvc3RzW2tleV0uaWNvbixcbiAgICAgICAgICAgICAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXG4gICAgICAgICAgICAgIH0pLCBob3N0c1trZXldLm5hbWVdXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9LCBrZXkpO1xuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZGVvSG9zdHNMaXN0OyIsImV4cG9ydCAqIGZyb20gJy4vVmlkZW9Ib3N0c0xpc3QnOyIsIi8qKlxuICogTGlicmFyeSBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgTGFiZWwsIElucHV0LCBCdXR0b24gfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvY29tcG9uZW50cyc7XG5cbi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IHJlc3RHZXQgfSBmcm9tICcuLi8uLi8uLi8uLi9oZWxwZXJzL2FwaSc7XG5cbi8qKlxuICogRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IF9fIH0gZnJvbSAnQHdvcmRwcmVzcy9pMThuJztcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIFZpZGVvVXJsRmllbGQoX3JlZikge1xuICB2YXIgbW9kYWxJRCA9IF9yZWYubW9kYWxJRCxcbiAgICB1cmwgPSBfcmVmLnVybCxcbiAgICB1cmxSZWFkeSA9IF9yZWYudXJsUmVhZHksXG4gICAgc2V0VmlkZW9VcmwgPSBfcmVmLnNldFZpZGVvVXJsLFxuICAgIHVwZGF0aW5nID0gX3JlZi51cGRhdGluZyxcbiAgICByZXNldCA9IF9yZWYucmVzZXQsXG4gICAgZ2V0VXJsRW1iZWQgPSBfcmVmLmdldFVybEVtYmVkO1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKF9GcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goTGFiZWwsIHtcbiAgICAgIGh0bWxGb3I6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXZpZGVvLXVybFwiKSxcbiAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi12aWRlby11cmwtbGFiZWxcIiksXG4gICAgICBjaGlsZHJlbjogX18oJ1ZpZGVvIFVSTCcsICd3cG11ZGV2X3ZpZHMnKVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeHMoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInN1aS13aXRoLWJ1dHRvbiBzdWktd2l0aC1idXR0b24taW5zaWRlXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KElucHV0LCB7XG4gICAgICAgIGRpc2FibGVkOiB1cmxSZWFkeSxcbiAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXZpZGVvLXVybFwiKSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCIsXG4gICAgICAgIHZhbHVlOiB1cmwsXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWwpIHtcbiAgICAgICAgICBpZiAoIXZhbCkge1xuICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VmlkZW9VcmwodmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLCB1cmxSZWFkeSAmJiAvKiNfX1BVUkVfXyovX2pzeChCdXR0b24sIHtcbiAgICAgICAgb25DbGljazogcmVzZXQsXG4gICAgICAgIGNoaWxkcmVuOiBfXygnQ2xlYXInLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pLCAhdXJsUmVhZHkgJiYgLyojX19QVVJFX18qL19qc3goQnV0dG9uLCB7XG4gICAgICAgIGRpc2FibGVkOiAhdXJsLFxuICAgICAgICBcImFyaWEtbGl2ZVwiOiBcInBvbGl0ZVwiLFxuICAgICAgICBpc0xvYWRpbmc6IHVwZGF0aW5nLFxuICAgICAgICBvbkNsaWNrOiBnZXRVcmxFbWJlZCxcbiAgICAgICAgb25Mb2FkaW5nVGV4dDogX18oJ0FkZGluZycsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgY2hpbGRyZW46IF9fKCdBZGQgVmlkZW8nLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZGVvVXJsRmllbGQ7IiwiZXhwb3J0ICogZnJvbSAnLi9WaWRlb1VybEZpZWxkJzsiLCIvKipcbiAqIFRpbWUgUmVnZXggcmV0dXJucyB0cnVlL2ZhbHNlXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lUmVnZXgodmFsdWUpIHtcbiAgdmFyIHRpbWVSZWdleCA9IC9eKFswLTldezEsM30pKFs6fC5dKFswLTldezEsM30pKFs6fC5dKFswLTldezEsM30pKT8pPyQvZ207XG4gIHJldHVybiB0aW1lUmVnZXgudGVzdCh2YWx1ZSk7XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgciwgdCkgeyByZXR1cm4gKHIgPSBfdG9Qcm9wZXJ0eUtleShyKSkgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCB7IHZhbHVlOiB0LCBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwIH0pIDogZVtyXSA9IHQsIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7IH1cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG4vKipcbiAqIExpYnJhcnkgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IENoZWNrYm94LCBJbnB1dCB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyB0aW1lUmVnZXggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscyc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cywgRnJhZ21lbnQgYXMgX0ZyYWdtZW50IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5leHBvcnQgZnVuY3Rpb24gVGltZUZvcm0oX3JlZikge1xuICB2YXIgdmlkZW8gPSBfcmVmLnZpZGVvLFxuICAgIHNldFZpZGVvID0gX3JlZi5zZXRWaWRlbyxcbiAgICBtb2RhbElEID0gX3JlZi5tb2RhbElEO1xuICB2YXIgX3JlZjIgPSB2aWRlbyAhPT0gbnVsbCAmJiB2aWRlbyAhPT0gdm9pZCAwID8gdmlkZW8gOiB7fSxcbiAgICBzdGFydF9lbmFibGVkID0gX3JlZjIuc3RhcnRfZW5hYmxlZCxcbiAgICBlbmRfZW5hYmxlZCA9IF9yZWYyLmVuZF9lbmFibGVkLFxuICAgIGVuZF90aW1lID0gX3JlZjIuZW5kX3RpbWUsXG4gICAgc3RhcnRfdGltZSA9IF9yZWYyLnN0YXJ0X3RpbWU7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgc3RhcnRUaW1lRXJyb3IgPSBfdXNlU3RhdGUyWzBdLFxuICAgIHNldFN0YXJ0VGltZUVycm9yID0gX3VzZVN0YXRlMlsxXTtcbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgIGVuZFRpbWVFcnJvciA9IF91c2VTdGF0ZTRbMF0sXG4gICAgc2V0RW5kVGltZUVycm9yID0gX3VzZVN0YXRlNFsxXTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3RhcnRfZW5hYmxlZCkge1xuICAgICAgdmFsaWRhdGVUaW1lKHN0YXJ0X3RpbWUsIHNldFN0YXJ0VGltZUVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVuZF9lbmFibGVkKSB7XG4gICAgICB2YWxpZGF0ZVRpbWUoZW5kX3RpbWUsIHNldEVuZFRpbWVFcnJvcik7XG4gICAgfVxuICB9LCBbc3RhcnRfZW5hYmxlZCwgZW5kX2VuYWJsZWQsIHN0YXJ0X3RpbWUsIGVuZF90aW1lXSk7XG4gIHZhciB2YWxpZGF0ZVRpbWUgPSBmdW5jdGlvbiB2YWxpZGF0ZVRpbWUodGltZSwgc2V0RXJyb3IpIHtcbiAgICBpZiAodGltZSAmJiAhdGltZVJlZ2V4KHRpbWUpKSB7XG4gICAgICBzZXRFcnJvcih0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RXJyb3IoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgdmFyIHNldEVuYWJsZWQgPSBmdW5jdGlvbiBzZXRFbmFibGVkKF9yZWYzKSB7XG4gICAgdmFyIF9yZWYzJHR5cGUgPSBfcmVmMy50eXBlLFxuICAgICAgdHlwZSA9IF9yZWYzJHR5cGUgPT09IHZvaWQgMCA/ICdzdGFydCcgOiBfcmVmMyR0eXBlLFxuICAgICAgdmFsdWUgPSBfcmVmMy52YWx1ZTtcbiAgICB2YXIgZmluYWxWYWx1ZSA9IHZhbHVlID8gMSA6IDA7XG4gICAgc2V0VmlkZW8oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWRlbyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHR5cGUsIFwiX2VuYWJsZWRcIiksIGZpbmFsVmFsdWUpKSk7XG4gIH07XG4gIHZhciBzZXRUaW1lID0gZnVuY3Rpb24gc2V0VGltZShfcmVmNCkge1xuICAgIHZhciBfcmVmNCR0eXBlID0gX3JlZjQudHlwZSxcbiAgICAgIHR5cGUgPSBfcmVmNCR0eXBlID09PSB2b2lkIDAgPyAnc3RhcnQnIDogX3JlZjQkdHlwZSxcbiAgICAgIHZhbHVlID0gX3JlZjQudmFsdWU7XG4gICAgdmFsaWRhdGVUaW1lKHZhbHVlLCB0eXBlID09PSAnc3RhcnQnID8gc2V0U3RhcnRUaW1lRXJyb3IgOiBzZXRFbmRUaW1lRXJyb3IpO1xuICAgIHNldFZpZGVvKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmlkZW8pLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdCh0eXBlLCBcIl90aW1lXCIpLCB2YWx1ZSkpKTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhfRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnc3VpLWZvcm0tZmllbGQnLCB7XG4gICAgICAgICdzdWktZm9ybS1maWVsZC1lcnJvcic6IHN0YXJ0VGltZUVycm9yXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeHMoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1maWVsZC1wcmVmaXhcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChDaGVja2JveCwge1xuICAgICAgICAgIGNoZWNrZWQ6ICEhc3RhcnRfZW5hYmxlZCxcbiAgICAgICAgICBsYWJlbDogX18oJ1N0YXJ0IGF0OicsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdmlkZW8tc3RhcnRcIiksXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0RW5hYmxlZCh7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdGFydCcsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goSW5wdXQsIHtcbiAgICAgICAgICBpZDogXCJzdGFydC10aW1lXCIsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiMDA6MDBcIixcbiAgICAgICAgICB2YWx1ZTogc3RhcnRfdGltZSxcbiAgICAgICAgICBjaGVja2VkOiBlbmRfZW5hYmxlZCxcbiAgICAgICAgICBkaXNhYmxlZDogIXN0YXJ0X2VuYWJsZWQsXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdGFydCcsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ3N1aS1pbnB1dC1zbScsICdzdWktZmllbGQtaGFzLXByZWZpeCcpXG4gICAgICAgIH0pLCBzdGFydFRpbWVFcnJvciAmJiAvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgIGlkOiBcImVycm9yLXN0YXJ0LXRpbWVcIixcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWVycm9yLW1lc3NhZ2VcIixcbiAgICAgICAgICByb2xlOiBcImFsZXJ0XCIsXG4gICAgICAgICAgY2hpbGRyZW46IF9fKCdJbnZhbGlkIHRpbWUgZm9ybWF0LicsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSksIHR5cGVvZiB2aWRlby5ob3N0ICE9PSAndW5kZWZpbmVkJyAmJiB2aWRlby5ob3N0ID09PSAneW91dHViZScgJiYgLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdzdWktZm9ybS1maWVsZCcsIHtcbiAgICAgICAgJ3N1aS1mb3JtLWZpZWxkLWVycm9yJzogZW5kVGltZUVycm9yXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeHMoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1maWVsZC1wcmVmaXhcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChDaGVja2JveCwge1xuICAgICAgICAgIGxhYmVsOiBfXygnRW5kIGF0OicsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdmlkZW8tZW5kXCIpLFxuICAgICAgICAgIGNoZWNrZWQ6ICEhZW5kX2VuYWJsZWQsXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0RW5hYmxlZCh7XG4gICAgICAgICAgICAgIHR5cGU6ICdlbmQnLFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KElucHV0LCB7XG4gICAgICAgICAgaWQ6IFwiZW5kLXRpbWVcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogXCIwMDowMFwiLFxuICAgICAgICAgIHZhbHVlOiBlbmRfdGltZSxcbiAgICAgICAgICBkaXNhYmxlZDogIWVuZF9lbmFibGVkLFxuICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWUoe1xuICAgICAgICAgICAgICB0eXBlOiAnZW5kJyxcbiAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnc3VpLWlucHV0LXNtJywgJ3N1aS1maWVsZC1oYXMtcHJlZml4JylcbiAgICAgICAgfSksIGVuZFRpbWVFcnJvciAmJiAvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgIGlkOiBcImVycm9yLWVuZC10aW1lXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1lcnJvci1tZXNzYWdlXCIsXG4gICAgICAgICAgcm9sZTogXCJhbGVydFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBfXygnSW52YWxpZCB0aW1lIGZvcm1hdC4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFRpbWVGb3JtOyIsImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgVXBsb2FkVGh1bWIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzJztcbmltcG9ydCBUaW1lRm9ybSBmcm9tICcuL1RpbWVGb3JtJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb1NldHRpbmdzKF9yZWYpIHtcbiAgdmFyIHZpZGVvID0gX3JlZi52aWRlbyxcbiAgICBzZXRWaWRlbyA9IF9yZWYuc2V0VmlkZW8sXG4gICAgbW9kYWxJRCA9IF9yZWYubW9kYWxJRDtcbiAgdmFyIF9yZWYyID0gdmlkZW8gIT09IG51bGwgJiYgdmlkZW8gIT09IHZvaWQgMCA/IHZpZGVvIDoge30sXG4gICAgdGh1bWJuYWlsID0gX3JlZjIudGh1bWJuYWlsO1xuXG4gIC8qKlxuICAgKiBTZXQgVmlkZW8gVGh1bWJuaWFsXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgc2V0VmlkZW9UaHVtYm5haWwgPSBmdW5jdGlvbiBzZXRWaWRlb1RodW1ibmFpbCh2YWx1ZSkge1xuICAgIHNldFZpZGVvKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmlkZW8pLCB7fSwge1xuICAgICAgdGh1bWJuYWlsOiB2YWx1ZVxuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInN1aS1ib3gtYm9keVwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJzdWktc2V0dGluZ3MtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBfXygnU2V0dGluZ3MnLCAnd3BtdWRldl92aWRzJylcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJzdWktZGVzY3JpcHRpb25cIixcbiAgICAgIGNoaWxkcmVuOiBfXygnQ3VzdG9taXplIHRoZSBkdXJhdGlvbiBvZiB0aGUgdmlkZW8uJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFRpbWVGb3JtLCB7XG4gICAgICBtb2RhbElEOiBtb2RhbElELFxuICAgICAgdmlkZW86IHZpZGVvLFxuICAgICAgc2V0VmlkZW86IHNldFZpZGVvXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3VpLXNldHRpbmdzLWxhYmVsXCJcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJzdWktc2V0dGluZ3MtbGFiZWxcIixcbiAgICAgIGNoaWxkcmVuOiBfXygnVGh1bWJuYWlsIGltYWdlJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3VpLWRlc2NyaXB0aW9uXCIsXG4gICAgICBjaGlsZHJlbjogX18oJ0FkZCBhIGN1c3RvbSB0aHVtYm5haWwgdG8geW91ciB2aWRlby4nLCAnd3BtdWRldl92aWRzJylcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInN1aS1mb3JtLWZpZWxkXCIsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goVXBsb2FkVGh1bWIsIHtcbiAgICAgICAgdGh1bWJuYWlsOiBBcnJheS5pc0FycmF5KHRodW1ibmFpbCkgPyB7fSA6IHRodW1ibmFpbCxcbiAgICAgICAgb25TZWxlY3Q6IHNldFZpZGVvVGh1bWJuYWlsXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZGVvU2V0dGluZ3M7IiwiZXhwb3J0ICogZnJvbSAnLi9WaWRlb1NldHRpbmdzJztcbmV4cG9ydCAqIGZyb20gJy4vVGltZUZvcm0nOyIsImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkociwgZSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBlKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgZSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAobnVsbCAhPSB0KSB7IHZhciBlLCBuLCBpLCB1LCBhID0gW10sIGYgPSAhMCwgbyA9ICExOyB0cnkgeyBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7IGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjsgZiA9ICExOyB9IGVsc2UgZm9yICg7ICEoZiA9IChlID0gaS5jYWxsKHQpKS5kb25lKSAmJiAoYS5wdXNoKGUudmFsdWUpLCBhLmxlbmd0aCAhPT0gbCk7IGYgPSAhMCk7IH0gY2F0Y2ggKHIpIHsgbyA9ICEwLCBuID0gcjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFmICYmIG51bGwgIT0gdC5yZXR1cm4gJiYgKHUgPSB0LnJldHVybigpLCBPYmplY3QodSkgIT09IHUpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChvKSB0aHJvdyBuOyB9IH0gcmV0dXJuIGE7IH0gfVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiByOyB9XG4vKipcbiAqIExpYnJhcnkgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2NvbXBvbmVudHMnO1xuXG4vKipcbiAqIEludGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyByZXN0R2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vaGVscGVycy9hcGknO1xuaW1wb3J0IHsgVmlkZW9VcmxGaWVsZCwgVmlkZW9TZXR0aW5ncyB9IGZyb20gJy4uLyc7XG5pbXBvcnQgeyBWaWRlb0lmcmFtZSB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbXBvbmVudHMnO1xuXG4vKipcbiAqIEV4dGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzcHJpbnRmLCBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5cbi8vIEVtcHR5IHZpZGVvIGRhdGEgc3RydWN0dXJlXG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cywgRnJhZ21lbnQgYXMgX0ZyYWdtZW50IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgZW1wdHlWaWRlbyA9IHtcbiAgaG9zdDogJycsXG4gIHVybDogJycsXG4gIHRpdGxlOiAnJyxcbiAgc3RhcnRfZW5hYmxlZDogMCxcbiAgZW5kX2VuYWJsZWQ6IDAsXG4gIHN0YXJ0X3RpbWU6ICcnLFxuICBlbmRfdGltZTogJycsXG4gIHBsYXlsaXN0czogW10sXG4gIHRodW1ibmFpbDoge1xuICAgIGlkOiAwLFxuICAgIGZpbGU6ICcnLFxuICAgIHVybDogJydcbiAgfSxcbiAgZHVyYXRpb246ICcnLFxuICBlbWJlZDogJydcbn07XG5leHBvcnQgZnVuY3Rpb24gVmlkZW9Gb3JtKF9yZWYpIHtcbiAgdmFyIHZpZGVvID0gX3JlZi52aWRlbyxcbiAgICBzZXRWaWRlbyA9IF9yZWYuc2V0VmlkZW8sXG4gICAgc2V0U2hvd0Vycm9yID0gX3JlZi5zZXRTaG93RXJyb3IsXG4gICAgbW9kYWxJRCA9IF9yZWYubW9kYWxJRCxcbiAgICB1cmxSZWFkeSA9IF9yZWYudXJsUmVhZHksXG4gICAgc2V0VXJsUmVhZHkgPSBfcmVmLnNldFVybFJlYWR5O1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgIHVwZGF0aW5nID0gX3VzZVN0YXRlMlswXSxcbiAgICBzZXRVcGRhdGluZyA9IF91c2VTdGF0ZTJbMV07XG4gIHZhciBzZWxlY3RvcnNDbGFzc2VzID0gY2xhc3NuYW1lcygnc3VpLWJveC1zZWxlY3RvcnMnLCAnc3VpLWJveC1zZWxlY3RvcnMtY29sLTInKTtcbiAgdmFyIF9yZWYyID0gdmlkZW8gIT09IG51bGwgJiYgdmlkZW8gIT09IHZvaWQgMCA/IHZpZGVvIDoge30sXG4gICAgdGl0bGUgPSBfcmVmMi50aXRsZSxcbiAgICB1cmwgPSBfcmVmMi51cmwsXG4gICAgaG9zdCA9IF9yZWYyLmhvc3QsXG4gICAgdGh1bWJuYWlsID0gX3JlZjIudGh1bWJuYWlsLFxuICAgIHN0YXJ0X2VuYWJsZWQgPSBfcmVmMi5zdGFydF9lbmFibGVkLFxuICAgIGVuZF9lbmFibGVkID0gX3JlZjIuZW5kX2VuYWJsZWQsXG4gICAgc3RhcnRfdGltZSA9IF9yZWYyLnN0YXJ0X3RpbWUsXG4gICAgZW5kX3RpbWUgPSBfcmVmMi5lbmRfdGltZSxcbiAgICBlbWJlZCA9IF9yZWYyLmVtYmVkLFxuICAgIGlkID0gX3JlZjIuaWQsXG4gICAgZHVyYXRpb24gPSBfcmVmMi5kdXJhdGlvbjtcblxuICAvLyBHZXQgdXJsIGVtYmVkXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHVybFJlYWR5KSB7XG4gICAgICBnZXRVcmxFbWJlZCgpO1xuICAgIH1cbiAgfSwgW2lkXSk7XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB2aWRlbyBzdGF0ZSBidXQga2VlcCBuZWVkZWQgZGF0YVxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIF9yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHNldFZpZGVvKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZW1wdHlWaWRlbyksIHt9LCB7XG4gICAgICBob3N0OiB2aWRlby5ob3N0LFxuICAgICAgaWQ6IHZpZGVvLmlkLFxuICAgICAgcGxheWxpc3RzOiB2aWRlby5wYWx5bGlzdHNcbiAgICB9KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB1cmwgaW4gdGhlIHZpZGVvIHN0YXRlXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgc2V0VmlkZW9VcmwgPSBmdW5jdGlvbiBzZXRWaWRlb1VybCh2YWx1ZSkge1xuICAgIHNldFZpZGVvKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmlkZW8pLCB7fSwge1xuICAgICAgdXJsOiB2YWx1ZVxuICAgIH0pKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHZpZGVvIHRpdGxlXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgc2V0VmlkZW9UaXRsZSA9IGZ1bmN0aW9uIHNldFZpZGVvVGl0bGUodmFsdWUpIHtcbiAgICBzZXRWaWRlbyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZpZGVvKSwge30sIHtcbiAgICAgIHRpdGxlOiB2YWx1ZVxuICAgIH0pKTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2aWRlbyBkYXRhIHVzaW5nIGVtYmVkLlxuICAgKlxuICAgKiBPbmNlIHRoZSBlbWJlZCBpcyB1cGRhdGVkLCBzZXQgdGhhdFxuICAgKiB0byB2aWRlbyBvYmplY3QuXG4gICAqXG4gICAqL1xuICB2YXIgc2V0VmlkZW9FbWJlZCA9IGZ1bmN0aW9uIHNldFZpZGVvRW1iZWQoZGF0YSkge1xuICAgIHZhciBuZXdWaWRlbyA9IF9vYmplY3RTcHJlYWQoe30sIHZpZGVvKTtcblxuICAgIC8vIFNldCB0aGUgZW1iZWQuXG4gICAgbmV3VmlkZW8uZW1iZWQgPSBkYXRhLmh0bWw7XG5cbiAgICAvLyBVcGRhdGUgdGhlIHRpdGxlLlxuICAgIGlmIChkYXRhLnRpdGxlICYmIHZpZGVvLnRpdGxlID09PSAnJykge1xuICAgICAgbmV3VmlkZW8udGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZHVyYXRpb24uXG4gICAgaWYgKGRhdGEuZHVyYXRpb24pIHtcbiAgICAgIG5ld1ZpZGVvLmR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcbiAgICB9XG4gICAgc2V0VmlkZW8obmV3VmlkZW8pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGVtYmVkIHVzaW5nIHRoZSBVUkwuXG4gICAqXG4gICAqIFdlIG5lZWQgdG8gcGFzcyB0aGUgY3VzdG9tIHRodW1ibmFpbCBhbmRcbiAgICogc3RhcnQvZW5kIHRpbWUgc3RyaW5ncy5cbiAgICpcbiAgICovXG4gIHZhciBnZXRVcmxFbWJlZCA9IGZ1bmN0aW9uIGdldFVybEVtYmVkKCkge1xuICAgIGlmICh1cGRhdGluZyB8fCB1cmwgPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFVwZGF0aW5nKHRydWUpO1xuICAgIHJlc3RHZXQoe1xuICAgICAgcGF0aDogJ3ZpZGVvcy9lbWJlZCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGhvc3Q6IGhvc3QsXG4gICAgICAgIHdpZHRoOiAzMDAsXG4gICAgICAgIHRodW1ibmFpbDogKHRodW1ibmFpbCA9PT0gbnVsbCB8fCB0aHVtYm5haWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRodW1ibmFpbC5pZCkgfHwgMCxcbiAgICAgICAgc3RhcnRfZW5hYmxlZDogc3RhcnRfZW5hYmxlZCxcbiAgICAgICAgZW5kX2VuYWJsZWQ6IGVuZF9lbmFibGVkLFxuICAgICAgICBzdGFydF90aW1lOiBzdGFydF90aW1lLFxuICAgICAgICBlbmRfdGltZTogZW5kX3RpbWVcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGVtYmVkLlxuICAgICAgICBzZXRWaWRlb0VtYmVkKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBzZXRVcmxSZWFkeSh0cnVlKTtcbiAgICAgICAgc2V0U2hvd0Vycm9yKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgc2V0VXJsUmVhZHkoZmFsc2UpO1xuICAgICAgc2V0U2hvd0Vycm9yKHRydWUpO1xuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VXBkYXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaG91bGQgd2Ugc2hvdyB2aWRlbyBkdXJhdGlvbi5cbiAgICpcbiAgICogQHNpbmNlIDEuOC4wXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICB2YXIgc2hvd0R1cmF0aW9uID0gZnVuY3Rpb24gc2hvd0R1cmF0aW9uKCkge1xuICAgIHJldHVybiAhWycnLCAnMDAuMDAnLCAwLCAnMCddLmluY2x1ZGVzKGR1cmF0aW9uKTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhfRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IHNlbGVjdG9yc0NsYXNzZXMsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1mb3JtLWZpZWxkXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChWaWRlb1VybEZpZWxkLCB7XG4gICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgdXBkYXRpbmc6IHVwZGF0aW5nLFxuICAgICAgICAgIHVybFJlYWR5OiB1cmxSZWFkeSxcbiAgICAgICAgICBzZXRWaWRlb1VybDogc2V0VmlkZW9VcmwsXG4gICAgICAgICAgZ2V0VXJsRW1iZWQ6IGdldFVybEVtYmVkLFxuICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgIHNldFVybFJlYWR5KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgICAgICAgICBfcmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KSwgdXJsUmVhZHkgJiYgLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1yb3dcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1jb2wtbWQtNiBzdWktY29sLXNtLTEyXCIsXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KFZpZGVvSWZyYW1lLCB7XG4gICAgICAgICAgICBlbWJlZDogZW1iZWQsXG4gICAgICAgICAgICB0eXBlOiBcImN1c3RvbVwiXG4gICAgICAgICAgfSlcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWNvbC1tZC02IHN1aS1jb2wtc20tMTJcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktZm9ybS1maWVsZFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChJbnB1dCwge1xuICAgICAgICAgICAgICB2YWx1ZTogdGl0bGUsXG4gICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZXRWaWRlb1RpdGxlLFxuICAgICAgICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdmlkZW8tdGl0bGVcIilcbiAgICAgICAgICAgIH0pLCBzaG93RHVyYXRpb24oKSAmJiAvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBzcHJpbnRmKF9fKCdEdXJhdGlvbiAlcycsICd3cG11ZGV2X3ZpZHMnKSwgZHVyYXRpb24pXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLCB1cmxSZWFkeSAmJiAvKiNfX1BVUkVfXyovX2pzeChWaWRlb1NldHRpbmdzLCB7XG4gICAgICB2aWRlbzogdmlkZW8sXG4gICAgICBzZXRWaWRlbzogc2V0VmlkZW8sXG4gICAgICBtb2RhbElEOiBtb2RhbElEXG4gICAgfSldXG4gIH0pO1xufVxuVmlkZW9Gb3JtLmRlZmF1bHRQcm9wcyA9IHtcbiAgdmlkZW86IHt9LFxuICBzZXRTaG93RXJyb3I6IGZ1bmN0aW9uIHNldFNob3dFcnJvcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IFZpZGVvRm9ybTsiLCJleHBvcnQgKiBmcm9tICcuL1ZpZGVvRm9ybSc7IiwiZXhwb3J0ICogZnJvbSAnLi9WaWRlb1Jvdyc7XG5leHBvcnQgKiBmcm9tICcuL1ZpZGVvSG9zdHMnO1xuZXhwb3J0ICogZnJvbSAnLi9WaWRlb1VybEZpZWxkJztcbmV4cG9ydCAqIGZyb20gJy4vVmlkZW9TZXR0aW5ncyc7XG5leHBvcnQgKiBmcm9tICcuL1ZpZGVvRm9ybSc7IiwiLyoqXG4gKiBMaWJyYXJ5IGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBCb3gsIEljb24sIEJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgV2hpdGVMYWJlbEJhbm5lciB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgVmlkZW9Ib3N0c0xpc3QgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBWaWRlb0hvc3QoX3JlZikge1xuICB2YXIgbW9kYWxJRCA9IF9yZWYubW9kYWxJRCxcbiAgICBjbG9zZU1vZGFsID0gX3JlZi5jbG9zZU1vZGFsLFxuICAgIG5leHQgPSBfcmVmLm5leHQsXG4gICAgdmlkZW8gPSBfcmVmLnZpZGVvLFxuICAgIHNldFZpZGVvID0gX3JlZi5zZXRWaWRlbztcbiAgdmFyIGNsYXNzZXMgPSBjbGFzc25hbWVzKCdzdWktbW9kYWwtc2xpZGUnLCAnc3VpLWFjdGl2ZScsICdzdWktbG9hZGVkJyk7XG4gIHZhciBoZWFkZXJDbGFzc2VzID0gY2xhc3NuYW1lcygnc3VpLWZsYXR0ZW4gc3VpLWNvbnRlbnQtY2VudGVyJywgJ3N1aS1zcGFjaW5nLXRvcC0tNjAnLCAnc3VpLXNwYWNpbmctcmlnaHQtLTYwJywgJ3N1aS1zcGFjaW5nLWxlZnQtLTYwJyk7XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGhvc3QgPSBfcmVmMi5ob3N0O1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NlcyxcbiAgICBcImRhdGEtbW9kYWwtc2l6ZVwiOiBcImxnXCIsXG4gICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLWhvc3Qtc2VsZWN0b3JcIiksXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhCb3gsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3hzKEJveC5IZWFkZXIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBoZWFkZXJDbGFzc2VzLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFdoaXRlTGFiZWxCYW5uZXIsIHtcbiAgICAgICAgICBzcmM6IFwibW9kYWwvbW9kYWwtaGVhZGVyLXZpZGVvcy5wbmdcIixcbiAgICAgICAgICBhbHQ6IF9fKCdBZGQgQ3VzdG9tIFZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeHMoXCJidXR0b25cIiwge1xuICAgICAgICAgIG9uQ2xpY2s6IGNsb3NlTW9kYWwsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdzdWktYnV0dG9uLWljb24nLCAnc3VpLWJ1dHRvbi1mbG9hdC0tcmlnaHQnKSxcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KEljb24sIHtcbiAgICAgICAgICAgIGljb246IFwiY2xvc2VcIixcbiAgICAgICAgICAgIHNpemU6IFwibWRcIlxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1zY3JlZW4tcmVhZGVyLXRleHRcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBfXygnQ2xvc2UgdGhpcyBkaWFsb2cuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcImgzXCIsIHtcbiAgICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdGl0bGVcIiksXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1ib3gtdGl0bGUgc3VpLWxnXCIsXG4gICAgICAgICAgY2hpbGRyZW46IF9fKCdBZGQgQ3VzdG9tIFZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1kZXNjXCIpLFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktZGVzY3JpcHRpb25cIixcbiAgICAgICAgICBjaGlsZHJlbjogX18oXCJMaW5rIHRvIGN1c3RvbSB2aWRlb3MgeW91J3ZlIGZvdW5kLCBvciB1cGxvYWRlZCBvbiBhbm90aGVyIHZpZGVvIGhvc3QuIENob29zZSBmcm9tIHRoZSBhdmFpbGFibGUgaG9zdHMgYmVsb3cuXCIsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICB9KV1cbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChWaWRlb0hvc3RzTGlzdCwge1xuICAgICAgICB2aWRlbzogdmlkZW8sXG4gICAgICAgIHNldFZpZGVvOiBzZXRWaWRlbyxcbiAgICAgICAgbW9kYWxJRDogbW9kYWxJRFxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5Gb290ZXIsIHtcbiAgICAgICAgaXNGbHVzaGVkOiB0cnVlLFxuICAgICAgICBpc0NlbnRlcmVkOiB0cnVlLFxuICAgICAgICBpc0ZsYXR0ZW46IHRydWUsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChCdXR0b24sIHtcbiAgICAgICAgICBkaXNhYmxlZDogIWhvc3QsXG4gICAgICAgICAgXCJkYXRhLW1vZGFsLXNsaWRlXCI6IG5leHQsXG4gICAgICAgICAgXCJkYXRhLW1vZGFsLXNsaWRlLWludHJvXCI6IFwibmV4dFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBfXygnQ29udGludWUnLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuVmlkZW9Ib3N0LnByb3BUeXBlcyA9IHtcbiAgbW9kYWxJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgY2xvc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMsXG4gIG5leHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHZpZGVvOiBQcm9wVHlwZXMub2JqZWN0XG59OyIsImZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KHIsIGUpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQociwgZSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGUpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHsgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTsgaWYgKG51bGwgIT0gdCkgeyB2YXIgZSwgbiwgaSwgdSwgYSA9IFtdLCBmID0gITAsIG8gPSAhMTsgdHJ5IHsgaWYgKGkgPSAodCA9IHQuY2FsbChyKSkubmV4dCwgMCA9PT0gbCkgeyBpZiAoT2JqZWN0KHQpICE9PSB0KSByZXR1cm47IGYgPSAhMTsgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApOyB9IGNhdGNoIChyKSB7IG8gPSAhMCwgbiA9IHI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuOyB9IGZpbmFsbHkgeyBpZiAobykgdGhyb3cgbjsgfSB9IHJldHVybiBhOyB9IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhyKSB7IGlmIChBcnJheS5pc0FycmF5KHIpKSByZXR1cm4gcjsgfVxuLyoqXG4gKiBMaWJyYXJ5IGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBCb3gsIEljb24sIFN0YXRpY05vdGljZSwgQnV0dG9uLCBJY29uQnV0dG9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2NvbXBvbmVudHMnO1xuXG4vKipcbiAqIEludGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBXaGl0ZUxhYmVsQmFubmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tcG9uZW50cyc7XG5pbXBvcnQgeyBWaWRlb0Zvcm0gfSBmcm9tICcuLi8uLi9jb21wb25lbnRzLyc7XG5cbi8qKlxuICogRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IF9fIH0gZnJvbSAnQHdvcmRwcmVzcy9pMThuJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0aW1lUmVnZXggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscyc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIFZpZGVvVXJsKF9yZWYpIHtcbiAgdmFyIG1vZGFsSUQgPSBfcmVmLm1vZGFsSUQsXG4gICAgY2xvc2VNb2RhbCA9IF9yZWYuY2xvc2VNb2RhbCxcbiAgICB2aWRlbyA9IF9yZWYudmlkZW8sXG4gICAgc2V0VmlkZW8gPSBfcmVmLnNldFZpZGVvLFxuICAgIHByZXYgPSBfcmVmLnByZXYsXG4gICAgbmV4dCA9IF9yZWYubmV4dCxcbiAgICB1cmxSZWFkeSA9IF9yZWYudXJsUmVhZHksXG4gICAgc2V0VXJsUmVhZHkgPSBfcmVmLnNldFVybFJlYWR5O1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgIHNob3dFcnJvciA9IF91c2VTdGF0ZTJbMF0sXG4gICAgc2V0U2hvd0Vycm9yID0gX3VzZVN0YXRlMlsxXTtcbiAgdmFyIGhlYWRlckNsYXNzZXMgPSBjbGFzc25hbWVzKCdzdWktZmxhdHRlbiBzdWktY29udGVudC1jZW50ZXInLCAnc3VpLXNwYWNpbmctdG9wLS02MCcsICdzdWktc3BhY2luZy1yaWdodC0tNjAnLCAnc3VpLXNwYWNpbmctbGVmdC0tNjAnKTtcbiAgdmFyIHRpbWVSZWFkeSA9IHZpZGVvLnN0YXJ0X2VuYWJsZWQgJiYgIXRpbWVSZWdleCh2aWRlby5zdGFydF90aW1lKSB8fCB2aWRlby5lbmRfZW5hYmxlZCAmJiAhdGltZVJlZ2V4KHZpZGVvLmVuZF90aW1lKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdXJsLWZvcm1cIiksXG4gICAgY2xhc3NOYW1lOiBcInN1aS1tb2RhbC1zbGlkZVwiLFxuICAgIFwiZGF0YS1tb2RhbC1zaXplXCI6IFwibGdcIixcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKEJveCwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeHMoQm94LkhlYWRlciwge1xuICAgICAgICBjbGFzc05hbWU6IGhlYWRlckNsYXNzZXMsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goV2hpdGVMYWJlbEJhbm5lciwge1xuICAgICAgICAgIHNyYzogXCJtb2RhbC9tb2RhbC1oZWFkZXItdmlkZW9zLnBuZ1wiLFxuICAgICAgICAgIGFsdDogX18oJ0FkZCBDdXN0b20gVmlkZW8nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEljb25CdXR0b24sIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWJ1dHRvbi1mbG9hdC0tcmlnaHRcIixcbiAgICAgICAgICBpY29uOiBcImNsb3NlXCIsXG4gICAgICAgICAgb25DbGljazogY2xvc2VNb2RhbCxcbiAgICAgICAgICBzaXplOiBcIm1kXCIsXG4gICAgICAgICAgb3V0bGluZWQ6IGZhbHNlLFxuICAgICAgICAgIGxhYmVsOiBfXygnQ2xvc2UgdGhpcyBkaWFsb2cuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1idXR0b24tZmxvYXQtLWxlZnRcIixcbiAgICAgICAgICBpY29uOiBcImNoZXZyb24tbGVmdFwiLFxuICAgICAgICAgIFwiZGF0YS1tb2RhbC1zbGlkZVwiOiBwcmV2LFxuICAgICAgICAgIFwiZGF0YS1tb2RhbC1zbGlkZS1pbnRyb1wiOiBcImJhY2tcIixcbiAgICAgICAgICBzaXplOiBcIm1kXCIsXG4gICAgICAgICAgb3V0bGluZWQ6IGZhbHNlLFxuICAgICAgICAgIGxhYmVsOiBfXygnR28gYmFjayB0byBwcmV2aW91cyBzbGlkZS4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwiaDNcIiwge1xuICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi10aXRsZVwiKSxcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWJveC10aXRsZSBzdWktbGdcIixcbiAgICAgICAgICBjaGlsZHJlbjogX18oJ0FkZCBDdXN0b20gVmlkZW8nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLWRlc2NcIiksXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1kZXNjcmlwdGlvblwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBfXygnQ29weSBhbmQgcGFzdGUgdGhlIHZpZGVvIFVSTCBmcm9tIHlvdXIgYnJvd3NlciBpbnRvIHRoZSBpbnB1dCBmaWVsZCBiZWxvdy4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSksIHNob3dFcnJvciAmJiAvKiNfX1BVUkVfXyovX2pzeChTdGF0aWNOb3RpY2UsIHtcbiAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWNvbnRlbnQtbGVmdFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IF9fKCdUaGUgVVJMIHlvdSBoYXZlIGF0dGFjaGVkIGlzIGludmFsaWQuIFRyeSBhZ2FpbiBieSBjb3B5aW5nIHRoZSBVUkwgZnJvbSB5b3VyIGJyb3dzZXIgYW5kIHBhc3RpbmcgaXQgaW50byB0aGUgaW5wdXQgZmllbGQgYmVsb3cuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KSwgLyojX19QVVJFX18qL19qc3goVmlkZW9Gb3JtLCB7XG4gICAgICAgIHZpZGVvOiB2aWRlbyxcbiAgICAgICAgc2V0VmlkZW86IHNldFZpZGVvLFxuICAgICAgICBtb2RhbElEOiBtb2RhbElELFxuICAgICAgICB1cmxSZWFkeTogdXJsUmVhZHksXG4gICAgICAgIHNldFVybFJlYWR5OiBzZXRVcmxSZWFkeSxcbiAgICAgICAgc2V0U2hvd0Vycm9yOiBzZXRTaG93RXJyb3JcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCb3guRm9vdGVyLCB7XG4gICAgICAgIGlzQ2VudGVyZWQ6IHRydWUsXG4gICAgICAgIGlzRmxhdHRlbjogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICAgIFwiZGF0YS1tb2RhbC1zbGlkZS1pbnRyb1wiOiBcIm5leHRcIixcbiAgICAgICAgICBcImRhdGEtbW9kYWwtc2xpZGVcIjogbmV4dCxcbiAgICAgICAgICBkaXNhYmxlZDogIXVybFJlYWR5IHx8IHRpbWVSZWFkeSxcbiAgICAgICAgICBjaGlsZHJlbjogX18oJ0NvbnRpbnVlJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZGVvVXJsOyIsImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkociwgZSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBlKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgZSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAobnVsbCAhPSB0KSB7IHZhciBlLCBuLCBpLCB1LCBhID0gW10sIGYgPSAhMCwgbyA9ICExOyB0cnkgeyBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7IGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjsgZiA9ICExOyB9IGVsc2UgZm9yICg7ICEoZiA9IChlID0gaS5jYWxsKHQpKS5kb25lKSAmJiAoYS5wdXNoKGUudmFsdWUpLCBhLmxlbmd0aCAhPT0gbCk7IGYgPSAhMCk7IH0gY2F0Y2ggKHIpIHsgbyA9ICEwLCBuID0gcjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFmICYmIG51bGwgIT0gdC5yZXR1cm4gJiYgKHUgPSB0LnJldHVybigpLCBPYmplY3QodSkgIT09IHUpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChvKSB0aHJvdyBuOyB9IH0gcmV0dXJuIGE7IH0gfVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiByOyB9XG4vKipcbiAqIExpYnJhcnkgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IEJveCwgSWNvbiwgU3RhdGljTm90aWNlLCBTZWxlY3QsIEJ1dHRvbiwgTGFiZWwsIEljb25CdXR0b24gfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvY29tcG9uZW50cyc7XG5cbi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IFdoaXRlTGFiZWxCYW5uZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzJztcbmltcG9ydCB7IGdldFBsYXlsaXN0cyB9IGZyb20gJy4uLy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9wbGF5bGlzdHMnO1xuaW1wb3J0IHsgY3JlYXRlVmlkZW8gfSBmcm9tICcuLi8uLi8uLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCB7IGFkZE5vdGljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9ub3RpY2UnO1xuXG4vKipcbiAqIEV4dGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBfXywgc3ByaW50ZiB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciwgdXNlRGlzcGF0Y2ggfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIFZpZGVvUGxheWxpc3RzKF9yZWYpIHtcbiAgdmFyIG1vZGFsSUQgPSBfcmVmLm1vZGFsSUQsXG4gICAgY2xvc2VNb2RhbCA9IF9yZWYuY2xvc2VNb2RhbCxcbiAgICB2aWRlbyA9IF9yZWYudmlkZW8sXG4gICAgc2V0VmlkZW8gPSBfcmVmLnNldFZpZGVvLFxuICAgIHByZXYgPSBfcmVmLnByZXYsXG4gICAgZW1wdHlWaWRlbyA9IF9yZWYuZW1wdHlWaWRlbyxcbiAgICBzZXRVcmxSZWFkeSA9IF9yZWYuc2V0VXJsUmVhZHk7XG4gIHZhciB2aWRlb1BsYXlsaXN0cyA9IHZpZGVvLnBsYXlsaXN0cyxcbiAgICB1cmwgPSB2aWRlby51cmwsXG4gICAgaG9zdCA9IHZpZGVvLmhvc3QsXG4gICAgdGl0bGUgPSB2aWRlby50aXRsZSxcbiAgICBzdGFydF9lbmFibGVkID0gdmlkZW8uc3RhcnRfZW5hYmxlZCxcbiAgICBlbmRfZW5hYmxlZCA9IHZpZGVvLmVuZF9lbmFibGVkLFxuICAgIHN0YXJ0X3RpbWUgPSB2aWRlby5zdGFydF90aW1lLFxuICAgIGVuZF90aW1lID0gdmlkZW8uZW5kX3RpbWUsXG4gICAgdGh1bWJuYWlsID0gdmlkZW8udGh1bWJuYWlsLFxuICAgIGR1cmF0aW9uID0gdmlkZW8uZHVyYXRpb247XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgc2hvd0Vycm9yID0gX3VzZVN0YXRlMlswXSxcbiAgICBzZXRTaG93RXJyb3IgPSBfdXNlU3RhdGUyWzFdO1xuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKHt9KSxcbiAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgZm9ybWF0dGVkUGxheWxpc3RzID0gX3VzZVN0YXRlNFswXSxcbiAgICBzZXRGb3JtYXR0ZWRQbGF5bGlzdHMgPSBfdXNlU3RhdGU0WzFdO1xuICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgaXNQdWJsaXNoaW5nID0gX3VzZVN0YXRlNlswXSxcbiAgICBzZXRJc1B1Ymxpc2hpbmcgPSBfdXNlU3RhdGU2WzFdO1xuICB2YXIgcGxheWxpc3RzID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIGdldFBsYXlsaXN0cyhzdGF0ZSk7XG4gIH0pO1xuICB2YXIgaGVhZGVyQ2xhc3NlcyA9IGNsYXNzbmFtZXMoJ3N1aS1mbGF0dGVuIHN1aS1jb250ZW50LWNlbnRlcicsICdzdWktc3BhY2luZy10b3AtLTYwJywgJ3N1aS1zcGFjaW5nLXJpZ2h0LS02MCcsICdzdWktc3BhY2luZy1sZWZ0LS02MCcpO1xuXG4gIC8qKlxuICAgKiBGb3JtYXQgdGhlIHBsYXlsaXN0IGRhdGEgdG8gU2VsZWN0MiBmb3JtYXQuXG4gICAqXG4gICAqIFNlbGVjdDIgYWNjZXB0IGlkIGFuZCB0ZXh0IGFzIG9wdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICovXG4gIHZhciBmb3JtYXRQbGF5bGlzdHMgPSBmdW5jdGlvbiBmb3JtYXRQbGF5bGlzdHMoKSB7XG4gICAgdmFyIGxpc3QgPSB7fTtcblxuICAgIC8vIEZvcm1hdCBwbGF5bGlzdHMuXG4gICAgaWYgKE9iamVjdC5rZXlzKHBsYXlsaXN0cykubGVuZ3RoID4gMCkge1xuICAgICAgT2JqZWN0LmtleXMocGxheWxpc3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgX3BsYXlsaXN0cyRpZDtcbiAgICAgICAgbGlzdCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbGlzdCksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCBwbGF5bGlzdHMgPT09IG51bGwgfHwgcGxheWxpc3RzID09PSB2b2lkIDAgfHwgKF9wbGF5bGlzdHMkaWQgPSBwbGF5bGlzdHNbaWRdKSA9PT0gbnVsbCB8fCBfcGxheWxpc3RzJGlkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxheWxpc3RzJGlkLnRpdGxlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0Rm9ybWF0dGVkUGxheWxpc3RzKGxpc3QpO1xuICB9O1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGZvcm1hdFBsYXlsaXN0cygpO1xuICB9LCBbcGxheWxpc3RzXSk7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzZWxlY3RlZCBwbGF5bGlzdHNcbiAgICpcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHZhciB1cGRhdGVTZWxlY3RlZFBsYXlsaXN0cyA9IGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkUGxheWxpc3RzKHNlbGVjdGVkKSB7XG4gICAgdmFyIG5ld1ZpZGVvID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWRlbyksIHt9LCB7XG4gICAgICBwbGF5bGlzdHM6IHNlbGVjdGVkXG4gICAgfSk7XG4gICAgc2V0VmlkZW8obmV3VmlkZW8pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQdWJsaXNoIFZpZGVvXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgcHVibGlzaFZpZGVvID0gZnVuY3Rpb24gcHVibGlzaFZpZGVvKCkge1xuICAgIHNldElzUHVibGlzaGluZyh0cnVlKTtcbiAgICBkaXNwYXRjaChjcmVhdGVWaWRlbyh7XG4gICAgICB2aWRlbzoge1xuICAgICAgICBwbGF5bGlzdHM6IHZpZGVvUGxheWxpc3RzLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgaG9zdDogaG9zdCxcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICBzdGFydF9lbmFibGVkOiBzdGFydF9lbmFibGVkLFxuICAgICAgICBlbmRfZW5hYmxlZDogZW5kX2VuYWJsZWQsXG4gICAgICAgIHN0YXJ0X3RpbWU6IHN0YXJ0X3RpbWUsXG4gICAgICAgIGVuZF90aW1lOiBlbmRfdGltZSxcbiAgICAgICAgdGh1bWJuYWlsOiB0aHVtYm5haWwuaWQgfHwgMCxcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgICB9XG4gICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgX3Jlc3BvbnNlJHBheWxvYWQ7XG4gICAgICBpZiAocmVzcG9uc2UgIT09IG51bGwgJiYgcmVzcG9uc2UgIT09IHZvaWQgMCAmJiAoX3Jlc3BvbnNlJHBheWxvYWQgPSByZXNwb25zZS5wYXlsb2FkKSAhPT0gbnVsbCAmJiBfcmVzcG9uc2UkcGF5bG9hZCAhPT0gdm9pZCAwICYmIF9yZXNwb25zZSRwYXlsb2FkLnN1Y2Nlc3MpIHtcbiAgICAgICAgdmFyIF9yZXNwb25zZSRwYXlsb2FkMjtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIG1vZGFsXG4gICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgICAgdmFyIF92aWRlbyA9IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9yZXNwb25zZSRwYXlsb2FkMiA9IHJlc3BvbnNlLnBheWxvYWQpID09PSBudWxsIHx8IF9yZXNwb25zZSRwYXlsb2FkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJHBheWxvYWQyLmRhdGE7XG5cbiAgICAgICAgLy8gU2hvdyBzdWNjZXNzIG5vdGljZVxuICAgICAgICB2YXIgbWVzc2FnZSA9IF92aWRlbyAhPT0gbnVsbCAmJiBfdmlkZW8gIT09IHZvaWQgMCAmJiBfdmlkZW8udmlld19saW5rID8gX18oJ0N1c3RvbSB2aWRlbyBhZGRlZCBzdWNjZXNzZnVsbHkuIFlvdSBjYW4gPGEgaHJlZj1cIiVzXCI+dmlldyB0aGUgdmlkZW88L2E+IG9uIHRoZSBWaWRlbyBUdXRvcmlhbHMgcGFnZS4nLCAnd3BtdWRldl92aWRzJykgOiBfXygnQ3VzdG9tIHZpZGVvIGFkZGVkIHN1Y2Nlc3NmdWxseS4gQXNzaWduIGl0IHRvIGEgcGxheWxpc3Qgc28gdGhlIHZpZGVvIGJlY29tZXMgYXZhaWxhYmxlIG9uIHRoZSBWaWRlbyBUdXRvcmlhbHMgcGFnZS4nLCAnd3BtdWRldl92aWRzJyk7XG5cbiAgICAgICAgLy8gQWRkIFN1Y2Nlc3Mgbm90aWNlXG4gICAgICAgIGRpc3BhdGNoKGFkZE5vdGljZSh7XG4gICAgICAgICAgbWVzc2FnZTogc3ByaW50ZihtZXNzYWdlLCBfdmlkZW8gPT09IG51bGwgfHwgX3ZpZGVvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmlkZW8udmlld19saW5rKSxcbiAgICAgICAgICBkaXNtaXNzOiB0cnVlXG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBFbXB0eSB0aGUgdmlkZW8gb2JqZWN0XG4gICAgICAgIHNldFZpZGVvKGVtcHR5VmlkZW8pO1xuICAgICAgICBzZXRVcmxSZWFkeShmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTaG93RXJyb3IodHJ1ZSk7XG4gICAgICB9XG4gICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRJc1B1Ymxpc2hpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1wbGF5bGlzdC1mb3JtXCIpLFxuICAgIGNsYXNzTmFtZTogXCJzdWktbW9kYWwtc2xpZGVcIixcbiAgICBcImRhdGEtbW9kYWwtc2l6ZVwiOiBcImxnXCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhCb3gsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3hzKEJveC5IZWFkZXIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBoZWFkZXJDbGFzc2VzLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFdoaXRlTGFiZWxCYW5uZXIsIHtcbiAgICAgICAgICBzcmM6IFwibW9kYWwvbW9kYWwtaGVhZGVyLXZpZGVvcy5wbmdcIixcbiAgICAgICAgICBhbHQ6IF9fKCdBZGQgQ3VzdG9tIFZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChJY29uQnV0dG9uLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1idXR0b24tZmxvYXQtLXJpZ2h0XCIsXG4gICAgICAgICAgaWNvbjogXCJjbG9zZVwiLFxuICAgICAgICAgIG9uQ2xpY2s6IGNsb3NlTW9kYWwsXG4gICAgICAgICAgc2l6ZTogXCJtZFwiLFxuICAgICAgICAgIG91dGxpbmVkOiBmYWxzZSxcbiAgICAgICAgICBsYWJlbDogX18oJ0Nsb3NlIHRoaXMgZGlhbG9nLicsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktYnV0dG9uLWZsb2F0LS1sZWZ0XCIsXG4gICAgICAgICAgaWNvbjogXCJjaGV2cm9uLWxlZnRcIixcbiAgICAgICAgICBcImRhdGEtbW9kYWwtc2xpZGVcIjogcHJldixcbiAgICAgICAgICBcImRhdGEtbW9kYWwtc2xpZGUtaW50cm9cIjogXCJiYWNrXCIsXG4gICAgICAgICAgc2l6ZTogXCJtZFwiLFxuICAgICAgICAgIG91dGxpbmVkOiBmYWxzZSxcbiAgICAgICAgICBsYWJlbDogX18oJ0dvIGJhY2sgdG8gcHJldmlvdXMgc2xpZGUuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcImgzXCIsIHtcbiAgICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdGl0bGVcIiksXG4gICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1ib3gtdGl0bGUgc3VpLWxnXCIsXG4gICAgICAgICAgY2hpbGRyZW46IF9fKCdBZGQgQ3VzdG9tIFZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1kZXNjXCIpLFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJzdWktZGVzY3JpcHRpb25cIixcbiAgICAgICAgICBjaGlsZHJlbjogX18oJ1RvIGZpbmlzaCBhZGRpbmcgdGhpcyB2aWRlbywgYXNzaWduIGl0IHRvIGEgcGxheWxpc3QuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pXVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4cyhCb3guQm9keSwge1xuICAgICAgICBjaGlsZHJlbjogW3Nob3dFcnJvciAmJiAvKiNfX1BVUkVfXyovX2pzeChTdGF0aWNOb3RpY2UsIHtcbiAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgY2hpbGRyZW46IF9fKCdUaGVyZSB3YXMgYW4gZXJyb3IgcHVibGlzaGluZyB0aGUgdmlkZW8uIFBsZWFzZSB0cnkgYWdhaW4uJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChTdGF0aWNOb3RpY2UsIHtcbiAgICAgICAgICB0eXBlOiBcImluZm9cIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBfXyhcIk5vdGU6IFdlIHJlY29tbWVuZCBhZGRpbmcgeW91ciBjdXN0b20gdmlkZW8gdG8gYW4gZXhpc3RpbmcgcGxheWxpc3Qgc28gaXQncyBhdmFpbGFibGUgb24gdGhlIFZpZGVvIFR1dG9yaWFscyBwYWdlLlwiLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWZvcm0tZmllbGRcIixcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KExhYmVsLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwic3VpLWxhYmVsXCIsXG4gICAgICAgICAgICBodG1sRm9yOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1wbGF5bGlzdFwiKSxcbiAgICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1wbGF5bGlzdC1sYWJlbFwiKSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBfXygnQ2hvb3NlIHBsYXlsaXN0JywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFNlbGVjdCwge1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudDogXCJ3cG11ZGV2LXZpZGVvcy12aWRlby1jcmVhdGUtbW9kYWxcIixcbiAgICAgICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1wbGF5bGlzdFwiKSxcbiAgICAgICAgICAgIHZhbHVlOiB2aWRlb1BsYXlsaXN0cyxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiB1cGRhdGVTZWxlY3RlZFBsYXlsaXN0cyxcbiAgICAgICAgICAgIG9wdGlvbnM6IGZvcm1hdHRlZFBsYXlsaXN0cyxcbiAgICAgICAgICAgIGxhYmVsSUQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXBsYXlsaXN0LWxhYmVsXCIpLFxuICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogX18oJ0Nob29zZSBwbGF5bGlzdCcsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCb3guRm9vdGVyLCB7XG4gICAgICAgIGlzQ2VudGVyZWQ6IHRydWUsXG4gICAgICAgIGlzRmxhdHRlbjogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICAgIG9uTG9hZGluZ1RleHQ6IF9fKCdQdWJsaXNoaW5nJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgICAgIG9uQ2xpY2s6IHB1Ymxpc2hWaWRlbyxcbiAgICAgICAgICBpc0xvYWRpbmc6IGlzUHVibGlzaGluZyxcbiAgICAgICAgICBjaGlsZHJlbjogX18oJ1B1Ymxpc2gnLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgVmlkZW9QbGF5bGlzdHM7IiwiZXhwb3J0ICogZnJvbSAnLi9WaWRlb0hvc3QnO1xuZXhwb3J0ICogZnJvbSAnLi9WaWRlb1VybCc7XG5leHBvcnQgKiBmcm9tICcuL1ZpZGVvUGxheWxpc3RzJzsiLCJmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7IH1cbi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IFZpZGVvSG9zdCwgVmlkZW9VcmwsIFZpZGVvUGxheWxpc3RzIH0gZnJvbSAnLi9zbGlkZXMnO1xuXG4vKipcbiAqIEV4dGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuLy8gRW1wdHkgdmlkZW8gZGF0YSBzdHJ1Y3R1cmVcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBlbXB0eVZpZGVvID0ge1xuICBob3N0OiAnJyxcbiAgdXJsOiAnJyxcbiAgdGl0bGU6ICcnLFxuICBzdGFydF9lbmFibGVkOiAwLFxuICBlbmRfZW5hYmxlZDogMCxcbiAgc3RhcnRfdGltZTogJycsXG4gIGVuZF90aW1lOiAnJyxcbiAgcGxheWxpc3RzOiBbXSxcbiAgdGh1bWJuYWlsOiB7XG4gICAgaWQ6IDAsXG4gICAgZmlsZTogJycsXG4gICAgdXJsOiAnJ1xuICB9LFxuICBkdXJhdGlvbjogJycsXG4gIGVtYmVkOiAnJ1xufTtcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVDdXN0b21WaWRlbyhfcmVmKSB7XG4gIHZhciBtb2RhbElEID0gX3JlZi5tb2RhbElELFxuICAgIGNsb3NlTW9kYWwgPSBfcmVmLmNsb3NlTW9kYWw7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShlbXB0eVZpZGVvKSxcbiAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICB2aWRlbyA9IF91c2VTdGF0ZTJbMF0sXG4gICAgc2V0VmlkZW8gPSBfdXNlU3RhdGUyWzFdO1xuXG4gIC8vIFRoaXMgdmFyaWFibGUgaXMgdXNlZCB0byBjaGVjayBpZiB0aGUgdmlkZW8gdXJsIGlzIHZhbGlkXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICB1cmxSZWFkeSA9IF91c2VTdGF0ZTRbMF0sXG4gICAgc2V0VXJsUmVhZHkgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgbW9kYWwgYW5kIHJlc2V0cyBWaWRlbyBTdGF0ZVxuICAgKlxuICAgKiBAcmV0dXJuIHtudWxsfVxuICAgKi9cbiAgdmFyIGNsb3NlQW5kUmVzZXQgPSBmdW5jdGlvbiBjbG9zZUFuZFJlc2V0KCkge1xuICAgIC8vIHNldCB1cmxcbiAgICBzZXRVcmxSZWFkeShmYWxzZSk7XG5cbiAgICAvLyBSZXNldCBWaWRlbyBTdGF0ZVxuICAgIHNldFZpZGVvKGVtcHR5VmlkZW8pO1xuXG4gICAgLy8gQ2xvc2UgdGhlIG1vZGFsXG4gICAgY2xvc2VNb2RhbCgpO1xuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKF9GcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goVmlkZW9Ib3N0LCB7XG4gICAgICB2aWRlbzogdmlkZW8sXG4gICAgICBzZXRWaWRlbzogc2V0VmlkZW8sXG4gICAgICBtb2RhbElEOiBtb2RhbElELFxuICAgICAgY2xvc2VNb2RhbDogY2xvc2VBbmRSZXNldCxcbiAgICAgIG5leHQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXVybC1mb3JtXCIpXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFZpZGVvVXJsLCB7XG4gICAgICB2aWRlbzogdmlkZW8sXG4gICAgICBzZXRWaWRlbzogc2V0VmlkZW8sXG4gICAgICBtb2RhbElEOiBtb2RhbElELFxuICAgICAgY2xvc2VNb2RhbDogY2xvc2VBbmRSZXNldCxcbiAgICAgIHByZXY6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLWhvc3Qtc2VsZWN0b3JcIiksXG4gICAgICBuZXh0OiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi1wbGF5bGlzdC1mb3JtXCIpLFxuICAgICAgdXJsUmVhZHk6IHVybFJlYWR5LFxuICAgICAgc2V0VXJsUmVhZHk6IHNldFVybFJlYWR5XG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFZpZGVvUGxheWxpc3RzLCB7XG4gICAgICB2aWRlbzogdmlkZW8sXG4gICAgICBzZXRWaWRlbzogc2V0VmlkZW8sXG4gICAgICBwcmV2OiBcIlwiLmNvbmNhdChtb2RhbElELCBcIi11cmwtZm9ybVwiKSxcbiAgICAgIG1vZGFsSUQ6IG1vZGFsSUQsXG4gICAgICBjbG9zZU1vZGFsOiBjbG9zZUFuZFJlc2V0LFxuICAgICAgZW1wdHlWaWRlbzogZW1wdHlWaWRlbyxcbiAgICAgIHNldFVybFJlYWR5OiBzZXRVcmxSZWFkeVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IENyZWF0ZUN1c3RvbVZpZGVvOyIsImZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KHIsIGUpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQociwgZSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGUpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHsgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTsgaWYgKG51bGwgIT0gdCkgeyB2YXIgZSwgbiwgaSwgdSwgYSA9IFtdLCBmID0gITAsIG8gPSAhMTsgdHJ5IHsgaWYgKGkgPSAodCA9IHQuY2FsbChyKSkubmV4dCwgMCA9PT0gbCkgeyBpZiAoT2JqZWN0KHQpICE9PSB0KSByZXR1cm47IGYgPSAhMTsgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApOyB9IGNhdGNoIChyKSB7IG8gPSAhMCwgbiA9IHI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuOyB9IGZpbmFsbHkgeyBpZiAobykgdGhyb3cgbjsgfSB9IHJldHVybiBhOyB9IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhyKSB7IGlmIChBcnJheS5pc0FycmF5KHIpKSByZXR1cm4gcjsgfVxuLyoqXG4gKiBMaWJyYXJ5IGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBCb3gsIFN0YXRpY05vdGljZSwgQnV0dG9uLCBJY29uQnV0dG9uIH0gZnJvbSAnLi4vLi4vLi4vbGliL2NvbXBvbmVudHMnO1xuXG4vKipcbiAqIEludGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBWaWRlb0Zvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzJztcbmltcG9ydCB7IHVwZGF0ZVZpZGVvIH0gZnJvbSAnLi4vLi4vLi4vc3RvcmUvc2xpY2VzL3ZpZGVvcyc7XG5pbXBvcnQgeyBhZGROb3RpY2UgfSBmcm9tICcuLi8uLi8uLi9zdG9yZS9zbGljZXMvbm90aWNlJztcbmltcG9ydCB7IHRpbWVSZWdleCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBFZGl0VmlkZW8oX3JlZikge1xuICB2YXIgbW9kYWxJRCA9IF9yZWYubW9kYWxJRCxcbiAgICBjbG9zZU1vZGFsID0gX3JlZi5jbG9zZU1vZGFsLFxuICAgIHZpZGVvID0gX3JlZi52aWRlbztcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICBzaG93RXJyb3IgPSBfdXNlU3RhdGUyWzBdLFxuICAgIHNldFNob3dFcnJvciA9IF91c2VTdGF0ZTJbMV07XG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICB1cmxSZWFkeSA9IF91c2VTdGF0ZTRbMF0sXG4gICAgc2V0VXJsUmVhZHkgPSBfdXNlU3RhdGU0WzFdO1xuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKHt9KSxcbiAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgbmV3VmlkZW8gPSBfdXNlU3RhdGU2WzBdLFxuICAgIHNldE5ld1ZpZGVvID0gX3VzZVN0YXRlNlsxXTtcbiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLFxuICAgIGlzU2F2aW5nID0gX3VzZVN0YXRlOFswXSxcbiAgICBzZXRJc1NhdmluZyA9IF91c2VTdGF0ZThbMV07XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG5cbiAgLy8gVXBkYXRlIFVybCBSZWFkeVxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNldFVybFJlYWR5KCEhdmlkZW8udmlkZW9fdXJsKTtcbiAgfSwgW3ZpZGVvXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgLy8gVXBkYXRlIG5ld1ZpZGVvIHN0cnVjdHVyZSB0byBjb3JyZXNwb25kIHRvIFZpZGVvRm9ybSBzdHJ1Y3R1cmVcbiAgICBzZXROZXdWaWRlbyh7XG4gICAgICBpZDogdmlkZW8uaWQsXG4gICAgICBob3N0OiB2aWRlby52aWRlb19ob3N0LFxuICAgICAgdXJsOiB2aWRlby52aWRlb191cmwsXG4gICAgICB0aXRsZTogdmlkZW8udmlkZW9fdGl0bGUsXG4gICAgICBzdGFydF9lbmFibGVkOiB2aWRlby52aWRlb19zdGFydCxcbiAgICAgIGVuZF9lbmFibGVkOiB2aWRlby52aWRlb19lbmQsXG4gICAgICBzdGFydF90aW1lOiB2aWRlby52aWRlb19zdGFydF90aW1lLFxuICAgICAgZW5kX3RpbWU6IHZpZGVvLnZpZGVvX2VuZF90aW1lLFxuICAgICAgcGxheWxpc3RzOiB2aWRlby5wbGF5bGlzdHMsXG4gICAgICB0aHVtYm5haWw6IHZpZGVvLnRodW1ibmFpbCxcbiAgICAgIGR1cmF0aW9uOiB2aWRlby52aWRlb19kdXJhdGlvblxuICAgIH0pO1xuICB9LCBbdmlkZW9dKTtcbiAgdmFyIHNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gc2F2ZUNoYW5nZXMoKSB7XG4gICAgc2V0SXNTYXZpbmcodHJ1ZSk7XG4gICAgZGlzcGF0Y2godXBkYXRlVmlkZW8oe1xuICAgICAgaWQ6IG5ld1ZpZGVvLmlkLFxuICAgICAgdmlkZW86IHtcbiAgICAgICAgdXJsOiBuZXdWaWRlby51cmwsXG4gICAgICAgIHRpdGxlOiBuZXdWaWRlby50aXRsZSxcbiAgICAgICAgc3RhcnRfZW5hYmxlZDogbmV3VmlkZW8uc3RhcnRfZW5hYmxlZCxcbiAgICAgICAgZW5kX2VuYWJsZWQ6IG5ld1ZpZGVvLmVuZF9lbmFibGVkLFxuICAgICAgICBzdGFydF90aW1lOiBuZXdWaWRlby5zdGFydF90aW1lLFxuICAgICAgICBlbmRfdGltZTogbmV3VmlkZW8uZW5kX3RpbWUsXG4gICAgICAgIHRodW1ibmFpbDogbmV3VmlkZW8udGh1bWJuYWlsLmlkLFxuICAgICAgICBkdXJhdGlvbjogbmV3VmlkZW8uZHVyYXRpb25cbiAgICAgIH1cbiAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHZhciBfcmVzcG9uc2UkcGF5bG9hZDtcbiAgICAgIGlmIChyZXNwb25zZSAhPT0gbnVsbCAmJiByZXNwb25zZSAhPT0gdm9pZCAwICYmIChfcmVzcG9uc2UkcGF5bG9hZCA9IHJlc3BvbnNlLnBheWxvYWQpICE9PSBudWxsICYmIF9yZXNwb25zZSRwYXlsb2FkICE9PSB2b2lkIDAgJiYgX3Jlc3BvbnNlJHBheWxvYWQuc3VjY2Vzcykge1xuICAgICAgICAvLyBEaXNwbGF5IE5vdGljZVxuICAgICAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgICAgIG1lc3NhZ2U6IHNwcmludGYoX18oJ+KAnCVz4oCdIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LicsICd3cG11ZGV2X3ZpZHMnKSwgbmV3VmlkZW8udGl0bGUpXG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGlzcGxheSBFcnJvciBOb3RpY2VcbiAgICAgICAgZGlzcGF0Y2goYWRkTm90aWNlKHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6IF9fKCdVcGRhdGVkIGZhaWxlZDogUGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMIGFuZCBUaXRsZS4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0SXNTYXZpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9O1xuICB2YXIgYnRuRGlzYWJsZWQgPSBuZXdWaWRlby5zdGFydF9lbmFibGVkICYmICF0aW1lUmVnZXgobmV3VmlkZW8uc3RhcnRfdGltZSkgfHwgbmV3VmlkZW8uZW5kX2VuYWJsZWQgJiYgIXRpbWVSZWdleChuZXdWaWRlby5lbmRfdGltZSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeHMoQm94LCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeHMoQm94LkhlYWRlciwge1xuICAgICAgY2xhc3NOYW1lOiBcInN1aS1mbGF0dGVyXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KEJveC5UaXRsZSwge1xuICAgICAgICBpZDogbW9kYWxJRCxcbiAgICAgICAgY2hpbGRyZW46IF9fKCdFZGl0IHZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KSwgLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgICBjbGFzc05hbWU6IFwic3VpLWJ1dHRvbi1mbG9hdC0tcmlnaHRcIixcbiAgICAgICAgaWNvbjogXCJjbG9zZVwiLFxuICAgICAgICBvbkNsaWNrOiBjbG9zZU1vZGFsLFxuICAgICAgICBzaXplOiBcIm1kXCIsXG4gICAgICAgIG91dGxpbmVkOiBmYWxzZSxcbiAgICAgICAgbGFiZWw6IF9fKCdDbG9zZSB0aGlzIGRpYWxvZy4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pXVxuICAgIH0pLCBzaG93RXJyb3IgJiYgLyojX19QVVJFX18qL19qc3goQm94LkJvZHksIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChTdGF0aWNOb3RpY2UsIHtcbiAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogX18oJ1RoZSBVUkwgeW91IGhhdmUgYXR0YWNoZWQgaXMgaW52YWxpZC4gVHJ5IGFnYWluIGJ5IGNvcHlpbmcgdGhlIFVSTCBmcm9tIHlvdXIgYnJvd3NlciBhbmQgcGFzdGluZyBpdCBpbnRvIHRoZSBpbnB1dCBmaWVsZCBiZWxvdy4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFZpZGVvRm9ybSwge1xuICAgICAgdmlkZW86IG5ld1ZpZGVvLFxuICAgICAgc2V0VmlkZW86IHNldE5ld1ZpZGVvLFxuICAgICAgbW9kYWxJRDogbW9kYWxJRCxcbiAgICAgIHVybFJlYWR5OiB1cmxSZWFkeSxcbiAgICAgIHNldFVybFJlYWR5OiBzZXRVcmxSZWFkeSxcbiAgICAgIHNldFNob3dFcnJvcjogc2V0U2hvd0Vycm9yXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5Gb290ZXIsIHtcbiAgICAgIGlzQ2VudGVyZWQ6IHRydWUsXG4gICAgICBpc0ZsYXR0ZW46IHRydWUsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goQnV0dG9uLCB7XG4gICAgICAgIG9uTG9hZGluZ1RleHQ6IF9fKCdTYXZpbmcgQ2hhbmdlcycsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgaXNMb2FkaW5nOiBpc1NhdmluZyxcbiAgICAgICAgb25DbGljazogc2F2ZUNoYW5nZXMsXG4gICAgICAgIGRpc2FibGVkOiBidG5EaXNhYmxlZCxcbiAgICAgICAgY2hpbGRyZW46IF9fKCdTYXZlIENoYW5nZXMnLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgRWRpdFZpZGVvOyIsImZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KHIsIGUpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQociwgZSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGUpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgeyAobnVsbCA9PSBhIHx8IGEgPiByLmxlbmd0aCkgJiYgKGEgPSByLmxlbmd0aCk7IGZvciAodmFyIGUgPSAwLCBuID0gQXJyYXkoYSk7IGUgPCBhOyBlKyspIG5bZV0gPSByW2VdOyByZXR1cm4gbjsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHsgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTsgaWYgKG51bGwgIT0gdCkgeyB2YXIgZSwgbiwgaSwgdSwgYSA9IFtdLCBmID0gITAsIG8gPSAhMTsgdHJ5IHsgaWYgKGkgPSAodCA9IHQuY2FsbChyKSkubmV4dCwgMCA9PT0gbCkgeyBpZiAoT2JqZWN0KHQpICE9PSB0KSByZXR1cm47IGYgPSAhMTsgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApOyB9IGNhdGNoIChyKSB7IG8gPSAhMCwgbiA9IHI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuOyB9IGZpbmFsbHkgeyBpZiAobykgdGhyb3cgbjsgfSB9IHJldHVybiBhOyB9IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhyKSB7IGlmIChBcnJheS5pc0FycmF5KHIpKSByZXR1cm4gcjsgfVxuLyoqXG4gKiBMaWJyYXJ5IGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBCb3gsIEJ1dHRvbiwgSWNvbkJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgZGVsZXRlVmlkZW8sIGluaXRWaWRlb3MgfSBmcm9tICcuLi8uLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCB7IGFkZE5vdGljZSB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9ub3RpY2UnO1xuXG4vKipcbiAqIEV4dGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBEZWxldGVWaWRlbyhfcmVmKSB7XG4gIHZhciBtb2RhbCA9IF9yZWYubW9kYWwsXG4gICAgdmlkZW8gPSBfcmVmLnZpZGVvLFxuICAgIGNsb3NlTW9kYWwgPSBfcmVmLmNsb3NlTW9kYWw7XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgaXNEZWxldGluZyA9IF91c2VTdGF0ZTJbMF0sXG4gICAgc2V0SXNEZWxldGluZyA9IF91c2VTdGF0ZTJbMV07XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjIuaWQ7XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIHZpZGVvIHVwb24gY29uZmlybWF0aW9uXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgb25EZWxldGUgPSBmdW5jdGlvbiBvbkRlbGV0ZSgpIHtcbiAgICBzZXRJc0RlbGV0aW5nKHRydWUpO1xuICAgIGRpc3BhdGNoKGRlbGV0ZVZpZGVvKHtcbiAgICAgIGlkOiBpZFxuICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgdmFyIF9yZXNwb25zZSRwYXlsb2FkO1xuICAgICAgaWYgKHJlc3BvbnNlICE9PSBudWxsICYmIHJlc3BvbnNlICE9PSB2b2lkIDAgJiYgKF9yZXNwb25zZSRwYXlsb2FkID0gcmVzcG9uc2UucGF5bG9hZCkgIT09IG51bGwgJiYgX3Jlc3BvbnNlJHBheWxvYWQgIT09IHZvaWQgMCAmJiBfcmVzcG9uc2UkcGF5bG9hZC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIENsb3NlIHRoZSBtb2RhbFxuICAgICAgICBjbG9zZU1vZGFsKCk7XG5cbiAgICAgICAgLy9BZGQgdGhlIG5vdGljZVxuICAgICAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgICAgIG1lc3NhZ2U6IF9fKCdWaWRlbyBkZWxldGVkIHN1Y2Nlc3NmdWxseS4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9yZXNwb25zZSRlcnJvcjtcbiAgICAgICAgLy8gRGlzcGxheSBFcnJvciBtZXNzYWdlXG4gICAgICAgIGRpc3BhdGNoKGFkZE5vdGljZSh7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwIHx8IChfcmVzcG9uc2UkZXJyb3IgPSByZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX3Jlc3BvbnNlJGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uc2UkZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRJc0RlbGV0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhCb3gsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4cyhCb3guSGVhZGVyLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3VpLWZsYXR0ZW4gc3VpLWNvbnRlbnQtY2VudGVyIHN1aS1zcGFjaW5nLXRvcC0tNjBcIixcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgICBvdXRsaW5lZDogZmFsc2UsXG4gICAgICAgIGNsYXNzTmFtZTogXCJzdWktYnV0dG9uLWZsb2F0LS1yaWdodFwiLFxuICAgICAgICBvbkNsaWNrOiBjbG9zZU1vZGFsLFxuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWwsIFwiLWNsb3NlXCIpLFxuICAgICAgICBpY29uOiBcImNsb3NlXCIsXG4gICAgICAgIGxhYmVsOiBfXygnQ2xvc2UgdGhpcyBkaWFsb2cuJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgICB0b29sdGlwOiBmYWxzZVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5UaXRsZSwge1xuICAgICAgICBjbGFzc05hbWU6IFwic3VpLWxnXCIsXG4gICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbCwgXCItdGl0bGVcIiksXG4gICAgICAgIGNoaWxkcmVuOiBfXygnRGVsZXRlIHZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KSwgLyojX19QVVJFX18qL19qc3goQm94LkRlc2NyaXB0aW9uLCB7XG4gICAgICAgIGlkOiBcIlwiLmNvbmNhdChtb2RhbCwgXCItdGl0bGVcIiksXG4gICAgICAgIGNoaWxkcmVuOiBfXygnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgdmlkZW8/JywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL19qc3hzKEJveC5Gb290ZXIsIHtcbiAgICAgIGlzRmxhdHRlbjogdHJ1ZSxcbiAgICAgIGlzQ2VudGVyZWQ6IHRydWUsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICBvbkNsaWNrOiBjbG9zZU1vZGFsLFxuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWwsIFwiLXN1Ym1pdFwiKSxcbiAgICAgICAgdHlwZTogXCJnaG9zdFwiLFxuICAgICAgICBjaGlsZHJlbjogX18oJ0NhbmNlbCcsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWwsIFwiLXN1Ym1pdFwiKSxcbiAgICAgICAgdHlwZTogXCJnaG9zdFwiLFxuICAgICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgICAgaXNMb2FkaW5nOiBpc0RlbGV0aW5nLFxuICAgICAgICBvbkxvYWRpbmdUZXh0OiBfXygnRGVsZXRpbmcnLCAnd3BtdWRldl92aWRzJyksXG4gICAgICAgIG9uQ2xpY2s6IG9uRGVsZXRlLFxuICAgICAgICBjaGlsZHJlbjogX18oJ0RlbGV0ZScsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgfSldXG4gICAgfSldXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgRGVsZXRlVmlkZW87IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgciwgdCkgeyByZXR1cm4gKHIgPSBfdG9Qcm9wZXJ0eUtleShyKSkgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCB7IHZhbHVlOiB0LCBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwIH0pIDogZVtyXSA9IHQsIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7IH1cbi8qKlxuICogTGlicmFyaWVzIGRlcGVuZGVjaWVzXG4gKi9cbmltcG9ydCB7IEJveCwgSWNvbkJ1dHRvbiwgSW5wdXQsIEJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgdXBkYXRlVmlkZW8gfSBmcm9tICcuLi8uLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCB7IGFkZE5vdGljZSB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9ub3RpY2UnO1xuXG4vKipcbiAqIExpYnJhcmllcyBkZXBlbmRlY2llc1xuICovXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IF9fIH0gZnJvbSAnQHdvcmRwcmVzcy9pMThuJztcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgV2hpdGVMYWJlbEJhbm5lciB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgdXNlRGlzcGF0Y2ggfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIEVkaXRUaXRsZShfcmVmKSB7XG4gIHZhciBtb2RhbElEID0gX3JlZi5tb2RhbElELFxuICAgIGNsb3NlTW9kYWwgPSBfcmVmLmNsb3NlTW9kYWwsXG4gICAgdmlkZW8gPSBfcmVmLnZpZGVvLFxuICAgIHNldEN1cnJlbnRWaWRlbyA9IF9yZWYuc2V0Q3VycmVudFZpZGVvO1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgIGlzU2F2aW5nID0gX3VzZVN0YXRlMlswXSxcbiAgICBzZXRJc1NhdmluZyA9IF91c2VTdGF0ZTJbMV07XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIHZhciBoZWFkZXJDbGFzc2VzID0gY2xhc3NuYW1lcygnc3VpLWZsYXR0ZW4nLCAnc3VpLWNvbnRlbnQtY2VudGVyJywgJ3N1aS1zcGFjaW5nLXRvcC0tNjAnKTtcbiAgdmFyIGltYWdlQ2xhc3NlcyA9IGNsYXNzbmFtZXMoJ3N1aS1pbWFnZScsICdzdWktaW1hZ2UtY2VudGVyJyk7XG4gIHZhciBfcmVmMiA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjIuaWQsXG4gICAgdmlkZW9fdGl0bGUgPSBfcmVmMi52aWRlb190aXRsZTtcblxuICAvKipcbiAgICogT24gdGl0bGUgY2hhbmdlXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgb25UaXRsZUNoYW5nZSA9IGZ1bmN0aW9uIG9uVGl0bGVDaGFuZ2UodmFsdWUpIHtcbiAgICBzZXRDdXJyZW50VmlkZW8oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWRlbyksIHt9LCB7XG4gICAgICB2aWRlb190aXRsZTogdmFsdWVcbiAgICB9KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIHNhdmVDaGFuZ2VzXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiBzYXZlQ2hhbmdlcygpIHtcbiAgICBzZXRJc1NhdmluZyh0cnVlKTtcbiAgICBkaXNwYXRjaCh1cGRhdGVWaWRlbyh7XG4gICAgICBpZDogaWQsXG4gICAgICB2aWRlbzoge1xuICAgICAgICB0aXRsZTogdmlkZW9fdGl0bGVcbiAgICAgIH1cbiAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHZhciBfcmVzcG9uc2UkcGF5bG9hZDtcbiAgICAgIGlmIChyZXNwb25zZSAhPT0gbnVsbCAmJiByZXNwb25zZSAhPT0gdm9pZCAwICYmIChfcmVzcG9uc2UkcGF5bG9hZCA9IHJlc3BvbnNlLnBheWxvYWQpICE9PSBudWxsICYmIF9yZXNwb25zZSRwYXlsb2FkICE9PSB2b2lkIDAgJiYgX3Jlc3BvbnNlJHBheWxvYWQuc3VjY2Vzcykge1xuICAgICAgICAvLyBEaXNwbGF5IE5vdGljZVxuICAgICAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgICAgIG1lc3NhZ2U6IHNwcmludGYoX18oJ1ZpZGVvIHRpdGxlIGlzIGNoYW5nZWQgdG8g4oCcJXPigJ0uJywgJ3dwbXVkZXZfdmlkcycpLCB2aWRlb190aXRsZSlcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIENsb3NlIHRoZSBtb2RhbFxuICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEaXNwbGF5IEVycm9yIE5vdGljZVxuICAgICAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogX18oJ1NvcnJ5LiBDb3VsZCBub3QgdXBkYXRlIHRoZSB2aWRlbyB0aXRsZS4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0SXNTYXZpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKEJveCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3hzKEJveC5IZWFkZXIsIHtcbiAgICAgIGNsYXNzTmFtZTogaGVhZGVyQ2xhc3NlcyxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goSWNvbkJ1dHRvbiwge1xuICAgICAgICBvdXRsaW5lZDogZmFsc2UsXG4gICAgICAgIGNsYXNzTmFtZTogXCJzdWktYnV0dG9uLWZsb2F0LS1yaWdodFwiLFxuICAgICAgICBvbkNsaWNrOiBjbG9zZU1vZGFsLFxuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItY2xvc2VcIiksXG4gICAgICAgIGljb246IFwiY2xvc2VcIixcbiAgICAgICAgbGFiZWw6IF9fKCdDbG9zZSB0aGlzIGRpYWxvZy4nLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCb3guVGl0bGUsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1sZ1wiLFxuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdGl0bGVcIiksXG4gICAgICAgIGNoaWxkcmVuOiBfXygnVmlkZW8gdGl0bGUnLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCb3guRGVzY3JpcHRpb24sIHtcbiAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXRpdGxlXCIpLFxuICAgICAgICBjaGlsZHJlbjogX18oJ0NoYW5nZSB0aGUgdGl0bGUgb2YgdGhlIHZpZGVvIGJlbG93LicsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1mb3JtLWZpZWxkXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChJbnB1dCwge1xuICAgICAgICAgIGlkOiBcIndwbXVkZXYtdmlkZW9zLXZpZGVvLXRpdGxlLWZvcm0tdGl0bGUtaW5wdXRcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogX18oJ1ZpZGVvIHRpdGxlJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgICAgIHZhbHVlOiB2aWRlb190aXRsZSxcbiAgICAgICAgICBvbkNoYW5nZTogb25UaXRsZUNoYW5nZVxuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICBjb2xvcjogXCJibHVlXCIsXG4gICAgICAgIG9uTG9hZGluZ1RleHQ6IF9fKCdTYXZpbmcgQ2hhbmdlcycsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgICAgaXNMb2FkaW5nOiBpc1NhdmluZyxcbiAgICAgICAgb25DbGljazogc2F2ZUNoYW5nZXMsXG4gICAgICAgIGNoaWxkcmVuOiBfXygnU2F2ZSBDaGFuZ2VzJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goQm94LkZvb3Rlciwge1xuICAgICAgaXNGbGF0dGVuOiB0cnVlLFxuICAgICAgaXNDZW50ZXJlZDogdHJ1ZVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IEVkaXRUaXRsZTsiLCJmdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkocikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXkocikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KHIpIHsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IHJbU3ltYm9sLml0ZXJhdG9yXSB8fCBudWxsICE9IHJbXCJAQGl0ZXJhdG9yXCJdKSByZXR1cm4gQXJyYXkuZnJvbShyKTsgfVxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyKTsgfVxuZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgciwgdCkgeyByZXR1cm4gKHIgPSBfdG9Qcm9wZXJ0eUtleShyKSkgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCB7IHZhbHVlOiB0LCBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwIH0pIDogZVtyXSA9IHQsIGU7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7IH1cbi8qKlxuICogTGlicmFyaWVzIGRlcGVuZGVjaWVzXG4gKi9cbmltcG9ydCB7IEJveCwgSWNvbkJ1dHRvbiwgQnV0dG9uLCBDaGVja2JveCB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb21wb25lbnRzJztcblxuLyoqXG4gKiBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgdXBkYXRlVmlkZW8gfSBmcm9tICcuLi8uLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCB7IGFkZE5vdGljZSB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9ub3RpY2UnO1xuaW1wb3J0IHsgZ2V0UGxheWxpc3RzLCBnZXRGaWx0ZXJlZCB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL3NsaWNlcy9wbGF5bGlzdHMnO1xuXG4vKipcbiAqIExpYnJhcmllcyBkZXBlbmRlY2llc1xuICovXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IF9fIH0gZnJvbSAnQHdvcmRwcmVzcy9pMThuJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBXaGl0ZUxhYmVsQmFubmVyIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cyc7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIEVkaXRQbGF5bGlzdHMoX3JlZikge1xuICB2YXIgbW9kYWxJRCA9IF9yZWYubW9kYWxJRCxcbiAgICBjbG9zZU1vZGFsID0gX3JlZi5jbG9zZU1vZGFsLFxuICAgIHZpZGVvID0gX3JlZi52aWRlbyxcbiAgICBzZXRDdXJyZW50VmlkZW8gPSBfcmVmLnNldEN1cnJlbnRWaWRlbztcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICBpc1NhdmluZyA9IF91c2VTdGF0ZTJbMF0sXG4gICAgc2V0SXNTYXZpbmcgPSBfdXNlU3RhdGUyWzFdO1xuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKFtdKSxcbiAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgcGxheWxpc3RzID0gX3VzZVN0YXRlNFswXSxcbiAgICBzZXRQbGF5bGlzdHMgPSBfdXNlU3RhdGU0WzFdO1xuICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICB2YXIgX3JlZjIgPSB2aWRlbyAhPT0gbnVsbCAmJiB2aWRlbyAhPT0gdm9pZCAwID8gdmlkZW8gOiB7fSxcbiAgICB2aWRlb1BsYXlsaXN0cyA9IF9yZWYyLnBsYXlsaXN0cztcbiAgdmFyIHBsYXlsaXN0c09iamVjdCA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBnZXRQbGF5bGlzdHMoc3RhdGUpO1xuICB9KTtcbiAgdmFyIGZpbHRlcmVkID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIGdldEZpbHRlcmVkKHN0YXRlKTtcbiAgfSk7XG4gIHZhciBoZWFkZXJDbGFzc2VzID0gY2xhc3NuYW1lcygnc3VpLWZsYXR0ZW4nLCAnc3VpLWNvbnRlbnQtY2VudGVyJywgJ3N1aS1zcGFjaW5nLXRvcC0tNjAnKTtcbiAgdmFyIGxhYmVsQ2xhc3NlcyA9IGNsYXNzbmFtZXMoJ3N1aS1jaGVja2JveCcsICdzdWktY2hlY2tib3gtc20nLCAnc3VpLWNoZWNrYm94LXN0YWNrZWQnKTtcbiAgdmFyIGltYWdlQ2xhc3NlcyA9IGNsYXNzbmFtZXMoJ3N1aS1pbWFnZScsICdzdWktaW1hZ2UtY2VudGVyJyk7XG4gIHZhciBfcmVmMyA9IHZpZGVvICE9PSBudWxsICYmIHZpZGVvICE9PSB2b2lkIDAgPyB2aWRlbyA6IHt9LFxuICAgIGlkID0gX3JlZjMuaWQsXG4gICAgdmlkZW9fdGl0bGUgPSBfcmVmMy52aWRlb190aXRsZTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3UGxheWxpc3RzID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyZWQpKSB7XG4gICAgICBmaWx0ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAocGxheWxpc3RzT2JqZWN0W2lkXSkge1xuICAgICAgICAgIG5ld1BsYXlsaXN0cy5wdXNoKHBsYXlsaXN0c09iamVjdFtpZF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0UGxheWxpc3RzKG5ld1BsYXlsaXN0cyk7XG4gIH0sIFtwbGF5bGlzdHNPYmplY3QsIGZpbHRlcmVkXSk7XG5cbiAgLyoqXG4gICAqIENoZWNrZXMgaWYgdmlkZW8gaXMgYWRkZWQgdG8gcGxheWxpc3RcbiAgICpcbiAgICogQGFyZ3VtZW50IHtpZH0gaWQgcGxheWxpc3QgaWRcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHZhciBpc1BsYXlsaXN0Q2hlY2tlZCA9IGZ1bmN0aW9uIGlzUGxheWxpc3RDaGVja2VkKGlkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmlkZW9QbGF5bGlzdHMpKSB7XG4gICAgICByZXR1cm4gdmlkZW9QbGF5bGlzdHMuaW5jbHVkZXMoaWQpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgUGxheWxpc3RcbiAgICpcbiAgICogQGFyZ3VtZW50IHtpZH0gaWQgcGxheWxpc3QgaWRcbiAgICpcbiAgICogQHJldHVybiB7bnVsbH1cbiAgICpcbiAgICovXG4gIHZhciB0b2dnbGVQbGF5bGlzdCA9IGZ1bmN0aW9uIHRvZ2dsZVBsYXlsaXN0KGlkLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgLy8gQWRkIHRoZSBwbGF5bGlzdCBpZFxuICAgICAgc2V0Q3VycmVudFZpZGVvKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmlkZW8pLCB7fSwge1xuICAgICAgICBwbGF5bGlzdHM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmlkZW9QbGF5bGlzdHMpLCBbaWRdKVxuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIHBsYXlsaXN0IGlkXG4gICAgICBzZXRDdXJyZW50VmlkZW8oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWRlbyksIHt9LCB7XG4gICAgICAgIHBsYXlsaXN0czogdmlkZW9QbGF5bGlzdHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBpZCAhPT0gZWw7XG4gICAgICAgIH0pXG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3ZSBuZWVkIHRvIGRpc2FibGUgdGhlIHN1Ym1pdCBidXR0b25cbiAgICovXG4gIHZhciBpc1N1Ym1pdERpc2FibGVkID0gZnVuY3Rpb24gaXNTdWJtaXREaXNhYmxlZCgpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2aWRlb1BsYXlsaXN0cykpIHtcbiAgICAgIHJldHVybiB2aWRlb1BsYXlsaXN0cy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogU3VibWl0IHRvIGJhY2tlbmRcbiAgICpcbiAgICogQHJldHVybiB7bnVsbH1cbiAgICovXG4gIHZhciBzYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uIHNhdmVDaGFuZ2VzKCkge1xuICAgIHNldElzU2F2aW5nKHRydWUpO1xuICAgIGRpc3BhdGNoKHVwZGF0ZVZpZGVvKHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIHZpZGVvOiB7XG4gICAgICAgIHBsYXlsaXN0OiB2aWRlb1BsYXlsaXN0c1xuICAgICAgfVxuICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgdmFyIF9yZXNwb25zZSRwYXlsb2FkO1xuICAgICAgaWYgKHJlc3BvbnNlICE9PSBudWxsICYmIHJlc3BvbnNlICE9PSB2b2lkIDAgJiYgKF9yZXNwb25zZSRwYXlsb2FkID0gcmVzcG9uc2UucGF5bG9hZCkgIT09IG51bGwgJiYgX3Jlc3BvbnNlJHBheWxvYWQgIT09IHZvaWQgMCAmJiBfcmVzcG9uc2UkcGF5bG9hZC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIERpc3BsYXkgTm90aWNlXG4gICAgICAgIGRpc3BhdGNoKGFkZE5vdGljZSh7XG4gICAgICAgICAgbWVzc2FnZTogc3ByaW50ZihfXygnUGxheWxpc3RzIG9mIFwiJXNcIiB3YXMgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuJywgJ3dwbXVkZXZfdmlkcycpLCB2aWRlb190aXRsZSlcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIENsb3NlIHRoZSBtb2RhbFxuICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEaXNwbGF5IEVycm9yIE5vdGljZVxuICAgICAgICBkaXNwYXRjaChhZGROb3RpY2Uoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogc3ByaW50ZihfXygnVXBkYXRpbmcg4oCcJXPigJ0gZmFpbGVkLicsICd3cG11ZGV2X3ZpZHMnKSwgdmlkZW9fdGl0bGUpXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldElzU2F2aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhCb3gsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4cyhCb3guSGVhZGVyLCB7XG4gICAgICBjbGFzc05hbWU6IGhlYWRlckNsYXNzZXMsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KEljb25CdXR0b24sIHtcbiAgICAgICAgb3V0bGluZWQ6IGZhbHNlLFxuICAgICAgICBjbGFzc05hbWU6IFwic3VpLWJ1dHRvbi1mbG9hdC0tcmlnaHRcIixcbiAgICAgICAgb25DbGljazogY2xvc2VNb2RhbCxcbiAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLWNsb3NlXCIpLFxuICAgICAgICBpY29uOiBcImNsb3NlXCIsXG4gICAgICAgIGxhYmVsOiBfXygnQ2xvc2UgdGhpcyBkaWFsb2cuJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KSwgLyojX19QVVJFX18qL19qc3goQm94LlRpdGxlLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJzdWktbGdcIixcbiAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXRpdGxlXCIpLFxuICAgICAgICBjaGlsZHJlbjogX18oJ0FkZCB0byBwbGF5bGlzdCcsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5EZXNjcmlwdGlvbiwge1xuICAgICAgICBpZDogXCJcIi5jb25jYXQobW9kYWxJRCwgXCItdGl0bGVcIiksXG4gICAgICAgIGNoaWxkcmVuOiBzcHJpbnRmKF9fKCdDaG9vc2Ugd2hpY2ggcGxheWxpc3RzIHlvdSB3YW50IHRvIGFkZCB0aGUgXCIlc1wiIHZpZGVvIHRvLiBJdCB3aWxsIGJlIGF2YWlsYWJsZSBmb3IgcGVvcGxlIHRvIHdhdGNoIGlmIHRoZXkgY2FuIGFjY2VzcyB0aGUgcGxheWxpc3QuJywgJ3dwbXVkZXZfdmlkcycpLCB2aWRlb190aXRsZSlcbiAgICAgIH0pXVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCb3guQm9keSwge1xuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1mb3JtLWZpZWxkXCIsXG4gICAgICAgIGNoaWxkcmVuOiBwbGF5bGlzdHMubWFwKGZ1bmN0aW9uIChwbGF5bGlzdCkge1xuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeChDaGVja2JveCwge1xuICAgICAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG1vZGFsSUQsIFwiLXBsYXlsaXN0LVwiKS5jb25jYXQocGxheWxpc3QuaWQpLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInN1aS1jaGVja2JveC1zbVwiLFxuICAgICAgICAgICAgaXNTdGFja2VkOiB0cnVlLFxuICAgICAgICAgICAgY2hlY2tlZDogaXNQbGF5bGlzdENoZWNrZWQocGxheWxpc3QuaWQpLFxuICAgICAgICAgICAgbGFiZWw6IHBsYXlsaXN0LnRpdGxlLFxuICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0b2dnbGVQbGF5bGlzdChwbGF5bGlzdC5pZCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHBsYXlsaXN0LmlkKTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5Gb290ZXIsIHtcbiAgICAgIGlzRmxhdHRlbjogdHJ1ZSxcbiAgICAgIGlzQ2VudGVyZWQ6IHRydWUsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goQnV0dG9uLCB7XG4gICAgICAgIGNvbG9yOiBcImJsdWVcIixcbiAgICAgICAgb25Mb2FkaW5nVGV4dDogX18oJ1VwZGF0aW5nIHBsYXlsaXN0JywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgICBpc0xvYWRpbmc6IGlzU2F2aW5nLFxuICAgICAgICBkaXNhYmxlZDogaXNTdWJtaXREaXNhYmxlZCgpLFxuICAgICAgICBvbkNsaWNrOiBzYXZlQ2hhbmdlcyxcbiAgICAgICAgY2hpbGRyZW46IF9fKCdBZGQgdG8gUGxheWxpc3QnLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgRWRpdFBsYXlsaXN0czsiLCJleHBvcnQgKiBmcm9tICcuL0NyZWF0ZUN1c3RvbVZpZGVvJztcbmV4cG9ydCAqIGZyb20gJy4vRWRpdFZpZGVvJztcbmV4cG9ydCAqIGZyb20gJy4vRGVsZXRlVmlkZW8nO1xuZXhwb3J0ICogZnJvbSAnLi9FZGl0VGl0bGUnO1xuZXhwb3J0ICogZnJvbSAnLi9FZGl0UGxheWxpc3RzJzsiLCJmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkocikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXkocikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KHIpIHsgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IHJbU3ltYm9sLml0ZXJhdG9yXSB8fCBudWxsICE9IHJbXCJAQGl0ZXJhdG9yXCJdKSByZXR1cm4gQXJyYXkuZnJvbShyKTsgfVxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyKTsgfVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkociwgZSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKHIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBlKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgZSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkgeyBpZiAocikgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpOyB2YXIgdCA9IHt9LnRvU3RyaW5nLmNhbGwocikuc2xpY2UoOCwgLTEpOyByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDsgfSB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAobnVsbCAhPSB0KSB7IHZhciBlLCBuLCBpLCB1LCBhID0gW10sIGYgPSAhMCwgbyA9ICExOyB0cnkgeyBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7IGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjsgZiA9ICExOyB9IGVsc2UgZm9yICg7ICEoZiA9IChlID0gaS5jYWxsKHQpKS5kb25lKSAmJiAoYS5wdXNoKGUudmFsdWUpLCBhLmxlbmd0aCAhPT0gbCk7IGYgPSAhMCk7IH0gY2F0Y2ggKHIpIHsgbyA9ICEwLCBuID0gcjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFmICYmIG51bGwgIT0gdC5yZXR1cm4gJiYgKHUgPSB0LnJldHVybigpLCBPYmplY3QodSkgIT09IHUpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChvKSB0aHJvdyBuOyB9IH0gcmV0dXJuIGE7IH0gfVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKHIpIHsgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiByOyB9XG4vKipcbiAqIExpYnJhcnkgY29tcG9uZW50c1xuICovXG5pbXBvcnQgeyBCb3gsIEljb24sIE1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgdXNlTW9kYWwgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvaG9va3MnO1xuXG4vKipcbiAqIEludGVybmFsIGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBnZXRWaWRlb3MsIGdldEZpbHRlcmVkSWRzLCBnZXRMb2FkaW5nU3RhdHVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3RvcmUvc2xpY2VzL3ZpZGVvcyc7XG5pbXBvcnQgeyBWaWRlb1JvdyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvJztcbmltcG9ydCB7IGV4cGlyZWRNZW1iZXIsIHZhbGlkTWVtYmVyLCBkYXNoQ29ubmVjdGVkIH0gZnJvbSAnLi4vLi4vLi4vLi4vaGVscGVycy91dGlscyc7XG5pbXBvcnQgeyBEYXNoTm90aWNlLCBFeHBpcmVkTm90aWNlLCBVcGdyYWRlTm90aWNlLCBHb1RvcEJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgRWRpdFZpZGVvLCBEZWxldGVWaWRlbywgRWRpdFRpdGxlLCBFZGl0UGxheWxpc3RzIH0gZnJvbSAnLi4vLi4vbW9kYWxzLyc7XG5cbi8qKlxuICogRXh0ZXJuYWwgRGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IENsaXBib2FyZEpTIGZyb20gJ2NsaXBib2FyZCc7XG5pbXBvcnQgeyB1c2VMb2NhdGlvbiB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIFZpZGVvc0JveCgpIHtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKHt9KSxcbiAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICBjdXJyZW50VmlkZW8gPSBfdXNlU3RhdGUyWzBdLFxuICAgIHNldEN1cnJlbnRWaWRlbyA9IF91c2VTdGF0ZTJbMV07XG5cbiAgLy8gdmlkZW9zIGxpc3RcbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZSh7XG4gICAgICBjdXN0b206IFtdLFxuICAgICAgZGVmYXVsdDogW11cbiAgICB9KSxcbiAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgdmlkZW9zID0gX3VzZVN0YXRlNFswXSxcbiAgICBzZXRWaWRlb3MgPSBfdXNlU3RhdGU0WzFdO1xuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKCksXG4gICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLFxuICAgIG9wZW5lZElkID0gX3VzZVN0YXRlNlswXSxcbiAgICBzZXRPcGVuZWRJZCA9IF91c2VTdGF0ZTZbMV07XG4gIHZhciB2aWRlb3NPYmplY3QgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICByZXR1cm4gZ2V0VmlkZW9zKHN0YXRlKTtcbiAgfSk7XG4gIHZhciBmaWx0ZXJlZCA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBnZXRGaWx0ZXJlZElkcyhzdGF0ZSk7XG4gIH0pO1xuICB2YXIgaXNMb2FkaW5nID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIGdldExvYWRpbmdTdGF0dXMoc3RhdGUpO1xuICB9KTtcbiAgdmFyIHZpZGVvc0hhc0luaXRpYXRlZCA9IE9iamVjdC5rZXlzKHZpZGVvc09iamVjdCkubGVuZ3RoID4gMDtcblxuICAvLyBFZGl0IE1vZGFsXG4gIHZhciBlZGl0TW9kYWxJRCA9ICd3cG11ZGV2LXZpZGVvcy12aWRlby1lZGl0LW1vZGFsJztcbiAgdmFyIF91c2VNb2RhbCA9IHVzZU1vZGFsKHtcbiAgICAgIGlkOiBlZGl0TW9kYWxJRFxuICAgIH0pLFxuICAgIF91c2VNb2RhbDIgPSBfc2xpY2VkVG9BcnJheShfdXNlTW9kYWwsIDIpLFxuICAgIG9wZW5FZGl0TW9kYWwgPSBfdXNlTW9kYWwyWzBdLFxuICAgIGNsb3NlRWRpdE1vZGFsID0gX3VzZU1vZGFsMlsxXTtcblxuICAvLyBEZWxldGUgTW9kYWxcbiAgdmFyIGRlbGV0ZU1vZGFsSUQgPSAnd3BtdWRldi12aWRlb3MtdmlkZW8tZGVsZXRlLW1vZGFsJztcbiAgdmFyIF91c2VNb2RhbDMgPSB1c2VNb2RhbCh7XG4gICAgICBpZDogZGVsZXRlTW9kYWxJRFxuICAgIH0pLFxuICAgIF91c2VNb2RhbDQgPSBfc2xpY2VkVG9BcnJheShfdXNlTW9kYWwzLCAyKSxcbiAgICBvcGVuRGVsZXRlTW9kYWwgPSBfdXNlTW9kYWw0WzBdLFxuICAgIGNsb3NlRGVsZXRlTW9kYWwgPSBfdXNlTW9kYWw0WzFdO1xuXG4gIC8vIFRpdGxlIE1vZGFsXG4gIHZhciB0aXRsZU1vZGFsSUQgPSAnd3BtdWRldi12aWRlb3MtdmlkZW8tdGl0bGUtbW9kYWwnO1xuICB2YXIgX3VzZU1vZGFsNSA9IHVzZU1vZGFsKHtcbiAgICAgIGlkOiB0aXRsZU1vZGFsSURcbiAgICB9KSxcbiAgICBfdXNlTW9kYWw2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1vZGFsNSwgMiksXG4gICAgb3BlblRpdGxlTW9kYWwgPSBfdXNlTW9kYWw2WzBdLFxuICAgIGNsb3NlVGl0bGVNb2RhbCA9IF91c2VNb2RhbDZbMV07XG5cbiAgLy8gUGxheWxpc3RzIE1vZGFsXG4gIHZhciBwbGF5bGlzdHNNb2RhbElEID0gJ3dwbXVkZXYtdmlkZW9zLXZpZGVvLXBsYXlsaXN0LW1vZGFsJztcbiAgdmFyIF91c2VNb2RhbDcgPSB1c2VNb2RhbCh7XG4gICAgICBpZDogcGxheWxpc3RzTW9kYWxJRFxuICAgIH0pLFxuICAgIF91c2VNb2RhbDggPSBfc2xpY2VkVG9BcnJheShfdXNlTW9kYWw3LCAyKSxcbiAgICBvcGVuUGxheWxpc3RzTW9kYWwgPSBfdXNlTW9kYWw4WzBdLFxuICAgIGNsb3NlUGxheWxpc3RzTW9kYWwgPSBfdXNlTW9kYWw4WzFdO1xuICB2YXIgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xuXG4gIC8qKlxuICAgKiBHZXQgdmlkZW9zIGxpc3QgJiB1cGRhdGUgdGhlIHN0YXRlXG4gICAqXG4gICAqIFdlIHdpbGwgdXNlIHRoZSBmaWx0ZXJlZCBsaXN0IHRvIGluY2x1ZGVcbiAgICogc2VhcmNoIHJlc3VsdHMuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgdXBkYXRlVmlkZW9zTGlzdCA9IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvc0xpc3QoKSB7XG4gICAgdmFyIHZpZGVvcyA9IHtcbiAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgY3VzdG9tOiBbXVxuICAgIH07XG5cbiAgICAvLyBHZXQgZmlsdGVyZWQgaWRzIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgdmFyIGZpbHRlcmVkQ29weSA9IF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJlZCk7XG4gICAgdmFyIHNvcnRlZCA9IGZpbHRlcmVkQ29weS5zb3J0KCkucmV2ZXJzZSgpO1xuICAgIHNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgaWYgKHZpZGVvc09iamVjdFtpZF0pIHtcbiAgICAgICAgdmFyIHZpZGVvID0gdmlkZW9zT2JqZWN0W2lkXTtcbiAgICAgICAgLy8gR2V0IHRoZSB2aWRlbyBvYmplY3QuXG4gICAgICAgIGlmICgnZGVmYXVsdCcgPT09IHZpZGVvLnZpZGVvX3R5cGUpIHtcbiAgICAgICAgICAvLyBEZWZhdWx0IHZpZGVvcy5cbiAgICAgICAgICB2aWRlb3MuZGVmYXVsdC5wdXNoKHZpZGVvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDdXN0b20gdmlkZW9zLlxuICAgICAgICAgIHZpZGVvcy5jdXN0b20ucHVzaCh2aWRlbyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBzZXRWaWRlb3ModmlkZW9zKTtcbiAgfTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBVcGRhdGUgdmlkZW9zIGxpc3RcbiAgICB1cGRhdGVWaWRlb3NMaXN0KCk7XG4gIH0sIFtmaWx0ZXJlZCwgdmlkZW9zT2JqZWN0XSk7XG4gIHZhciBib3hDbGFzc2VzID0gY2xhc3NuYW1lcyh7XG4gICAgbG9hZGluZzogaXNMb2FkaW5nXG4gIH0pO1xuXG4gIC8vIEluaXRpYWxpemUgY2xpcGJvYXJkIGxpYnJhcnlcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBuZXcgQ2xpcGJvYXJkSlMoJy5pdnQtY29weS1zaG9ydGNvZGUnKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjdXJyZW50IG1lbWJlcnNoaXAgbmVlZHMgYW4gdXBncmFkZS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHZhciBzaG91bGRVcGdyYWRlID0gZnVuY3Rpb24gc2hvdWxkVXBncmFkZSgpIHtcbiAgICByZXR1cm4gIWV4cGlyZWRNZW1iZXIoKSAmJiAhdmFsaWRNZW1iZXIoKSAmJiBkYXNoQ29ubmVjdGVkKCk7XG4gIH07XG4gIHZhciBkaXNwbGF5Tm90aWNlcyA9IC8qI19fUFVSRV9fKi9fanN4KF9GcmFnbWVudCwge30pO1xuICBpZiAoc2hvdWxkVXBncmFkZSgpKSB7XG4gICAgZGlzcGxheU5vdGljZXMgPSAvKiNfX1BVUkVfXyovX2pzeChVcGdyYWRlTm90aWNlLCB7fSk7XG4gIH0gZWxzZSBpZiAoIXNob3VsZFVwZ3JhZGUoKSAmJiBleHBpcmVkTWVtYmVyKCkpIHtcbiAgICBkaXNwbGF5Tm90aWNlcyA9IC8qI19fUFVSRV9fKi9fanN4KEV4cGlyZWROb3RpY2UsIHt9KTtcbiAgfSBlbHNlIHtcbiAgICBkaXNwbGF5Tm90aWNlcyA9IC8qI19fUFVSRV9fKi9fanN4KERhc2hOb3RpY2UsIHt9KTtcbiAgfVxuXG4gIC8vIHNob3VsZCBkaXNhYmxlIHJvdyBmb3IgZGVmYXVsdCB2aWRlb3NcbiAgdmFyIHNob3VsZERpc2FibGVEZWZhdWx0ID0gIXZhbGlkTWVtYmVyKCkgfHwgZXhwaXJlZE1lbWJlcigpO1xuXG4gIC8vIEhhbmRsZSByb3V0ZXMgY29taW5nIGZyb20gZGFzaGJvYXJkIHBhZ2VcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodmlkZW9zSGFzSW5pdGlhdGVkKSB7XG4gICAgICAvLyByZWdleCB0byBtYXRjaCB3aXRoIHVybCBwYXRobmFtZVxuICAgICAgdmFyIHBhdHRlcm4gPSAvXihcXC8odmlld3xlZGl0fHBsYXlsaXN0fGRlbGV0ZSkpXFwvKFxcZCspJC87XG4gICAgICB2YXIgbWF0Y2hlcyA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgdmFyIF9tYXRjaGVzID0gX3NsaWNlZFRvQXJyYXkobWF0Y2hlcywgNCksXG4gICAgICAgICAgYWN0aW9uID0gX21hdGNoZXNbMl0sXG4gICAgICAgICAgdmlkZW9JRCA9IF9tYXRjaGVzWzNdO1xuXG4gICAgICAgIC8vIFZpZXcgVmlkZW86IE9wZW4gY29ycmVzcG9uZGFudCBhY2NvcmRpb25cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgICAgc2V0T3BlbmVkSWQoTnVtYmVyKHZpZGVvSUQpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQbGF5bGlzdDogT3BlbiBwbGF5bGlzdHMgbW9kYWxcbiAgICAgICAgaWYgKHZpZGVvc09iamVjdFt2aWRlb0lEXSAmJiBhY3Rpb24gPT09ICdwbGF5bGlzdCcpIHtcbiAgICAgICAgICBzZXRDdXJyZW50VmlkZW8odmlkZW9zT2JqZWN0W3ZpZGVvSURdKTtcbiAgICAgICAgICBvcGVuUGxheWxpc3RzTW9kYWwoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlZGl0OiBPcGVuIGVkaXQgbW9kYWxcbiAgICAgICAgaWYgKHZpZGVvc09iamVjdFt2aWRlb0lEXSAmJiBhY3Rpb24gPT09ICdlZGl0Jykge1xuICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlb3NPYmplY3RbdmlkZW9JRF0pO1xuICAgICAgICAgIGlmICh2aWRlb3NPYmplY3RbdmlkZW9JRF0udmlkZW9fdHlwZSA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgIC8vIEVkaXQgbW9kYWwgZm9yIGN1c3RvbSB2aWRlb3NcbiAgICAgICAgICAgIG9wZW5FZGl0TW9kYWwoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRWRpdCB0aXRsZSBtb2RhbCBmb3IgZGVmYXVsdCB2aWRlb3NcbiAgICAgICAgICAgIG9wZW5UaXRsZU1vZGFsKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZWRpdDogT3BlbiBkZWxldGUgY29uZmlybWF0aW9uIG1vZGFsXG4gICAgICAgIGlmICh2aWRlb3NPYmplY3RbdmlkZW9JRF0gJiYgYWN0aW9uID09PSAnZGVsZXRlJykge1xuICAgICAgICAgIHNldEN1cnJlbnRWaWRlbyh2aWRlb3NPYmplY3RbdmlkZW9JRF0pO1xuICAgICAgICAgIGlmICh2aWRlb3NPYmplY3RbdmlkZW9JRF0udmlkZW9fdHlwZSA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgIG9wZW5EZWxldGVNb2RhbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3ZpZGVvc0hhc0luaXRpYXRlZF0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKF9GcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goTW9kYWwsIHtcbiAgICAgIGlkOiBlZGl0TW9kYWxJRCxcbiAgICAgIHNpemU6IFwibGdcIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChFZGl0VmlkZW8sIHtcbiAgICAgICAgdmlkZW86IGN1cnJlbnRWaWRlbyxcbiAgICAgICAgbW9kYWxJRDogZWRpdE1vZGFsSUQsXG4gICAgICAgIGNsb3NlTW9kYWw6IGNsb3NlRWRpdE1vZGFsXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChNb2RhbCwge1xuICAgICAgaWQ6IGRlbGV0ZU1vZGFsSUQsXG4gICAgICBzaXplOiBcInNtXCIsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goRGVsZXRlVmlkZW8sIHtcbiAgICAgICAgdmlkZW86IGN1cnJlbnRWaWRlbyxcbiAgICAgICAgbW9kYWxJRDogZGVsZXRlTW9kYWxJRCxcbiAgICAgICAgY2xvc2VNb2RhbDogY2xvc2VEZWxldGVNb2RhbCxcbiAgICAgICAgc2V0Q3VycmVudFZpZGVvOiBzZXRDdXJyZW50VmlkZW9cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KE1vZGFsLCB7XG4gICAgICBpZDogdGl0bGVNb2RhbElELFxuICAgICAgc2l6ZTogXCJzbVwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEVkaXRUaXRsZSwge1xuICAgICAgICB2aWRlbzogY3VycmVudFZpZGVvLFxuICAgICAgICBtb2RhbElEOiB0aXRsZU1vZGFsSUQsXG4gICAgICAgIGNsb3NlTW9kYWw6IGNsb3NlVGl0bGVNb2RhbCxcbiAgICAgICAgc2V0Q3VycmVudFZpZGVvOiBzZXRDdXJyZW50VmlkZW9cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KE1vZGFsLCB7XG4gICAgICBpZDogcGxheWxpc3RzTW9kYWxJRCxcbiAgICAgIHNpemU6IFwic21cIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChFZGl0UGxheWxpc3RzLCB7XG4gICAgICAgIHZpZGVvOiBjdXJyZW50VmlkZW8sXG4gICAgICAgIG1vZGFsSUQ6IHBsYXlsaXN0c01vZGFsSUQsXG4gICAgICAgIGNsb3NlTW9kYWw6IGNsb3NlUGxheWxpc3RzTW9kYWwsXG4gICAgICAgIHNldEN1cnJlbnRWaWRlbzogc2V0Q3VycmVudFZpZGVvXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeHMoQm94LCB7XG4gICAgICBpZDogXCJ3cG11ZGV2LXZpZGVvcy12aWRlb3MtbGlzdFwiLFxuICAgICAgY2xhc3NOYW1lOiBib3hDbGFzc2VzLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeHMoXCJwXCIsIHtcbiAgICAgICAgcm9sZTogXCJhbGVydFwiLFxuICAgICAgICBjbGFzc05hbWU6IFwibG9hZGluZy10ZXh0XCIsXG4gICAgICAgIFwiYXJpYS1saXZlXCI6IFwicG9saXRlXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goSWNvbiwge1xuICAgICAgICAgIGljb246IFwibG9hZGVyXCIsXG4gICAgICAgICAgc2l6ZTogXCJtZFwiLFxuICAgICAgICAgIGFuaW1hdGU6IHRydWVcbiAgICAgICAgfSksIF9fKCdMb2FkaW5nLi4uJywgJ3dwbXVkZXZfdmlkcycpXVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5IZWFkZXIsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEJveC5UaXRsZSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBfXygnQXZhaWxhYmxlIFZpZGVvcycsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KEJveC5Cb2R5LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBfXygnQWRkLCBlZGl0IGFuZCB2aWV3IHZpZGVvIHR1dG9yaWFscyBhbGwgaW4gb25lIGhhbmR5IHBsYWNlLicsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb25cIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcImRpdlwiLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcIndwbXVkZXYtdmlkZW9zLWFjY29yZGlvbi0taGVhZGVyXCIsXG4gICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb24tLXJvd1wiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLS1jb2wtbGFyZ2VcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IF9fKCdWaWRlbyB0aXRsZScsICd3cG11ZGV2X3ZpZHMnKVxuICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ3cG11ZGV2LXZpZGVvcy1hY2NvcmRpb24tLWNvbC1zbWFsbFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogX18oJ0R1cmF0aW9uJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgdmlkZW9zLmN1c3RvbS5sZW5ndGggPiAwICYmIHZpZGVvcy5jdXN0b20ubWFwKGZ1bmN0aW9uICh2aWRlbykge1xuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeChWaWRlb1Jvdywge1xuICAgICAgICAgICAgb3BlbmVkSWQ6IG9wZW5lZElkLFxuICAgICAgICAgICAgc2V0T3BlbmVkSWQ6IHNldE9wZW5lZElkLFxuICAgICAgICAgICAgdmlkZW86IHZpZGVvLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2V0Q3VycmVudFZpZGVvOiBzZXRDdXJyZW50VmlkZW8sXG4gICAgICAgICAgICBvcGVuRWRpdE1vZGFsOiBvcGVuRWRpdE1vZGFsLFxuICAgICAgICAgICAgb3BlbkRlbGV0ZU1vZGFsOiBvcGVuRGVsZXRlTW9kYWwsXG4gICAgICAgICAgICBvcGVuUGxheWxpc3RzTW9kYWw6IG9wZW5QbGF5bGlzdHNNb2RhbFxuICAgICAgICAgIH0sIHZpZGVvLmlkKTtcbiAgICAgICAgfSksICF2YWxpZE1lbWJlcigpICYmIC8qI19fUFVSRV9fKi9fanN4KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwid3BtdWRldi12aWRlb3MtYWNjb3JkaW9uLS1ub3RpY2VcIixcbiAgICAgICAgICBjaGlsZHJlbjogZGlzcGxheU5vdGljZXNcbiAgICAgICAgfSksIHZpZGVvcy5kZWZhdWx0Lmxlbmd0aCA+IDAgJiYgdmlkZW9zLmRlZmF1bHQubWFwKGZ1bmN0aW9uICh2aWRlbykge1xuICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeChWaWRlb1Jvdywge1xuICAgICAgICAgICAgb3BlbmVkSWQ6IG9wZW5lZElkLFxuICAgICAgICAgICAgc2V0T3BlbmVkSWQ6IHNldE9wZW5lZElkLFxuICAgICAgICAgICAgdmlkZW86IHZpZGVvLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHNob3VsZERpc2FibGVEZWZhdWx0LFxuICAgICAgICAgICAgc2V0Q3VycmVudFZpZGVvOiBzZXRDdXJyZW50VmlkZW8sXG4gICAgICAgICAgICBvcGVuRGVsZXRlTW9kYWw6IG9wZW5EZWxldGVNb2RhbCxcbiAgICAgICAgICAgIG9wZW5UaXRsZU1vZGFsOiBvcGVuVGl0bGVNb2RhbCxcbiAgICAgICAgICAgIG9wZW5QbGF5bGlzdHNNb2RhbDogb3BlblBsYXlsaXN0c01vZGFsXG4gICAgICAgICAgfSwgdmlkZW8uaWQpO1xuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goR29Ub3BCdXR0b24sIHt9KV1cbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZGVvc0JveDsiLCJleHBvcnQgKiBmcm9tICcuL1ZpZGVvc0JveCc7IiwiLyoqXG4gKiBMaWJyYXJ5IGRlcGVuZGVuY2llc1xuICovXG5pbXBvcnQgeyBCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvY29tcG9uZW50cyc7XG5cbi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IEltYWdlVGFnIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tcG9uZW50cyc7XG5cbi8qKlxuICogRXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgX18sIHNwcmludGYgfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IHsgSW50ZXJ3ZWF2ZSB9IGZyb20gJ2ludGVyd2VhdmUnO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBmdW5jdGlvbiBFbXB0eUJveChfcmVmKSB7XG4gIHZhciBfd2luZG93JGl2dFZhcnMkd2hpdGUsIF93aW5kb3ckaXZ0VmFycztcbiAgdmFyIHNlYXJjaCA9IF9yZWYuc2VhcmNoO1xuICB2YXIgX3JlZjIgPSAoX3dpbmRvdyRpdnRWYXJzJHdoaXRlID0gKF93aW5kb3ckaXZ0VmFycyA9IHdpbmRvdy5pdnRWYXJzKSA9PT0gbnVsbCB8fCBfd2luZG93JGl2dFZhcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3ckaXZ0VmFycy53aGl0ZWxhYmVsKSAhPT0gbnVsbCAmJiBfd2luZG93JGl2dFZhcnMkd2hpdGUgIT09IHZvaWQgMCA/IF93aW5kb3ckaXZ0VmFycyR3aGl0ZSA6IHt9LFxuICAgIGhpZGVfYnJhbmRpbmcgPSBfcmVmMi5oaWRlX2JyYW5kaW5nO1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKEJveCwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnc3VpLW1lc3NhZ2UnLCAnc3VpLW1lc3NhZ2UtbGcnKSxcbiAgICBjaGlsZHJlbjogWyFoaWRlX2JyYW5kaW5nICYmIC8qI19fUFVSRV9fKi9fanN4KEltYWdlVGFnLCB7XG4gICAgICBzcmM6IFwibWVzc2FnZS9uby1yZXN1bHRzLnBuZ1wiLFxuICAgICAgY2xhc3NOYW1lOiBcInN1aS1pbWFnZVwiLFxuICAgICAgYWx0OiBfXygnRW1wdHkgcmVzdWx0cycsICd3cG11ZGV2X3ZpZHMnKVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3VpLW1lc3NhZ2UtY29udGVudFwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChJbnRlcndlYXZlLCB7XG4gICAgICAgICAgY29udGVudDogc3ByaW50ZihfXyhcIldlIGNvdWxkbid0IGZpbmQgYW55IHZpZGVvcyBtYXRjaGluZyB5b3VyIHNlYXJjaCA8c3Ryb25nPuKAnCVz4oCdPC9zdHJvbmc+LiBQbGVhc2UgdHJ5IGFnYWluXCIpLCBzZWFyY2gpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IEVtcHR5Qm94OyIsImV4cG9ydCAqIGZyb20gJy4vRW1wdHlCb3gnOyIsImV4cG9ydCAqIGZyb20gJy4vU3VtbWFyeUJveCc7XG5leHBvcnQgKiBmcm9tICcuL1ZpZGVvc0JveCc7XG5leHBvcnQgKiBmcm9tICcuL0VtcHR5Qm94JzsiLCJmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7IH1cbi8qKlxuICogTGlicmFyeSBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgSGVhZGVyLCBCdXR0b24sIFRvcE5vdGljZSwgTW9kYWwgfSBmcm9tICcuLi8uLi9saWIvY29tcG9uZW50cyc7XG5pbXBvcnQgeyB1c2VNb2RhbCB9IGZyb20gJy4uLy4uL2xpYi9ob29rcyc7XG5cbi8qKlxuICogSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG4gKi9cbmltcG9ydCB7IGdldEN1cnJlbnROb3RpY2UgfSBmcm9tICcuLi8uLi9zdG9yZS9zbGljZXMvbm90aWNlJztcbmltcG9ydCB7IFZpZGVvc0JveCwgU3VtbWFyeUJveCwgRW1wdHlCb3ggfSBmcm9tICcuL3BhcnRpYWxzJztcbmltcG9ydCB7IGluaXRQbGF5bGlzdHMgfSBmcm9tICcuLi8uLi9zdG9yZS9zbGljZXMvcGxheWxpc3RzJztcbmltcG9ydCB7IGluaXRWaWRlb3MgfSBmcm9tICcuLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCB7IFBhZ2VGb290ZXIgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzJztcbmltcG9ydCB7IENyZWF0ZUN1c3RvbVZpZGVvIH0gZnJvbSAnLi9tb2RhbHMnO1xuaW1wb3J0IHsgZ2V0RmlsdGVyZWRJZHMgfSBmcm9tICcuLi8uLi9zdG9yZS9zbGljZXMvdmlkZW9zJztcbmltcG9ydCAnLi9zdHlsZXMvbWFpbi5zY3NzJztcblxuLyoqXG4gKiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcbiAqL1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IsIHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUxvY2F0aW9uIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIEFwcCgpIHtcbiAgdmFyIF93aW5kb3ckaXZ0VmFycztcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCcnKSxcbiAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICBzZWFyY2ggPSBfdXNlU3RhdGUyWzBdLFxuICAgIHNldFNlYXJjaCA9IF91c2VTdGF0ZTJbMV07XG4gIHZhciBmaWx0ZXJlZCA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBnZXRGaWx0ZXJlZElkcyhzdGF0ZSk7XG4gIH0pO1xuICB2YXIgY3VycmVudE5vdGljZSA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBnZXRDdXJyZW50Tm90aWNlKHN0YXRlKTtcbiAgfSk7XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG5cbiAgLy8gTm90aWNlIERhdGFcbiAgdmFyIGlkID0gY3VycmVudE5vdGljZS5pZCxcbiAgICBtZXNzYWdlID0gY3VycmVudE5vdGljZS5tZXNzYWdlLFxuICAgIHR5cGUgPSBjdXJyZW50Tm90aWNlLnR5cGUsXG4gICAgZGlzbWlzcyA9IGN1cnJlbnROb3RpY2UuZGlzbWlzcztcblxuICAvLyBBZGQgQ3VzdG9tIFZpZGVvIE1vZGFsXG4gIHZhciBjdXN0b21WaWRlb01vZGFsSWQgPSAnd3BtdWRldi12aWRlb3MtdmlkZW8tY3JlYXRlLW1vZGFsJztcbiAgdmFyIF91c2VNb2RhbCA9IHVzZU1vZGFsKHtcbiAgICAgIGlkOiBjdXN0b21WaWRlb01vZGFsSWRcbiAgICB9KSxcbiAgICBfdXNlTW9kYWwyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1vZGFsLCAyKSxcbiAgICBvcGVuVmlkZW9Nb2RhbCA9IF91c2VNb2RhbDJbMF0sXG4gICAgY2xvc2VWaWRlb01vZGFsID0gX3VzZU1vZGFsMlsxXTtcblxuICAvKipcbiAgICogTG9hZCBkYXRhIG9uIG1vdW50XG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIC8vIExvYWQgdmlkZW9zXG4gICAgZGlzcGF0Y2goaW5pdFZpZGVvcygpKTtcblxuICAgIC8vIExvYWQgUGxheWxpc3RzXG4gICAgZGlzcGF0Y2goaW5pdFBsYXlsaXN0cygpKTtcbiAgfSwgW10pO1xuXG4gIC8vIEdsb2JhbCBWYXJpYWJsZXNcbiAgdmFyIF9yZWYgPSAoX3dpbmRvdyRpdnRWYXJzID0gd2luZG93Lml2dFZhcnMpICE9PSBudWxsICYmIF93aW5kb3ckaXZ0VmFycyAhPT0gdm9pZCAwID8gX3dpbmRvdyRpdnRWYXJzIDoge30sXG4gICAgaGlkZV9kb2NfbGluayA9IF9yZWYud2hpdGVsYWJlbC5oaWRlX2RvY19saW5rO1xuICB2YXIgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xuXG4gIC8vIEhhbmRlbGluZyByb3V0ZXMgY29taW5nIGZyb20gZGFzaGJhb3JkXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgaWYgKHBhdGhuYW1lLnNsaWNlKDEpID09PSAnY3JlYXRlJykge1xuICAgICAgb3BlblZpZGVvTW9kYWwoKTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInN1aS13cmFwXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChNb2RhbCwge1xuICAgICAgc2l6ZTogXCJsZ1wiLFxuICAgICAgaWQ6IGN1c3RvbVZpZGVvTW9kYWxJZCxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChDcmVhdGVDdXN0b21WaWRlbywge1xuICAgICAgICBjbG9zZU1vZGFsOiBjbG9zZVZpZGVvTW9kYWwsXG4gICAgICAgIG1vZGFsSUQ6IGN1c3RvbVZpZGVvTW9kYWxJZFxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goSGVhZGVyLCB7XG4gICAgICBzaG93RG9jTGluazogIWhpZGVfZG9jX2xpbmssXG4gICAgICBkb2NMaW5rOiBcImh0dHBzOi8vd3BtdWRldi5jb20vZG9jcy93cG11LWRldi1wbHVnaW5zL2ludGVncmF0ZWQtdmlkZW8tdHV0b3JpYWxzL1wiLFxuICAgICAgZG9jVGV4dDogX18oJ1ZpZXcgRG9jdW1lbnRhdGlvbicsICd3cG11ZGV2X3ZpZHMnKSxcbiAgICAgIHRpdGxlOiBfXygnVmlkZW9zJywgJ3dwbXVkZXZfdmlkcycpLFxuICAgICAgYWN0aW9uc0xlZnQ6IC8qI19fUFVSRV9fKi9fanN4KEJ1dHRvbiwge1xuICAgICAgICBpY29uOiBcInBsdXNcIixcbiAgICAgICAgY29sb3I6IFwiYmx1ZVwiLFxuICAgICAgICBvbkNsaWNrOiBvcGVuVmlkZW9Nb2RhbCxcbiAgICAgICAgY2hpbGRyZW46IF9fKCdBZGQgQ3VzdG9tIFZpZGVvJywgJ3dwbXVkZXZfdmlkcycpXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwic3VpLWZsb2F0aW5nLW5vdGljZXNcIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChUb3BOb3RpY2UsIHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBkaXNtaXNzOiBkaXNtaXNzLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBsYWJlbDogX18oJ0Rpc21pc3MgdGhpcyBub3RpY2UnLCAnd3BtdWRldl92aWRzJylcbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFN1bW1hcnlCb3gsIHtcbiAgICAgIHNlYXJjaDogc2VhcmNoLFxuICAgICAgc2V0U2VhcmNoOiBzZXRTZWFyY2hcbiAgICB9KSwgc2VhcmNoICYmIGZpbHRlcmVkLmxlbmd0aCA9PT0gMCAmJiAvKiNfX1BVUkVfXyovX2pzeChFbXB0eUJveCwge1xuICAgICAgc2VhcmNoOiBzZWFyY2hcbiAgICB9KSwgZmlsdGVyZWQubGVuZ3RoICE9IDAgJiYgLyojX19QVVJFX18qL19qc3goVmlkZW9zQm94LCB7fSksIC8qI19fUFVSRV9fKi9fanN4KFBhZ2VGb290ZXIsIHt9KV1cbiAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBBcHA7IiwiaW1wb3J0IHsgU3RyaWN0TW9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHN0b3JlIGZyb20gJy4uLy4uL3N0b3JlL3N0b3JlJztcbmltcG9ydCB7IEhhc2hSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3BtdWRldi12aWRlb3MtdmlkZW9zLWFwcCcpKTtcbnJvb3QucmVuZGVyKCAvKiNfX1BVUkVfXyovX2pzeChTdHJpY3RNb2RlLCB7XG4gIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeChQcm92aWRlciwge1xuICAgIHN0b3JlOiBzdG9yZSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goSGFzaFJvdXRlciwge1xuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEFwcCwge30pXG4gICAgfSlcbiAgfSlcbn0pKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///748\n')},9317:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A1: function() { return /* binding */ getFiltered; },\n/* harmony export */   Eo: function() { return /* binding */ getPlaylists; },\n/* harmony export */   cM: function() { return /* binding */ initPlaylists; }\n/* harmony export */ });\n/* unused harmony exports savePlaylist, createPlaylist, orderChange, deletePlaylist, bulkDelete, isPlaylistSelected, isVideoSelected, areAllSelected, getSelectedPlaylists, getLoadingStatus, setPlaylist, updatePlaylistKey, togglePlaylist, toggleVideo, toggleAll */\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8740);\n/* harmony import */ var _helpers_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9331);\n/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4214);\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1081);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\n\n\n\n\n\n/***************************************************\n *\n * Asynchronous Requests\n *\n * *************************************************/\n/**\n * Initialize the playlist list\n *\n * @return {Promise}\n */\nvar initPlaylists = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/init\',\n// Redux action type\nfunction (params) {\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restGet */ .B8)({\n    path: \'playlists\',\n    params: params\n  });\n});\n\n/**\n * Save a single playlist changes to database\n *\n * @return {Promise}\n */\nvar savePlaylist = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/updateSinglePlaylist\',\n// Redux action type\nfunction (data) {\n  var playlist = data.playlist,\n    id = data.id;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restPost */ .J8)({\n    path: "playlists/".concat(id),\n    data: playlist\n  });\n});\n\n/**\n * Create a new playlist\n *\n * @return {Promise}\n */\nvar createPlaylist = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/createPlaylist\',\n/*#__PURE__*/\n// Redux action type\nfunction () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data, _ref) {\n    var rejectWithValue, playlist;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          rejectWithValue = _ref.rejectWithValue;\n          playlist = data.playlist;\n          _context.prev = 2;\n          _context.next = 5;\n          return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restPost */ .J8)({\n            path: "playlists",\n            data: playlist\n          });\n        case 5:\n          return _context.abrupt("return", _context.sent);\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context["catch"](2);\n          return _context.abrupt("return", rejectWithValue(_context.t0));\n        case 11:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[2, 8]]);\n  }));\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n/**\n * Change Playlist Order\n *\n * @return {void}\n */\nvar orderChange = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/changePlaylistOrder\',\n// Redux action type\n\nfunction (data) {\n  var playlistID = data.playlistID,\n    oldIndex = data.oldIndex,\n    newIndex = data.newIndex;\n  if (playlistID > 0 && oldIndex !== newIndex) {\n    (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restGet */ .B8)({\n      path: \'playlists/reorder\',\n      params: {\n        playlist: playlistID,\n        from: oldIndex,\n        to: newIndex\n      }\n    });\n  }\n});\n\n/**\n * Delete a playlist\n *\n * @return {Promise}\n */\nvar deletePlaylist = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/deletePlaylist\',\n// Redux action type\nfunction (data) {\n  var id = data.id;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restDelete */ ._8)({\n    path: "playlists/".concat(id)\n  });\n});\n\n/**\n * Bulk delete playlists & videos\n *\n * @return {Promise}\n */\nvar bulkDelete = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'playlists/bulkDelete\',\n// Redux action type\nfunction (data) {\n  var selected = data.selected;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restPost */ .J8)({\n    path: "playlists/bulk-actions",\n    data: {\n      action: \'delete\',\n      items: selected\n    }\n  });\n});\n\n/***************************************************\n *\n * Playlists Slice\n *\n * *************************************************/\nvar playlistsSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createSlice */ .Z0)({\n  name: \'playlists\',\n  /***************************************************\n   *\n   * Initial State\n   *\n   * *************************************************/\n\n  initialState: {\n    playlists: {},\n    filtered: [],\n    selected: {},\n    isLoading: false\n  },\n  /***************************************************\n   *\n   * Reducers\n   *\n   * *************************************************/\n  reducers: {\n    /**\n     * Update a single playlist in the playlists list\n     *\n     * If playlist exist, it will replace the playlist object,\n     * if not, it will add the playlist object.\n     *\n     * @param {object} state Current state.\n     * @param {object} action action data.\n     */\n    setPlaylist: function setPlaylist(state, action) {\n      var playlist = action.payload.playlist;\n      var playlists = state.playlists;\n      var newPlaylists = _objectSpread(_objectSpread({}, playlists), {}, _defineProperty({}, playlist.id, playlist));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        playlists: newPlaylists\n      });\n    },\n    /**\n     * Select or deselect a playlist ( checkbox )\n     *\n     * @return {void}\n     */\n    togglePlaylist: function togglePlaylist(state, action) {\n      var _state$playlists, _selected$id;\n      var _action$payload = action.payload,\n        checked = _action$payload.checked,\n        id = _action$payload.id;\n      var allVideos = (_state$playlists = state.playlists) === null || _state$playlists === void 0 || (_state$playlists = _state$playlists[id]) === null || _state$playlists === void 0 ? void 0 : _state$playlists.videos;\n\n      // The new selected object\n      var selected = _objectSpread(_objectSpread({}, state.selected), {}, _defineProperty({}, id, {\n        selected: checked,\n        videos: checked && allVideos || []\n      }));\n\n      // If playlist is not selected and no videos are selected,\n      // remove the playlist\n      if ((selected === null || selected === void 0 || (_selected$id = selected[id]) === null || _selected$id === void 0 || (_selected$id = _selected$id.videos) === null || _selected$id === void 0 ? void 0 : _selected$id.length) === 0 && !checked) {\n        delete selected[id];\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        selected: selected\n      });\n    },\n    /**\n     * Select or de-select all playlists and videos ( checkbox )\n     *\n     * @return {void}\n     */\n    toggleAll: function toggleAll(state, action) {\n      var checked = action.payload.checked;\n      var playlists = state.playlists;\n\n      // The new selected object\n      var newSelected = {};\n      if (checked === true) {\n        Object.keys(playlists).forEach(function (id) {\n          newSelected[id] = {\n            selected: true,\n            videos: (playlists === null || playlists === void 0 ? void 0 : playlists[id].videos) || []\n          };\n        });\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        selected: newSelected\n      });\n    },\n    /**\n     * Update selected videos list ( checkbox )\n     *\n     * @return {void}\n     */\n    toggleVideo: function toggleVideo(state, action) {\n      var _selected$playlistID, _selected$playlistID2;\n      var _action$payload2 = action.payload,\n        videoID = _action$payload2.videoID,\n        playlistID = _action$payload2.playlistID;\n      var selected = state.selected;\n      var videos = (selected === null || selected === void 0 || (_selected$playlistID = selected[playlistID]) === null || _selected$playlistID === void 0 ? void 0 : _selected$playlistID.videos) || [];\n\n      // The new selected object\n      var newSelected = {};\n\n      // The new videos array\n      var newVideos = [];\n\n      // Toggle video\n      if (videos.includes(videoID)) {\n        // Remove video if it exists\n        newVideos = videos.filter(function (el) {\n          return el !== videoID;\n        });\n      } else {\n        // Add video if it doesn\'t exist\n        newVideos = [].concat(_toConsumableArray(videos), [videoID]);\n      }\n      var isPlaylistSelected = (selected === null || selected === void 0 || (_selected$playlistID2 = selected[playlistID]) === null || _selected$playlistID2 === void 0 ? void 0 : _selected$playlistID2.selected) || false;\n\n      // Update selected object\n      newSelected = _objectSpread(_objectSpread({}, selected), {}, _defineProperty({}, playlistID, {\n        selected: isPlaylistSelected,\n        videos: newVideos\n      }));\n\n      /* If playlist is not selected and no video is selected,\n      remove the playlist */\n      if (newVideos.length === 0 && !isPlaylistSelected) {\n        delete newSelected[playlistID];\n      }\n\n      // Set the state\n      return _objectSpread(_objectSpread({}, state), {}, {\n        selected: newSelected\n      });\n    }\n  },\n  /***************************************************\n   *\n   * Extra Reducers\n   *\n   * Manage of asynchronous requests states\n   *\n   * *************************************************/\n  extraReducers: function extraReducers(builder) {\n    builder\n    // Playlists Init\n    .addCase(initPlaylists.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(initPlaylists.fulfilled, function (state, action) {\n      state.isLoading = false;\n      var payload = action.payload;\n      if (payload.success && payload.data) {\n        var playlists = {};\n        var filtered = [];\n\n        // Setup the list data.\n        payload.data.forEach(function (playlist) {\n          playlists[playlist.id] = playlist;\n          filtered.push(playlist.id);\n        });\n\n        // update the state\n        state.playlists = playlists;\n        state.filtered = filtered;\n      }\n    }).addCase(initPlaylists.rejected, function (state) {\n      state.isLoading = false;\n    })\n    // Save Playlist\n    .addCase(savePlaylist.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(savePlaylist.fulfilled, function (state, action) {\n      var data = action.payload.data;\n      var playlists = state.playlists;\n      var newPlaylists = _objectSpread(_objectSpread({}, playlists), {}, _defineProperty({}, data.id, data));\n      state.isLoading = false;\n      state.playlists = newPlaylists;\n    }).addCase(savePlaylist.rejected, function (state) {\n      state.isLoading = false;\n    })\n    // Create Playlist\n    .addCase(createPlaylist.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(createPlaylist.fulfilled, function (state, action) {\n      var _action$payload3 = action.payload,\n        data = _action$payload3.data,\n        success = _action$payload3.success;\n      if (success && data) {\n        var playlists = state.playlists,\n          filtered = state.filtered;\n        // update the list in the store\n        state.playlists = _objectSpread(_objectSpread({}, playlists), {}, _defineProperty({}, data.id, data));\n        state.filtered = [].concat(_toConsumableArray(filtered), [data.id]);\n      }\n      state.isLoading = false;\n    }).addCase(createPlaylist.rejected, function (state) {\n      state.isLoading = false;\n    })\n    // Delete Playlist\n    .addCase(deletePlaylist.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(deletePlaylist.fulfilled, function (state, action) {\n      var id = action.meta.arg.id,\n        success = action.payload.success;\n\n      // Remove the playlist if success\n      if (success === true) {\n        var playlists = state.playlists,\n          filtered = state.filtered;\n        var newPlaylists = _objectSpread({}, playlists);\n        delete newPlaylists[id];\n        // update the list in the store\n        state.playlists = _objectSpread({}, newPlaylists);\n        state.filtered = filtered.filter(function (item) {\n          return item !== id;\n        });\n      }\n      state.isLoading = false;\n    }).addCase(deletePlaylist.rejected, function (state) {\n      state.isLoading = false;\n    })\n    // Bulk Delete\n    .addCase(bulkDelete.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(bulkDelete.fulfilled, function (state) {\n      state.isLoading = false;\n\n      // Empty the selected list\n      state.selected = [];\n    }).addCase(bulkDelete.rejected, function (state) {\n      state.isLoading = false;\n\n      // Empty the selected list\n      state.selected = [];\n    });\n  }\n});\n\n/***************************************************\n *\n * Selectors\n *\n * *************************************************/\n\nvar playlistsState = function playlistsState(state) {\n  return state.playlists;\n};\n\n/**\n * Get playlists object\n *\n * @param {object} playlistsState the playlists object.\n *\n * @return {object}\n */\nvar getPlaylists = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (playlistsState) {\n  return playlistsState.playlists;\n});\n\n/**\n * Get filtered array\n *\n * @param {object} playlistsState the playlists object.\n *\n * @return {array}\n */\nvar getFiltered = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (playlistsState) {\n  return playlistsState.filtered;\n});\n\n/**\n * Checks if the playlist is selected\n *\n * @param {object} playlistsState the playlists object.\n * @param {number} id playlist id\n *\n * @return {boolean}\n */\nvar isPlaylistSelected = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (_, id) {\n  return id;\n}, function (playlistsState, id) {\n  var _playlistsState$selec;\n  return (_playlistsState$selec = playlistsState.selected) === null || _playlistsState$selec === void 0 || (_playlistsState$selec = _playlistsState$selec[id]) === null || _playlistsState$selec === void 0 ? void 0 : _playlistsState$selec.selected;\n});\n\n/**\n * Checks if video is selected\n *\n * @param {object} playlistsState the playlists object.\n * @param {object} ids playlistID & videoID\n *\n * @return {boolean}\n */\nvar isVideoSelected = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (_, ids) {\n  return ids;\n}, function (playlistsState, ids) {\n  var _playlistsState$selec2;\n  var _ref3 = ids !== null && ids !== void 0 ? ids : {},\n    playlistID = _ref3.playlistID,\n    videoID = _ref3.videoID;\n  var videos = ((_playlistsState$selec2 = playlistsState.selected) === null || _playlistsState$selec2 === void 0 || (_playlistsState$selec2 = _playlistsState$selec2[playlistID]) === null || _playlistsState$selec2 === void 0 ? void 0 : _playlistsState$selec2.videos) || [];\n  return videos.includes(videoID);\n});\n\n/**\n * Check of all videos and playlists are selected\n *\n * @param {object} playlistsState the playlists object.\n * @return {boolean}\n *\n */\nvar areAllSelected = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (playlistsState) {\n  var playlists = playlistsState.playlists,\n    selected = playlistsState.selected;\n\n  // return false if at least one playlist is not selected\n  for (var playlistId in playlists) {\n    var _selected$playlistId, _playlists$playlistId, _selected$playlistId2;\n    var isSelected = (selected === null || selected === void 0 || (_selected$playlistId = selected[playlistId]) === null || _selected$playlistId === void 0 ? void 0 : _selected$playlistId.selected) || false;\n    if (!isSelected) {\n      return false;\n    }\n\n    // return false if at least one video is not selected\n    var allVideos = (playlists === null || playlists === void 0 || (_playlists$playlistId = playlists[playlistId]) === null || _playlists$playlistId === void 0 ? void 0 : _playlists$playlistId.videos) || [];\n    var selectedVideos = (selected === null || selected === void 0 || (_selected$playlistId2 = selected[playlistId]) === null || _selected$playlistId2 === void 0 ? void 0 : _selected$playlistId2.videos) || [];\n\n    // It suffices to compare lengths only\n    if (allVideos.length !== selectedVideos.length) {\n      return false;\n    }\n  }\n  return Object.keys(playlists).length > 0;\n});\n\n/**\n * Get selected Playlists & videos\n *\n * @param {object} playlistsState the playlists object.\n *\n * @return {object}\n */\nvar getSelectedPlaylists = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (playlistsState) {\n  return playlistsState.selected;\n});\n\n/**\n * Get Loading status\n *\n * @param {object} playlistsState the playlists object.\n *\n * @return {*}\n */\nvar getLoadingStatus = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(playlistsState, function (playlistsState) {\n  return playlistsState.isLoading;\n});\n\n// Export actions\nvar _playlistsSlice$actio = playlistsSlice.actions,\n  setPlaylist = _playlistsSlice$actio.setPlaylist,\n  updatePlaylistKey = _playlistsSlice$actio.updatePlaylistKey,\n  togglePlaylist = _playlistsSlice$actio.togglePlaylist,\n  toggleVideo = _playlistsSlice$actio.toggleVideo,\n  toggleAll = _playlistsSlice$actio.toggleAll;\n\n/* harmony default export */ __webpack_exports__.Ay = (playlistsSlice.reducer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMxNy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dwbXVkZXYtdmlkZW9zLy4vYXBwL3NyYy9zdG9yZS9zbGljZXMvcGxheWxpc3RzLmpzPzQwNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KHIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhyKSB8fCBfaXRlcmFibGVUb0FycmF5KHIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHsgaWYgKHIpIHsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKTsgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTsgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7IH0gfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShyKSB7IGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgbnVsbCAhPSByW1N5bWJvbC5pdGVyYXRvcl0gfHwgbnVsbCAhPSByW1wiQEBpdGVyYXRvclwiXSkgcmV0dXJuIEFycmF5LmZyb20ocik7IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhyKSB7IGlmIChBcnJheS5pc0FycmF5KHIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkocik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHsgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpOyBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTsgcmV0dXJuIG47IH1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KGUsIHIsIHQpIHsgcmV0dXJuIChyID0gX3RvUHJvcGVydHlLZXkocikpIGluIGUgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgeyB2YWx1ZTogdCwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSA6IGVbcl0gPSB0LCBlOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX3JlZ2VuZXJhdG9yUnVudGltZSgpIHsgXCJ1c2Ugc3RyaWN0XCI7IC8qISByZWdlbmVyYXRvci1ydW50aW1lIC0tIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiAtLSBsaWNlbnNlIChNSVQpOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvYmxvYi9tYWluL0xJQ0VOU0UgKi8gX3JlZ2VuZXJhdG9yUnVudGltZSA9IGZ1bmN0aW9uIF9yZWdlbmVyYXRvclJ1bnRpbWUoKSB7IHJldHVybiBlOyB9OyB2YXIgdCwgZSA9IHt9LCByID0gT2JqZWN0LnByb3RvdHlwZSwgbiA9IHIuaGFzT3duUHJvcGVydHksIG8gPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgfHwgZnVuY3Rpb24gKHQsIGUsIHIpIHsgdFtlXSA9IHIudmFsdWU7IH0sIGkgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCA/IFN5bWJvbCA6IHt9LCBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIiwgYyA9IGkuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiLCB1ID0gaS50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjsgZnVuY3Rpb24gZGVmaW5lKHQsIGUsIHIpIHsgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7IHZhbHVlOiByLCBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwIH0pLCB0W2VdOyB9IHRyeSB7IGRlZmluZSh7fSwgXCJcIik7IH0gY2F0Y2ggKHQpIHsgZGVmaW5lID0gZnVuY3Rpb24gZGVmaW5lKHQsIGUsIHIpIHsgcmV0dXJuIHRbZV0gPSByOyB9OyB9IGZ1bmN0aW9uIHdyYXAodCwgZSwgciwgbikgeyB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLCBhID0gT2JqZWN0LmNyZWF0ZShpLnByb3RvdHlwZSksIGMgPSBuZXcgQ29udGV4dChuIHx8IFtdKTsgcmV0dXJuIG8oYSwgXCJfaW52b2tlXCIsIHsgdmFsdWU6IG1ha2VJbnZva2VNZXRob2QodCwgciwgYykgfSksIGE7IH0gZnVuY3Rpb24gdHJ5Q2F0Y2godCwgZSwgcikgeyB0cnkgeyByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IHQuY2FsbChlLCByKSB9OyB9IGNhdGNoICh0KSB7IHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiB0IH07IH0gfSBlLndyYXAgPSB3cmFwOyB2YXIgaCA9IFwic3VzcGVuZGVkU3RhcnRcIiwgbCA9IFwic3VzcGVuZGVkWWllbGRcIiwgZiA9IFwiZXhlY3V0aW5nXCIsIHMgPSBcImNvbXBsZXRlZFwiLCB5ID0ge307IGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9IGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge30gZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fSB2YXIgcCA9IHt9OyBkZWZpbmUocCwgYSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSk7IHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLCB2ID0gZCAmJiBkKGQodmFsdWVzKFtdKSkpOyB2ICYmIHYgIT09IHIgJiYgbi5jYWxsKHYsIGEpICYmIChwID0gdik7IHZhciBnID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID0gR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocCk7IGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyh0KSB7IFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGRlZmluZSh0LCBlLCBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5faW52b2tlKGUsIHQpOyB9KTsgfSk7IH0gZnVuY3Rpb24gQXN5bmNJdGVyYXRvcih0LCBlKSB7IGZ1bmN0aW9uIGludm9rZShyLCBvLCBpLCBhKSB7IHZhciBjID0gdHJ5Q2F0Y2godFtyXSwgdCwgbyk7IGlmIChcInRocm93XCIgIT09IGMudHlwZSkgeyB2YXIgdSA9IGMuYXJnLCBoID0gdS52YWx1ZTsgcmV0dXJuIGggJiYgXCJvYmplY3RcIiA9PSBfdHlwZW9mKGgpICYmIG4uY2FsbChoLCBcIl9fYXdhaXRcIikgPyBlLnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh0KSB7IGludm9rZShcIm5leHRcIiwgdCwgaSwgYSk7IH0sIGZ1bmN0aW9uICh0KSB7IGludm9rZShcInRocm93XCIsIHQsIGksIGEpOyB9KSA6IGUucmVzb2x2ZShoKS50aGVuKGZ1bmN0aW9uICh0KSB7IHUudmFsdWUgPSB0LCBpKHUpOyB9LCBmdW5jdGlvbiAodCkgeyByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgdCwgaSwgYSk7IH0pOyB9IGEoYy5hcmcpOyB9IHZhciByOyBvKHRoaXMsIFwiX2ludm9rZVwiLCB7IHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0LCBuKSB7IGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkgeyByZXR1cm4gbmV3IGUoZnVuY3Rpb24gKGUsIHIpIHsgaW52b2tlKHQsIG4sIGUsIHIpOyB9KTsgfSByZXR1cm4gciA9IHIgPyByLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7IH0gfSk7IH0gZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChlLCByLCBuKSB7IHZhciBvID0gaDsgcmV0dXJuIGZ1bmN0aW9uIChpLCBhKSB7IGlmIChvID09PSBmKSB0aHJvdyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7IGlmIChvID09PSBzKSB7IGlmIChcInRocm93XCIgPT09IGkpIHRocm93IGE7IHJldHVybiB7IHZhbHVlOiB0LCBkb25lOiAhMCB9OyB9IGZvciAobi5tZXRob2QgPSBpLCBuLmFyZyA9IGE7OykgeyB2YXIgYyA9IG4uZGVsZWdhdGU7IGlmIChjKSB7IHZhciB1ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShjLCBuKTsgaWYgKHUpIHsgaWYgKHUgPT09IHkpIGNvbnRpbnVlOyByZXR1cm4gdTsgfSB9IGlmIChcIm5leHRcIiA9PT0gbi5tZXRob2QpIG4uc2VudCA9IG4uX3NlbnQgPSBuLmFyZztlbHNlIGlmIChcInRocm93XCIgPT09IG4ubWV0aG9kKSB7IGlmIChvID09PSBoKSB0aHJvdyBvID0gcywgbi5hcmc7IG4uZGlzcGF0Y2hFeGNlcHRpb24obi5hcmcpOyB9IGVsc2UgXCJyZXR1cm5cIiA9PT0gbi5tZXRob2QgJiYgbi5hYnJ1cHQoXCJyZXR1cm5cIiwgbi5hcmcpOyBvID0gZjsgdmFyIHAgPSB0cnlDYXRjaChlLCByLCBuKTsgaWYgKFwibm9ybWFsXCIgPT09IHAudHlwZSkgeyBpZiAobyA9IG4uZG9uZSA/IHMgOiBsLCBwLmFyZyA9PT0geSkgY29udGludWU7IHJldHVybiB7IHZhbHVlOiBwLmFyZywgZG9uZTogbi5kb25lIH07IH0gXCJ0aHJvd1wiID09PSBwLnR5cGUgJiYgKG8gPSBzLCBuLm1ldGhvZCA9IFwidGhyb3dcIiwgbi5hcmcgPSBwLmFyZyk7IH0gfTsgfSBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpIHsgdmFyIG4gPSByLm1ldGhvZCwgbyA9IGUuaXRlcmF0b3Jbbl07IGlmIChvID09PSB0KSByZXR1cm4gci5kZWxlZ2F0ZSA9IG51bGwsIFwidGhyb3dcIiA9PT0gbiAmJiBlLml0ZXJhdG9yLnJldHVybiAmJiAoci5tZXRob2QgPSBcInJldHVyblwiLCByLmFyZyA9IHQsIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgciksIFwidGhyb3dcIiA9PT0gci5tZXRob2QpIHx8IFwicmV0dXJuXCIgIT09IG4gJiYgKHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICdcIiArIG4gKyBcIicgbWV0aG9kXCIpKSwgeTsgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7IGlmIChcInRocm93XCIgPT09IGkudHlwZSkgcmV0dXJuIHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IGkuYXJnLCByLmRlbGVnYXRlID0gbnVsbCwgeTsgdmFyIGEgPSBpLmFyZzsgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTsgfSBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkgeyB2YXIgZSA9IHsgdHJ5TG9jOiB0WzBdIH07IDEgaW4gdCAmJiAoZS5jYXRjaExvYyA9IHRbMV0pLCAyIGluIHQgJiYgKGUuZmluYWxseUxvYyA9IHRbMl0sIGUuYWZ0ZXJMb2MgPSB0WzNdKSwgdGhpcy50cnlFbnRyaWVzLnB1c2goZSk7IH0gZnVuY3Rpb24gcmVzZXRUcnlFbnRyeSh0KSB7IHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9OyBlLnR5cGUgPSBcIm5vcm1hbFwiLCBkZWxldGUgZS5hcmcsIHQuY29tcGxldGlvbiA9IGU7IH0gZnVuY3Rpb24gQ29udGV4dCh0KSB7IHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV0sIHQuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpLCB0aGlzLnJlc2V0KCEwKTsgfSBmdW5jdGlvbiB2YWx1ZXMoZSkgeyBpZiAoZSB8fCBcIlwiID09PSBlKSB7IHZhciByID0gZVthXTsgaWYgKHIpIHJldHVybiByLmNhbGwoZSk7IGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7IGlmICghaXNOYU4oZS5sZW5ndGgpKSB7IHZhciBvID0gLTEsIGkgPSBmdW5jdGlvbiBuZXh0KCkgeyBmb3IgKDsgKytvIDwgZS5sZW5ndGg7KSBpZiAobi5jYWxsKGUsIG8pKSByZXR1cm4gbmV4dC52YWx1ZSA9IGVbb10sIG5leHQuZG9uZSA9ICExLCBuZXh0OyByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICEwLCBuZXh0OyB9OyByZXR1cm4gaS5uZXh0ID0gaTsgfSB9IHRocm93IG5ldyBUeXBlRXJyb3IoX3R5cGVvZihlKSArIFwiIGlzIG5vdCBpdGVyYWJsZVwiKTsgfSByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIG8oZywgXCJjb25zdHJ1Y3RvclwiLCB7IHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgY29uZmlndXJhYmxlOiAhMCB9KSwgbyhHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCB7IHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvbiwgY29uZmlndXJhYmxlOiAhMCB9KSwgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIiksIGUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ICYmIHQuY29uc3RydWN0b3I7IHJldHVybiAhIWUgJiYgKGUgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8IFwiR2VuZXJhdG9yRnVuY3Rpb25cIiA9PT0gKGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lKSk7IH0sIGUubWFyayA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YodCwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKHQuX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZSh0LCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSwgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGcpLCB0OyB9LCBlLmF3cmFwID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHsgX19hd2FpdDogdCB9OyB9LCBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpLCBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pLCBlLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yLCBlLmFzeW5jID0gZnVuY3Rpb24gKHQsIHIsIG4sIG8sIGkpIHsgdm9pZCAwID09PSBpICYmIChpID0gUHJvbWlzZSk7IHZhciBhID0gbmV3IEFzeW5jSXRlcmF0b3Iod3JhcCh0LCByLCBuLCBvKSwgaSk7IHJldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24ocikgPyBhIDogYS5uZXh0KCkudGhlbihmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5kb25lID8gdC52YWx1ZSA6IGEubmV4dCgpOyB9KTsgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKGcpLCBkZWZpbmUoZywgdSwgXCJHZW5lcmF0b3JcIiksIGRlZmluZShnLCBhLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSwgZGVmaW5lKGcsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjsgfSksIGUua2V5cyA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gT2JqZWN0KHQpLCByID0gW107IGZvciAodmFyIG4gaW4gZSkgci5wdXNoKG4pOyByZXR1cm4gci5yZXZlcnNlKCksIGZ1bmN0aW9uIG5leHQoKSB7IGZvciAoOyByLmxlbmd0aDspIHsgdmFyIHQgPSByLnBvcCgpOyBpZiAodCBpbiBlKSByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICExLCBuZXh0OyB9IHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDsgfTsgfSwgZS52YWx1ZXMgPSB2YWx1ZXMsIENvbnRleHQucHJvdG90eXBlID0geyBjb25zdHJ1Y3RvcjogQ29udGV4dCwgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGUpIHsgaWYgKHRoaXMucHJldiA9IDAsIHRoaXMubmV4dCA9IDAsIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB0LCB0aGlzLmRvbmUgPSAhMSwgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMuYXJnID0gdCwgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSksICFlKSBmb3IgKHZhciByIGluIHRoaXMpIFwidFwiID09PSByLmNoYXJBdCgwKSAmJiBuLmNhbGwodGhpcywgcikgJiYgIWlzTmFOKCtyLnNsaWNlKDEpKSAmJiAodGhpc1tyXSA9IHQpOyB9LCBzdG9wOiBmdW5jdGlvbiBzdG9wKCkgeyB0aGlzLmRvbmUgPSAhMDsgdmFyIHQgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjsgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZzsgcmV0dXJuIHRoaXMucnZhbDsgfSwgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uIGRpc3BhdGNoRXhjZXB0aW9uKGUpIHsgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTsgdmFyIHIgPSB0aGlzOyBmdW5jdGlvbiBoYW5kbGUobiwgbykgeyByZXR1cm4gYS50eXBlID0gXCJ0aHJvd1wiLCBhLmFyZyA9IGUsIHIubmV4dCA9IG4sIG8gJiYgKHIubWV0aG9kID0gXCJuZXh0XCIsIHIuYXJnID0gdCksICEhbzsgfSBmb3IgKHZhciBvID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IG8gPj0gMDsgLS1vKSB7IHZhciBpID0gdGhpcy50cnlFbnRyaWVzW29dLCBhID0gaS5jb21wbGV0aW9uOyBpZiAoXCJyb290XCIgPT09IGkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpOyBpZiAoaS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7IHZhciBjID0gbi5jYWxsKGksIFwiY2F0Y2hMb2NcIiksIHUgPSBuLmNhbGwoaSwgXCJmaW5hbGx5TG9jXCIpOyBpZiAoYyAmJiB1KSB7IGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTsgaWYgKHRoaXMucHJldiA8IGkuZmluYWxseUxvYykgcmV0dXJuIGhhbmRsZShpLmZpbmFsbHlMb2MpOyB9IGVsc2UgaWYgKGMpIHsgaWYgKHRoaXMucHJldiA8IGkuY2F0Y2hMb2MpIHJldHVybiBoYW5kbGUoaS5jYXRjaExvYywgITApOyB9IGVsc2UgeyBpZiAoIXUpIHRocm93IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7IGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTsgfSB9IH0gfSwgYWJydXB0OiBmdW5jdGlvbiBhYnJ1cHQodCwgZSkgeyBmb3IgKHZhciByID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7IHZhciBvID0gdGhpcy50cnlFbnRyaWVzW3JdOyBpZiAoby50cnlMb2MgPD0gdGhpcy5wcmV2ICYmIG4uY2FsbChvLCBcImZpbmFsbHlMb2NcIikgJiYgdGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKSB7IHZhciBpID0gbzsgYnJlYWs7IH0gfSBpICYmIChcImJyZWFrXCIgPT09IHQgfHwgXCJjb250aW51ZVwiID09PSB0KSAmJiBpLnRyeUxvYyA8PSBlICYmIGUgPD0gaS5maW5hbGx5TG9jICYmIChpID0gbnVsbCk7IHZhciBhID0gaSA/IGkuY29tcGxldGlvbiA6IHt9OyByZXR1cm4gYS50eXBlID0gdCwgYS5hcmcgPSBlLCBpID8gKHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMubmV4dCA9IGkuZmluYWxseUxvYywgeSkgOiB0aGlzLmNvbXBsZXRlKGEpOyB9LCBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodCwgZSkgeyBpZiAoXCJ0aHJvd1wiID09PSB0LnR5cGUpIHRocm93IHQuYXJnOyByZXR1cm4gXCJicmVha1wiID09PSB0LnR5cGUgfHwgXCJjb250aW51ZVwiID09PSB0LnR5cGUgPyB0aGlzLm5leHQgPSB0LmFyZyA6IFwicmV0dXJuXCIgPT09IHQudHlwZSA/ICh0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHQuYXJnLCB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCIsIHRoaXMubmV4dCA9IFwiZW5kXCIpIDogXCJub3JtYWxcIiA9PT0gdC50eXBlICYmIGUgJiYgKHRoaXMubmV4dCA9IGUpLCB5OyB9LCBmaW5pc2g6IGZ1bmN0aW9uIGZpbmlzaCh0KSB7IGZvciAodmFyIGUgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgZSA+PSAwOyAtLWUpIHsgdmFyIHIgPSB0aGlzLnRyeUVudHJpZXNbZV07IGlmIChyLmZpbmFsbHlMb2MgPT09IHQpIHJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbiwgci5hZnRlckxvYyksIHJlc2V0VHJ5RW50cnkociksIHk7IH0gfSwgY2F0Y2g6IGZ1bmN0aW9uIF9jYXRjaCh0KSB7IGZvciAodmFyIGUgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgZSA+PSAwOyAtLWUpIHsgdmFyIHIgPSB0aGlzLnRyeUVudHJpZXNbZV07IGlmIChyLnRyeUxvYyA9PT0gdCkgeyB2YXIgbiA9IHIuY29tcGxldGlvbjsgaWYgKFwidGhyb3dcIiA9PT0gbi50eXBlKSB7IHZhciBvID0gbi5hcmc7IHJlc2V0VHJ5RW50cnkocik7IH0gcmV0dXJuIG87IH0gfSB0aHJvdyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTsgfSwgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24gZGVsZWdhdGVZaWVsZChlLCByLCBuKSB7IHJldHVybiB0aGlzLmRlbGVnYXRlID0geyBpdGVyYXRvcjogdmFsdWVzKGUpLCByZXN1bHROYW1lOiByLCBuZXh0TG9jOiBuIH0sIFwibmV4dFwiID09PSB0aGlzLm1ldGhvZCAmJiAodGhpcy5hcmcgPSB0KSwgeTsgfSB9LCBlOyB9XG5mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAobiwgdCwgZSwgciwgbywgYSwgYykgeyB0cnkgeyB2YXIgaSA9IG5bYV0oYyksIHUgPSBpLnZhbHVlOyB9IGNhdGNoIChuKSB7IHJldHVybiB2b2lkIGUobik7IH0gaS5kb25lID8gdCh1KSA6IFByb21pc2UucmVzb2x2ZSh1KS50aGVuKHIsIG8pOyB9XG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciB0ID0gdGhpcywgZSA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyLCBvKSB7IHZhciBhID0gbi5hcHBseSh0LCBlKTsgZnVuY3Rpb24gX25leHQobikgeyBhc3luY0dlbmVyYXRvclN0ZXAoYSwgciwgbywgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIG4pOyB9IGZ1bmN0aW9uIF90aHJvdyhuKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChhLCByLCBvLCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIG4pOyB9IF9uZXh0KHZvaWQgMCk7IH0pOyB9OyB9XG5pbXBvcnQgeyBjcmVhdGVTbGljZSwgY3JlYXRlQXN5bmNUaHVuayB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuaW1wb3J0IHsgcmVzdFBvc3QsIHJlc3RHZXQsIHJlc3REZWxldGUgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2FwaSc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcbiAqIEFzeW5jaHJvbm91cyBSZXF1ZXN0c1xuICpcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIHBsYXlsaXN0IGxpc3RcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIGluaXRQbGF5bGlzdHMgPSBjcmVhdGVBc3luY1RodW5rKCdwbGF5bGlzdHMvaW5pdCcsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKHBhcmFtcykge1xuICByZXR1cm4gcmVzdEdldCh7XG4gICAgcGF0aDogJ3BsYXlsaXN0cycsXG4gICAgcGFyYW1zOiBwYXJhbXNcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBTYXZlIGEgc2luZ2xlIHBsYXlsaXN0IGNoYW5nZXMgdG8gZGF0YWJhc2VcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIHNhdmVQbGF5bGlzdCA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3BsYXlsaXN0cy91cGRhdGVTaW5nbGVQbGF5bGlzdCcsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIHBsYXlsaXN0ID0gZGF0YS5wbGF5bGlzdCxcbiAgICBpZCA9IGRhdGEuaWQ7XG4gIHJldHVybiByZXN0UG9zdCh7XG4gICAgcGF0aDogXCJwbGF5bGlzdHMvXCIuY29uY2F0KGlkKSxcbiAgICBkYXRhOiBwbGF5bGlzdFxuICB9KTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBwbGF5bGlzdFxuICpcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCB2YXIgY3JlYXRlUGxheWxpc3QgPSBjcmVhdGVBc3luY1RodW5rKCdwbGF5bGlzdHMvY3JlYXRlUGxheWxpc3QnLFxuLyojX19QVVJFX18qL1xuLy8gUmVkdXggYWN0aW9uIHR5cGVcbmZ1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKGRhdGEsIF9yZWYpIHtcbiAgICB2YXIgcmVqZWN0V2l0aFZhbHVlLCBwbGF5bGlzdDtcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZWplY3RXaXRoVmFsdWUgPSBfcmVmLnJlamVjdFdpdGhWYWx1ZTtcbiAgICAgICAgICBwbGF5bGlzdCA9IGRhdGEucGxheWxpc3Q7XG4gICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7XG4gICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7XG4gICAgICAgICAgcmV0dXJuIHJlc3RQb3N0KHtcbiAgICAgICAgICAgIHBhdGg6IFwicGxheWxpc3RzXCIsXG4gICAgICAgICAgICBkYXRhOiBwbGF5bGlzdFxuICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dC5zZW50KTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4O1xuICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbXCJjYXRjaFwiXSgyKTtcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIHJlamVjdFdpdGhWYWx1ZShfY29udGV4dC50MCkpO1xuICAgICAgICBjYXNlIDExOlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDhdXSk7XG4gIH0pKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyKSB7XG4gICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59KCkpO1xuXG4vKipcbiAqIENoYW5nZSBQbGF5bGlzdCBPcmRlclxuICpcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCB2YXIgb3JkZXJDaGFuZ2UgPSBjcmVhdGVBc3luY1RodW5rKCdwbGF5bGlzdHMvY2hhbmdlUGxheWxpc3RPcmRlcicsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuXG5mdW5jdGlvbiAoZGF0YSkge1xuICB2YXIgcGxheWxpc3RJRCA9IGRhdGEucGxheWxpc3RJRCxcbiAgICBvbGRJbmRleCA9IGRhdGEub2xkSW5kZXgsXG4gICAgbmV3SW5kZXggPSBkYXRhLm5ld0luZGV4O1xuICBpZiAocGxheWxpc3RJRCA+IDAgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4KSB7XG4gICAgcmVzdEdldCh7XG4gICAgICBwYXRoOiAncGxheWxpc3RzL3Jlb3JkZXInLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHBsYXlsaXN0OiBwbGF5bGlzdElELFxuICAgICAgICBmcm9tOiBvbGRJbmRleCxcbiAgICAgICAgdG86IG5ld0luZGV4XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIERlbGV0ZSBhIHBsYXlsaXN0XG4gKlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IHZhciBkZWxldGVQbGF5bGlzdCA9IGNyZWF0ZUFzeW5jVGh1bmsoJ3BsYXlsaXN0cy9kZWxldGVQbGF5bGlzdCcsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIGlkID0gZGF0YS5pZDtcbiAgcmV0dXJuIHJlc3REZWxldGUoe1xuICAgIHBhdGg6IFwicGxheWxpc3RzL1wiLmNvbmNhdChpZClcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBCdWxrIGRlbGV0ZSBwbGF5bGlzdHMgJiB2aWRlb3NcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIGJ1bGtEZWxldGUgPSBjcmVhdGVBc3luY1RodW5rKCdwbGF5bGlzdHMvYnVsa0RlbGV0ZScsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIHNlbGVjdGVkID0gZGF0YS5zZWxlY3RlZDtcbiAgcmV0dXJuIHJlc3RQb3N0KHtcbiAgICBwYXRoOiBcInBsYXlsaXN0cy9idWxrLWFjdGlvbnNcIixcbiAgICBkYXRhOiB7XG4gICAgICBhY3Rpb246ICdkZWxldGUnLFxuICAgICAgaXRlbXM6IHNlbGVjdGVkXG4gICAgfVxuICB9KTtcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKlxuICogUGxheWxpc3RzIFNsaWNlXG4gKlxuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbnZhciBwbGF5bGlzdHNTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ3BsYXlsaXN0cycsXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICpcbiAgICogSW5pdGlhbCBTdGF0ZVxuICAgKlxuICAgKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIGluaXRpYWxTdGF0ZToge1xuICAgIHBsYXlsaXN0czoge30sXG4gICAgZmlsdGVyZWQ6IFtdLFxuICAgIHNlbGVjdGVkOiB7fSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlXG4gIH0sXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICpcbiAgICogUmVkdWNlcnNcbiAgICpcbiAgICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgcmVkdWNlcnM6IHtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSBzaW5nbGUgcGxheWxpc3QgaW4gdGhlIHBsYXlsaXN0cyBsaXN0XG4gICAgICpcbiAgICAgKiBJZiBwbGF5bGlzdCBleGlzdCwgaXQgd2lsbCByZXBsYWNlIHRoZSBwbGF5bGlzdCBvYmplY3QsXG4gICAgICogaWYgbm90LCBpdCB3aWxsIGFkZCB0aGUgcGxheWxpc3Qgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHN0YXRlIEN1cnJlbnQgc3RhdGUuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFjdGlvbiBhY3Rpb24gZGF0YS5cbiAgICAgKi9cbiAgICBzZXRQbGF5bGlzdDogZnVuY3Rpb24gc2V0UGxheWxpc3Qoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIHBsYXlsaXN0ID0gYWN0aW9uLnBheWxvYWQucGxheWxpc3Q7XG4gICAgICB2YXIgcGxheWxpc3RzID0gc3RhdGUucGxheWxpc3RzO1xuICAgICAgdmFyIG5ld1BsYXlsaXN0cyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGxheWxpc3RzKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGxheWxpc3QuaWQsIHBsYXlsaXN0KSk7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIHBsYXlsaXN0czogbmV3UGxheWxpc3RzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBvciBkZXNlbGVjdCBhIHBsYXlsaXN0ICggY2hlY2tib3ggKVxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0b2dnbGVQbGF5bGlzdDogZnVuY3Rpb24gdG9nZ2xlUGxheWxpc3Qoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIF9zdGF0ZSRwbGF5bGlzdHMsIF9zZWxlY3RlZCRpZDtcbiAgICAgIHZhciBfYWN0aW9uJHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZCxcbiAgICAgICAgY2hlY2tlZCA9IF9hY3Rpb24kcGF5bG9hZC5jaGVja2VkLFxuICAgICAgICBpZCA9IF9hY3Rpb24kcGF5bG9hZC5pZDtcbiAgICAgIHZhciBhbGxWaWRlb3MgPSAoX3N0YXRlJHBsYXlsaXN0cyA9IHN0YXRlLnBsYXlsaXN0cykgPT09IG51bGwgfHwgX3N0YXRlJHBsYXlsaXN0cyA9PT0gdm9pZCAwIHx8IChfc3RhdGUkcGxheWxpc3RzID0gX3N0YXRlJHBsYXlsaXN0c1tpZF0pID09PSBudWxsIHx8IF9zdGF0ZSRwbGF5bGlzdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSRwbGF5bGlzdHMudmlkZW9zO1xuXG4gICAgICAvLyBUaGUgbmV3IHNlbGVjdGVkIG9iamVjdFxuICAgICAgdmFyIHNlbGVjdGVkID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS5zZWxlY3RlZCksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCB7XG4gICAgICAgIHNlbGVjdGVkOiBjaGVja2VkLFxuICAgICAgICB2aWRlb3M6IGNoZWNrZWQgJiYgYWxsVmlkZW9zIHx8IFtdXG4gICAgICB9KSk7XG5cbiAgICAgIC8vIElmIHBsYXlsaXN0IGlzIG5vdCBzZWxlY3RlZCBhbmQgbm8gdmlkZW9zIGFyZSBzZWxlY3RlZCxcbiAgICAgIC8vIHJlbW92ZSB0aGUgcGxheWxpc3RcbiAgICAgIGlmICgoc2VsZWN0ZWQgPT09IG51bGwgfHwgc2VsZWN0ZWQgPT09IHZvaWQgMCB8fCAoX3NlbGVjdGVkJGlkID0gc2VsZWN0ZWRbaWRdKSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWQkaWQgPT09IHZvaWQgMCB8fCAoX3NlbGVjdGVkJGlkID0gX3NlbGVjdGVkJGlkLnZpZGVvcykgPT09IG51bGwgfHwgX3NlbGVjdGVkJGlkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWQkaWQubGVuZ3RoKSA9PT0gMCAmJiAhY2hlY2tlZCkge1xuICAgICAgICBkZWxldGUgc2VsZWN0ZWRbaWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2VsZWN0IG9yIGRlLXNlbGVjdCBhbGwgcGxheWxpc3RzIGFuZCB2aWRlb3MgKCBjaGVja2JveCApXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHRvZ2dsZUFsbDogZnVuY3Rpb24gdG9nZ2xlQWxsKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBjaGVja2VkID0gYWN0aW9uLnBheWxvYWQuY2hlY2tlZDtcbiAgICAgIHZhciBwbGF5bGlzdHMgPSBzdGF0ZS5wbGF5bGlzdHM7XG5cbiAgICAgIC8vIFRoZSBuZXcgc2VsZWN0ZWQgb2JqZWN0XG4gICAgICB2YXIgbmV3U2VsZWN0ZWQgPSB7fTtcbiAgICAgIGlmIChjaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHBsYXlsaXN0cykuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICBuZXdTZWxlY3RlZFtpZF0gPSB7XG4gICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIHZpZGVvczogKHBsYXlsaXN0cyA9PT0gbnVsbCB8fCBwbGF5bGlzdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYXlsaXN0c1tpZF0udmlkZW9zKSB8fCBbXVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBzZWxlY3RlZDogbmV3U2VsZWN0ZWRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHNlbGVjdGVkIHZpZGVvcyBsaXN0ICggY2hlY2tib3ggKVxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0b2dnbGVWaWRlbzogZnVuY3Rpb24gdG9nZ2xlVmlkZW8oc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIF9zZWxlY3RlZCRwbGF5bGlzdElELCBfc2VsZWN0ZWQkcGxheWxpc3RJRDI7XG4gICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkMiA9IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgICB2aWRlb0lEID0gX2FjdGlvbiRwYXlsb2FkMi52aWRlb0lELFxuICAgICAgICBwbGF5bGlzdElEID0gX2FjdGlvbiRwYXlsb2FkMi5wbGF5bGlzdElEO1xuICAgICAgdmFyIHNlbGVjdGVkID0gc3RhdGUuc2VsZWN0ZWQ7XG4gICAgICB2YXIgdmlkZW9zID0gKHNlbGVjdGVkID09PSBudWxsIHx8IHNlbGVjdGVkID09PSB2b2lkIDAgfHwgKF9zZWxlY3RlZCRwbGF5bGlzdElEID0gc2VsZWN0ZWRbcGxheWxpc3RJRF0pID09PSBudWxsIHx8IF9zZWxlY3RlZCRwbGF5bGlzdElEID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWQkcGxheWxpc3RJRC52aWRlb3MpIHx8IFtdO1xuXG4gICAgICAvLyBUaGUgbmV3IHNlbGVjdGVkIG9iamVjdFxuICAgICAgdmFyIG5ld1NlbGVjdGVkID0ge307XG5cbiAgICAgIC8vIFRoZSBuZXcgdmlkZW9zIGFycmF5XG4gICAgICB2YXIgbmV3VmlkZW9zID0gW107XG5cbiAgICAgIC8vIFRvZ2dsZSB2aWRlb1xuICAgICAgaWYgKHZpZGVvcy5pbmNsdWRlcyh2aWRlb0lEKSkge1xuICAgICAgICAvLyBSZW1vdmUgdmlkZW8gaWYgaXQgZXhpc3RzXG4gICAgICAgIG5ld1ZpZGVvcyA9IHZpZGVvcy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGVsICE9PSB2aWRlb0lEO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCB2aWRlbyBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIG5ld1ZpZGVvcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodmlkZW9zKSwgW3ZpZGVvSURdKTtcbiAgICAgIH1cbiAgICAgIHZhciBpc1BsYXlsaXN0U2VsZWN0ZWQgPSAoc2VsZWN0ZWQgPT09IG51bGwgfHwgc2VsZWN0ZWQgPT09IHZvaWQgMCB8fCAoX3NlbGVjdGVkJHBsYXlsaXN0SUQyID0gc2VsZWN0ZWRbcGxheWxpc3RJRF0pID09PSBudWxsIHx8IF9zZWxlY3RlZCRwbGF5bGlzdElEMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkJHBsYXlsaXN0SUQyLnNlbGVjdGVkKSB8fCBmYWxzZTtcblxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGVkIG9iamVjdFxuICAgICAgbmV3U2VsZWN0ZWQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGVkKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGxheWxpc3RJRCwge1xuICAgICAgICBzZWxlY3RlZDogaXNQbGF5bGlzdFNlbGVjdGVkLFxuICAgICAgICB2aWRlb3M6IG5ld1ZpZGVvc1xuICAgICAgfSkpO1xuXG4gICAgICAvKiBJZiBwbGF5bGlzdCBpcyBub3Qgc2VsZWN0ZWQgYW5kIG5vIHZpZGVvIGlzIHNlbGVjdGVkLFxuICAgICAgcmVtb3ZlIHRoZSBwbGF5bGlzdCAqL1xuICAgICAgaWYgKG5ld1ZpZGVvcy5sZW5ndGggPT09IDAgJiYgIWlzUGxheWxpc3RTZWxlY3RlZCkge1xuICAgICAgICBkZWxldGUgbmV3U2VsZWN0ZWRbcGxheWxpc3RJRF07XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB0aGUgc3RhdGVcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgc2VsZWN0ZWQ6IG5ld1NlbGVjdGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICpcbiAgICogRXh0cmEgUmVkdWNlcnNcbiAgICpcbiAgICogTWFuYWdlIG9mIGFzeW5jaHJvbm91cyByZXF1ZXN0cyBzdGF0ZXNcbiAgICpcbiAgICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgZXh0cmFSZWR1Y2VyczogZnVuY3Rpb24gZXh0cmFSZWR1Y2VycyhidWlsZGVyKSB7XG4gICAgYnVpbGRlclxuICAgIC8vIFBsYXlsaXN0cyBJbml0XG4gICAgLmFkZENhc2UoaW5pdFBsYXlsaXN0cy5wZW5kaW5nLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgfSkuYWRkQ2FzZShpbml0UGxheWxpc3RzLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdmFyIHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGlmIChwYXlsb2FkLnN1Y2Nlc3MgJiYgcGF5bG9hZC5kYXRhKSB7XG4gICAgICAgIHZhciBwbGF5bGlzdHMgPSB7fTtcbiAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XG5cbiAgICAgICAgLy8gU2V0dXAgdGhlIGxpc3QgZGF0YS5cbiAgICAgICAgcGF5bG9hZC5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHBsYXlsaXN0KSB7XG4gICAgICAgICAgcGxheWxpc3RzW3BsYXlsaXN0LmlkXSA9IHBsYXlsaXN0O1xuICAgICAgICAgIGZpbHRlcmVkLnB1c2gocGxheWxpc3QuaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyB1cGRhdGUgdGhlIHN0YXRlXG4gICAgICAgIHN0YXRlLnBsYXlsaXN0cyA9IHBsYXlsaXN0cztcbiAgICAgICAgc3RhdGUuZmlsdGVyZWQgPSBmaWx0ZXJlZDtcbiAgICAgIH1cbiAgICB9KS5hZGRDYXNlKGluaXRQbGF5bGlzdHMucmVqZWN0ZWQsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSlcbiAgICAvLyBTYXZlIFBsYXlsaXN0XG4gICAgLmFkZENhc2Uoc2F2ZVBsYXlsaXN0LnBlbmRpbmcsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB9KS5hZGRDYXNlKHNhdmVQbGF5bGlzdC5mdWxmaWxsZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgZGF0YSA9IGFjdGlvbi5wYXlsb2FkLmRhdGE7XG4gICAgICB2YXIgcGxheWxpc3RzID0gc3RhdGUucGxheWxpc3RzO1xuICAgICAgdmFyIG5ld1BsYXlsaXN0cyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGxheWxpc3RzKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZGF0YS5pZCwgZGF0YSkpO1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICBzdGF0ZS5wbGF5bGlzdHMgPSBuZXdQbGF5bGlzdHM7XG4gICAgfSkuYWRkQ2FzZShzYXZlUGxheWxpc3QucmVqZWN0ZWQsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSlcbiAgICAvLyBDcmVhdGUgUGxheWxpc3RcbiAgICAuYWRkQ2FzZShjcmVhdGVQbGF5bGlzdC5wZW5kaW5nLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgfSkuYWRkQ2FzZShjcmVhdGVQbGF5bGlzdC5mdWxmaWxsZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkMyA9IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgICBkYXRhID0gX2FjdGlvbiRwYXlsb2FkMy5kYXRhLFxuICAgICAgICBzdWNjZXNzID0gX2FjdGlvbiRwYXlsb2FkMy5zdWNjZXNzO1xuICAgICAgaWYgKHN1Y2Nlc3MgJiYgZGF0YSkge1xuICAgICAgICB2YXIgcGxheWxpc3RzID0gc3RhdGUucGxheWxpc3RzLFxuICAgICAgICAgIGZpbHRlcmVkID0gc3RhdGUuZmlsdGVyZWQ7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdCBpbiB0aGUgc3RvcmVcbiAgICAgICAgc3RhdGUucGxheWxpc3RzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwbGF5bGlzdHMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBkYXRhLmlkLCBkYXRhKSk7XG4gICAgICAgIHN0YXRlLmZpbHRlcmVkID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJlZCksIFtkYXRhLmlkXSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB9KS5hZGRDYXNlKGNyZWF0ZVBsYXlsaXN0LnJlamVjdGVkLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH0pXG4gICAgLy8gRGVsZXRlIFBsYXlsaXN0XG4gICAgLmFkZENhc2UoZGVsZXRlUGxheWxpc3QucGVuZGluZywgZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIH0pLmFkZENhc2UoZGVsZXRlUGxheWxpc3QuZnVsZmlsbGVkLCBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIGlkID0gYWN0aW9uLm1ldGEuYXJnLmlkLFxuICAgICAgICBzdWNjZXNzID0gYWN0aW9uLnBheWxvYWQuc3VjY2VzcztcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBwbGF5bGlzdCBpZiBzdWNjZXNzXG4gICAgICBpZiAoc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgcGxheWxpc3RzID0gc3RhdGUucGxheWxpc3RzLFxuICAgICAgICAgIGZpbHRlcmVkID0gc3RhdGUuZmlsdGVyZWQ7XG4gICAgICAgIHZhciBuZXdQbGF5bGlzdHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBwbGF5bGlzdHMpO1xuICAgICAgICBkZWxldGUgbmV3UGxheWxpc3RzW2lkXTtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBsaXN0IGluIHRoZSBzdG9yZVxuICAgICAgICBzdGF0ZS5wbGF5bGlzdHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBuZXdQbGF5bGlzdHMpO1xuICAgICAgICBzdGF0ZS5maWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpdGVtICE9PSBpZDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB9KS5hZGRDYXNlKGRlbGV0ZVBsYXlsaXN0LnJlamVjdGVkLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH0pXG4gICAgLy8gQnVsayBEZWxldGVcbiAgICAuYWRkQ2FzZShidWxrRGVsZXRlLnBlbmRpbmcsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB9KS5hZGRDYXNlKGJ1bGtEZWxldGUuZnVsZmlsbGVkLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBFbXB0eSB0aGUgc2VsZWN0ZWQgbGlzdFxuICAgICAgc3RhdGUuc2VsZWN0ZWQgPSBbXTtcbiAgICB9KS5hZGRDYXNlKGJ1bGtEZWxldGUucmVqZWN0ZWQsIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgIC8vIEVtcHR5IHRoZSBzZWxlY3RlZCBsaXN0XG4gICAgICBzdGF0ZS5zZWxlY3RlZCA9IFtdO1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcbiAqIFNlbGVjdG9yc1xuICpcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbnZhciBwbGF5bGlzdHNTdGF0ZSA9IGZ1bmN0aW9uIHBsYXlsaXN0c1N0YXRlKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5wbGF5bGlzdHM7XG59O1xuXG4vKipcbiAqIEdldCBwbGF5bGlzdHMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHBsYXlsaXN0c1N0YXRlIHRoZSBwbGF5bGlzdHMgb2JqZWN0LlxuICpcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBnZXRQbGF5bGlzdHMgPSBjcmVhdGVTZWxlY3RvcihwbGF5bGlzdHNTdGF0ZSwgZnVuY3Rpb24gKHBsYXlsaXN0c1N0YXRlKSB7XG4gIHJldHVybiBwbGF5bGlzdHNTdGF0ZS5wbGF5bGlzdHM7XG59KTtcblxuLyoqXG4gKiBHZXQgZmlsdGVyZWQgYXJyYXlcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKlxuICogQHJldHVybiB7YXJyYXl9XG4gKi9cbmV4cG9ydCB2YXIgZ2V0RmlsdGVyZWQgPSBjcmVhdGVTZWxlY3RvcihwbGF5bGlzdHNTdGF0ZSwgZnVuY3Rpb24gKHBsYXlsaXN0c1N0YXRlKSB7XG4gIHJldHVybiBwbGF5bGlzdHNTdGF0ZS5maWx0ZXJlZDtcbn0pO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgcGxheWxpc3QgaXMgc2VsZWN0ZWRcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgcGxheWxpc3QgaWRcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIGlzUGxheWxpc3RTZWxlY3RlZCA9IGNyZWF0ZVNlbGVjdG9yKHBsYXlsaXN0c1N0YXRlLCBmdW5jdGlvbiAoXywgaWQpIHtcbiAgcmV0dXJuIGlkO1xufSwgZnVuY3Rpb24gKHBsYXlsaXN0c1N0YXRlLCBpZCkge1xuICB2YXIgX3BsYXlsaXN0c1N0YXRlJHNlbGVjO1xuICByZXR1cm4gKF9wbGF5bGlzdHNTdGF0ZSRzZWxlYyA9IHBsYXlsaXN0c1N0YXRlLnNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfcGxheWxpc3RzU3RhdGUkc2VsZWMgPT09IHZvaWQgMCB8fCAoX3BsYXlsaXN0c1N0YXRlJHNlbGVjID0gX3BsYXlsaXN0c1N0YXRlJHNlbGVjW2lkXSkgPT09IG51bGwgfHwgX3BsYXlsaXN0c1N0YXRlJHNlbGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxheWxpc3RzU3RhdGUkc2VsZWMuc2VsZWN0ZWQ7XG59KTtcblxuLyoqXG4gKiBDaGVja3MgaWYgdmlkZW8gaXMgc2VsZWN0ZWRcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKiBAcGFyYW0ge29iamVjdH0gaWRzIHBsYXlsaXN0SUQgJiB2aWRlb0lEXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBpc1ZpZGVvU2VsZWN0ZWQgPSBjcmVhdGVTZWxlY3RvcihwbGF5bGlzdHNTdGF0ZSwgZnVuY3Rpb24gKF8sIGlkcykge1xuICByZXR1cm4gaWRzO1xufSwgZnVuY3Rpb24gKHBsYXlsaXN0c1N0YXRlLCBpZHMpIHtcbiAgdmFyIF9wbGF5bGlzdHNTdGF0ZSRzZWxlYzI7XG4gIHZhciBfcmVmMyA9IGlkcyAhPT0gbnVsbCAmJiBpZHMgIT09IHZvaWQgMCA/IGlkcyA6IHt9LFxuICAgIHBsYXlsaXN0SUQgPSBfcmVmMy5wbGF5bGlzdElELFxuICAgIHZpZGVvSUQgPSBfcmVmMy52aWRlb0lEO1xuICB2YXIgdmlkZW9zID0gKChfcGxheWxpc3RzU3RhdGUkc2VsZWMyID0gcGxheWxpc3RzU3RhdGUuc2VsZWN0ZWQpID09PSBudWxsIHx8IF9wbGF5bGlzdHNTdGF0ZSRzZWxlYzIgPT09IHZvaWQgMCB8fCAoX3BsYXlsaXN0c1N0YXRlJHNlbGVjMiA9IF9wbGF5bGlzdHNTdGF0ZSRzZWxlYzJbcGxheWxpc3RJRF0pID09PSBudWxsIHx8IF9wbGF5bGlzdHNTdGF0ZSRzZWxlYzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGF5bGlzdHNTdGF0ZSRzZWxlYzIudmlkZW9zKSB8fCBbXTtcbiAgcmV0dXJuIHZpZGVvcy5pbmNsdWRlcyh2aWRlb0lEKTtcbn0pO1xuXG4vKipcbiAqIENoZWNrIG9mIGFsbCB2aWRlb3MgYW5kIHBsYXlsaXN0cyBhcmUgc2VsZWN0ZWRcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICpcbiAqL1xuZXhwb3J0IHZhciBhcmVBbGxTZWxlY3RlZCA9IGNyZWF0ZVNlbGVjdG9yKHBsYXlsaXN0c1N0YXRlLCBmdW5jdGlvbiAocGxheWxpc3RzU3RhdGUpIHtcbiAgdmFyIHBsYXlsaXN0cyA9IHBsYXlsaXN0c1N0YXRlLnBsYXlsaXN0cyxcbiAgICBzZWxlY3RlZCA9IHBsYXlsaXN0c1N0YXRlLnNlbGVjdGVkO1xuXG4gIC8vIHJldHVybiBmYWxzZSBpZiBhdCBsZWFzdCBvbmUgcGxheWxpc3QgaXMgbm90IHNlbGVjdGVkXG4gIGZvciAodmFyIHBsYXlsaXN0SWQgaW4gcGxheWxpc3RzKSB7XG4gICAgdmFyIF9zZWxlY3RlZCRwbGF5bGlzdElkLCBfcGxheWxpc3RzJHBsYXlsaXN0SWQsIF9zZWxlY3RlZCRwbGF5bGlzdElkMjtcbiAgICB2YXIgaXNTZWxlY3RlZCA9IChzZWxlY3RlZCA9PT0gbnVsbCB8fCBzZWxlY3RlZCA9PT0gdm9pZCAwIHx8IChfc2VsZWN0ZWQkcGxheWxpc3RJZCA9IHNlbGVjdGVkW3BsYXlsaXN0SWRdKSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWQkcGxheWxpc3RJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkJHBsYXlsaXN0SWQuc2VsZWN0ZWQpIHx8IGZhbHNlO1xuICAgIGlmICghaXNTZWxlY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBmYWxzZSBpZiBhdCBsZWFzdCBvbmUgdmlkZW8gaXMgbm90IHNlbGVjdGVkXG4gICAgdmFyIGFsbFZpZGVvcyA9IChwbGF5bGlzdHMgPT09IG51bGwgfHwgcGxheWxpc3RzID09PSB2b2lkIDAgfHwgKF9wbGF5bGlzdHMkcGxheWxpc3RJZCA9IHBsYXlsaXN0c1twbGF5bGlzdElkXSkgPT09IG51bGwgfHwgX3BsYXlsaXN0cyRwbGF5bGlzdElkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxheWxpc3RzJHBsYXlsaXN0SWQudmlkZW9zKSB8fCBbXTtcbiAgICB2YXIgc2VsZWN0ZWRWaWRlb3MgPSAoc2VsZWN0ZWQgPT09IG51bGwgfHwgc2VsZWN0ZWQgPT09IHZvaWQgMCB8fCAoX3NlbGVjdGVkJHBsYXlsaXN0SWQyID0gc2VsZWN0ZWRbcGxheWxpc3RJZF0pID09PSBudWxsIHx8IF9zZWxlY3RlZCRwbGF5bGlzdElkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkJHBsYXlsaXN0SWQyLnZpZGVvcykgfHwgW107XG5cbiAgICAvLyBJdCBzdWZmaWNlcyB0byBjb21wYXJlIGxlbmd0aHMgb25seVxuICAgIGlmIChhbGxWaWRlb3MubGVuZ3RoICE9PSBzZWxlY3RlZFZpZGVvcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBsYXlsaXN0cykubGVuZ3RoID4gMDtcbn0pO1xuXG4vKipcbiAqIEdldCBzZWxlY3RlZCBQbGF5bGlzdHMgJiB2aWRlb3NcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKlxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5leHBvcnQgdmFyIGdldFNlbGVjdGVkUGxheWxpc3RzID0gY3JlYXRlU2VsZWN0b3IocGxheWxpc3RzU3RhdGUsIGZ1bmN0aW9uIChwbGF5bGlzdHNTdGF0ZSkge1xuICByZXR1cm4gcGxheWxpc3RzU3RhdGUuc2VsZWN0ZWQ7XG59KTtcblxuLyoqXG4gKiBHZXQgTG9hZGluZyBzdGF0dXNcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGxheWxpc3RzU3RhdGUgdGhlIHBsYXlsaXN0cyBvYmplY3QuXG4gKlxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IHZhciBnZXRMb2FkaW5nU3RhdHVzID0gY3JlYXRlU2VsZWN0b3IocGxheWxpc3RzU3RhdGUsIGZ1bmN0aW9uIChwbGF5bGlzdHNTdGF0ZSkge1xuICByZXR1cm4gcGxheWxpc3RzU3RhdGUuaXNMb2FkaW5nO1xufSk7XG5cbi8vIEV4cG9ydCBhY3Rpb25zXG52YXIgX3BsYXlsaXN0c1NsaWNlJGFjdGlvID0gcGxheWxpc3RzU2xpY2UuYWN0aW9ucyxcbiAgc2V0UGxheWxpc3QgPSBfcGxheWxpc3RzU2xpY2UkYWN0aW8uc2V0UGxheWxpc3QsXG4gIHVwZGF0ZVBsYXlsaXN0S2V5ID0gX3BsYXlsaXN0c1NsaWNlJGFjdGlvLnVwZGF0ZVBsYXlsaXN0S2V5LFxuICB0b2dnbGVQbGF5bGlzdCA9IF9wbGF5bGlzdHNTbGljZSRhY3Rpby50b2dnbGVQbGF5bGlzdCxcbiAgdG9nZ2xlVmlkZW8gPSBfcGxheWxpc3RzU2xpY2UkYWN0aW8udG9nZ2xlVmlkZW8sXG4gIHRvZ2dsZUFsbCA9IF9wbGF5bGlzdHNTbGljZSRhY3Rpby50b2dnbGVBbGw7XG5leHBvcnQgeyBzZXRQbGF5bGlzdCwgdXBkYXRlUGxheWxpc3RLZXksIHRvZ2dsZVBsYXlsaXN0LCB0b2dnbGVWaWRlbywgdG9nZ2xlQWxsIH07XG5leHBvcnQgZGVmYXVsdCBwbGF5bGlzdHNTbGljZS5yZWR1Y2VyOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9317\n')},4084:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DH: function() { return /* binding */ searchVideos; },\n/* harmony export */   H: function() { return /* binding */ getLoadingStatus; },\n/* harmony export */   Ln: function() { return /* binding */ deleteVideo; },\n/* harmony export */   Q6: function() { return /* binding */ getFilteredIds; },\n/* harmony export */   fY: function() { return /* binding */ getVideos; },\n/* harmony export */   g5: function() { return /* binding */ createVideo; },\n/* harmony export */   h5: function() { return /* binding */ updateVideo; },\n/* harmony export */   mO: function() { return /* binding */ fetchEmbed; },\n/* harmony export */   r2: function() { return /* binding */ initVideos; },\n/* harmony export */   yS: function() { return /* binding */ getEmbed; }\n/* harmony export */ });\n/* unused harmony exports unAssignVideo, setFiltered */\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8740);\n/* harmony import */ var _helpers_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9331);\n/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4214);\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1081);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\n\n\n\n\n\n/**\n * Re-initialize the videos list\n *\n * @return {Promise}\n */\nvar initVideos = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/init\',\n// Redux action type\nfunction (params) {\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restGet */ .B8)({\n    path: \'videos\',\n    params: params\n  });\n});\n\n/**\n * Deletes a video\n *\n * @return {Promise}\n */\nvar deleteVideo = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/delete\',\n// Redux action type\nfunction (data) {\n  var id = data.id;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restDelete */ ._8)({\n    path: "videos/".concat(id)\n  });\n});\n\n/**\n * Delete a video from playlist\n *\n * @return {Promise}\n */\nvar unAssignVideo = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/delete\',\n// Redux action type\nfunction (_ref) {\n  var playlistID = _ref.playlistID,\n    videoID = _ref.videoID;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restDelete */ ._8)({\n    path: "playlists/".concat(playlistID, "/videos"),\n    data: {\n      videos: [videoID]\n    }\n  });\n});\n\n/**\n * Fetch a single embed object using API.\n *\n * Use this only if the embed is not already\n * found in state.\n *\n * @param {object} data Video ID and other args.\n *\n * @return {Promise}\n */\nvar fetchEmbed = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/fetchEmbed\', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(data.id && data.id > 0)) {\n            _context.next = 6;\n            break;\n          }\n          _context.next = 3;\n          return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restGet */ .B8)({\n            path: "videos/".concat(data.id, "/embed"),\n            params: data\n          });\n        case 3:\n          response = _context.sent;\n          // Include the id in response\n          response.id = data.id;\n          return _context.abrupt("return", response);\n        case 6:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n/**\n * Create a video\n *\n * @param {object} video Video object\n *\n * @return {Promise}\n */\nvar createVideo = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/create\', function (data) {\n  var video = data.video;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restPost */ .J8)({\n    path: \'videos\',\n    data: video\n  });\n});\n\n/**\n * Update a video\n *\n * @param {object} video Video object\n *\n * @return {Promise}\n */\nvar updateVideo = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/update\', function (data) {\n  var video = data.video,\n    id = data.id;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restPost */ .J8)({\n    path: "videos/".concat(id),\n    data: video\n  });\n});\n\n/**\n * Search Videos\n *\n * @param {object} search search string\n *\n * @return {Promise}\n */\nvar searchVideos = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createAsyncThunk */ .zD)(\'videos/search\', function (data) {\n  var search = data.search;\n  return (0,_helpers_api__WEBPACK_IMPORTED_MODULE_0__/* .restGet */ .B8)({\n    path: "videos",\n    params: {\n      search: search,\n      field: \'ids\'\n    }\n  });\n});\nvar videosSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__/* .createSlice */ .Z0)({\n  name: \'videos\',\n  initialState: {\n    videos: {},\n    embeds: {},\n    filtered: [],\n    isLoading: false\n  },\n  reducers: {\n    /**\n     * Set a filtered video ids in state.\n     *\n     * It replaces the filtered list with the provided one\n     *\n     * @param {state} state object\n     * @param {object} action object\n     *\n     * @return {object} New State Object\n     */\n    setFiltered: function setFiltered(state, action) {\n      var ids = action.payload.ids;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        filtered: ids\n      });\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder\n    // Handling initVideos status\n    .addCase(initVideos.pending, function (state) {\n      // Set Loading\n      state.isLoading = true;\n    }).addCase(initVideos.fulfilled, function (state, action) {\n      state.isLoading = false;\n      var payload = action.payload;\n      if (payload.success && payload.data) {\n        var videos = {};\n        var filtered = [];\n\n        // Setup the list data.\n        payload.data.forEach(function (video) {\n          videos[video.id] = video;\n          filtered.push(video.id);\n        });\n\n        // update the state\n        state.videos = videos;\n        state.filtered = filtered;\n      }\n      state.status = \'success\';\n    }).addCase(initVideos.rejected, function (state) {\n      // Update Status\n      state.status = \'error\';\n    })\n\n    // Handling fetchEmbed\n    .addCase(fetchEmbed.fulfilled, function (state, action) {\n      var embed = {};\n\n      // Update state\n      var payload = action.payload;\n      if (payload !== null && payload !== void 0 && payload.success && payload !== null && payload !== void 0 && payload.data && payload !== null && payload !== void 0 && payload.data.html) {\n        embed = payload.data;\n        var newData = _objectSpread({}, payload.data);\n        newData.id = payload.id;\n\n        // Update the state\n        state.embeds[payload.id] = newData;\n      }\n    })\n\n    // Handling Video Create\n    .addCase(createVideo.fulfilled, function (state, action) {\n      // Update state\n      var payload = action.payload;\n      if (payload !== null && payload !== void 0 && payload.success) {\n        var video = payload.data;\n\n        // Add video to state\n        if (video.id && video.id > 0) {\n          state.videos = _objectSpread(_objectSpread({}, state.videos), {}, _defineProperty({}, video.id, video));\n\n          // Add the id to the filtered list so the video will be displayed\n          state.filtered = [].concat(_toConsumableArray(state.filtered), [video.id]);\n        }\n      }\n    })\n\n    // Handeling Video Update\n    .addCase(updateVideo.fulfilled, function (state, action) {\n      var payload = action.payload;\n      var newVideo = payload.data;\n      if (payload !== null && payload !== void 0 && payload.success) {\n        // Update videos state\n        state.videos = _objectSpread(_objectSpread({}, state.videos), {}, _defineProperty({}, newVideo.id, newVideo));\n      }\n    })\n\n    // Handeling Video Delete\n    .addCase(deleteVideo.fulfilled, function (state, action) {\n      var id = action.meta.arg.id,\n        success = action.payload.success;\n      if (success === true) {\n        var videos = state.videos,\n          filtered = state.filtered;\n\n        // Remove from filtered list\n        state.filtered = filtered.filter(function (item) {\n          return id !== item;\n        });\n\n        // Delete the video from the videos object\n        var newVideos = _objectSpread({}, videos);\n        delete newVideos[id];\n        state.videos = newVideos;\n      }\n    })\n\n    // Handeling Video Search\n    .addCase(searchVideos.pending, function (state, action) {\n      // Set Loading\n      state.isLoading = true;\n    }).addCase(searchVideos.fulfilled, function (state, action) {\n      var _action$payload;\n      var ids = (action === null || action === void 0 || (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.data) || [];\n      state.filtered = ids;\n\n      // Set Loading\n      state.isLoading = false;\n    }).addCase(searchVideos.rejected, function (state, action) {\n      state.isLoading = false;\n    });\n  }\n});\n\n// Selectors\nvar videosState = function videosState(state) {\n  return state.videos;\n};\n\n/**\n * Get video(s) object(s) by id(s)\n *\n * @param {object} videosState\n * @param {array|string} ids videos ids\n *\n * @return {array|object|false}\n */\nvar getVideos = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(videosState, function (_, ids) {\n  return ids;\n}, function (videosState, ids) {\n  var videos = [];\n  if (Array.isArray(ids)) {\n    ids.forEach(function (id) {\n      if (videosState.videos[id]) {\n        videos.push(videosState.videos[id]);\n      }\n    });\n    return videos;\n  } else if (typeof ids === \'string\' || typeof ids === \'number\') {\n    return videosState.videos[ids];\n  } else {\n    // If ids is not provided get all videos\n    return videosState.videos;\n  }\n});\n\n/**\n * Get Filtered IDs\n *\n * @param {object} videosState\n *\n * @return {array}\n */\nvar getFilteredIds = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(videosState, function (videosState) {\n  return videosState.filtered;\n});\n\n/**\n * Get a single embed object\n *\n * @param {object} videosState\n * @param {number} videoId\n *\n * @return {array}\n */\nvar getEmbed = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(videosState, function (_, id) {\n  return id;\n}, function (videosState, id) {\n  return videosState.embeds[id] || false;\n});\n\n/**\n * Get loading status\n *\n * @param {object} videosState the videos state object.\n *\n * @return {boolean}\n */\nvar getLoadingStatus = (0,reselect__WEBPACK_IMPORTED_MODULE_3__/* .createSelector */ .Mz)(videosState, function (videosState) {\n  return videosState.isLoading;\n});\n\n// Export actions\nvar setFiltered = videosSlice.actions.setFiltered;\n\n/* harmony default export */ __webpack_exports__.Ay = (videosSlice.reducer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDA4NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cG11ZGV2LXZpZGVvcy8uL2FwcC9zcmMvc3RvcmUvc2xpY2VzL3ZpZGVvcy5qcz8xYjBjIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheShyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBhKSB7IGlmIChyKSB7IGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7IHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7IHJldHVybiBcIk9iamVjdFwiID09PSB0ICYmIHIuY29uc3RydWN0b3IgJiYgKHQgPSByLmNvbnN0cnVjdG9yLm5hbWUpLCBcIk1hcFwiID09PSB0IHx8IFwiU2V0XCIgPT09IHQgPyBBcnJheS5mcm9tKHIpIDogXCJBcmd1bWVudHNcIiA9PT0gdCB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSA/IF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIDogdm9pZCAwOyB9IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkocikgeyBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIG51bGwgIT0gcltTeW1ib2wuaXRlcmF0b3JdIHx8IG51bGwgIT0gcltcIkBAaXRlcmF0b3JcIl0pIHJldHVybiBBcnJheS5mcm9tKHIpOyB9XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMocikgeyBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIpOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7IChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTsgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07IHJldHVybiBuOyB9XG5mdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0KSB7IHJldHVybiAociA9IF90b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHsgdmFsdWU6IHQsIGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAgfSkgOiBlW3JdID0gdCwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9yZWdlbmVyYXRvclJ1bnRpbWUoKSB7IFwidXNlIHN0cmljdFwiOyAvKiEgcmVnZW5lcmF0b3ItcnVudGltZSAtLSBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gLS0gbGljZW5zZSAoTUlUKTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2Jsb2IvbWFpbi9MSUNFTlNFICovIF9yZWdlbmVyYXRvclJ1bnRpbWUgPSBmdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkgeyByZXR1cm4gZTsgfTsgdmFyIHQsIGUgPSB7fSwgciA9IE9iamVjdC5wcm90b3R5cGUsIG4gPSByLmhhc093blByb3BlcnR5LCBvID0gT2JqZWN0LmRlZmluZVByb3BlcnR5IHx8IGZ1bmN0aW9uICh0LCBlLCByKSB7IHRbZV0gPSByLnZhbHVlOyB9LCBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSwgYSA9IGkuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCIsIGMgPSBpLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIiwgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7IGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7IHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgZSwgeyB2YWx1ZTogciwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSwgdFtlXTsgfSB0cnkgeyBkZWZpbmUoe30sIFwiXCIpOyB9IGNhdGNoICh0KSB7IGRlZmluZSA9IGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7IHJldHVybiB0W2VdID0gcjsgfTsgfSBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHsgdmFyIGkgPSBlICYmIGUucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gZSA6IEdlbmVyYXRvciwgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLCBjID0gbmV3IENvbnRleHQobiB8fCBbXSk7IHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7IHZhbHVlOiBtYWtlSW52b2tlTWV0aG9kKHQsIHIsIGMpIH0pLCBhOyB9IGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHsgdHJ5IHsgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiB0LmNhbGwoZSwgcikgfTsgfSBjYXRjaCAodCkgeyByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogdCB9OyB9IH0gZS53cmFwID0gd3JhcDsgdmFyIGggPSBcInN1c3BlbmRlZFN0YXJ0XCIsIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsIGYgPSBcImV4ZWN1dGluZ1wiLCBzID0gXCJjb21wbGV0ZWRcIiwgeSA9IHt9OyBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fSBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9IGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge30gdmFyIHAgPSB7fTsgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pOyB2YXIgZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiwgdiA9IGQgJiYgZChkKHZhbHVlcyhbXSkpKTsgdiAmJiB2ICE9PSByICYmIG4uY2FsbCh2LCBhKSAmJiAocCA9IHYpOyB2YXIgZyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9IEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHApOyBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHModCkgeyBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBkZWZpbmUodCwgZSwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHRoaXMuX2ludm9rZShlLCB0KTsgfSk7IH0pOyB9IGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IodCwgZSkgeyBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkgeyB2YXIgYyA9IHRyeUNhdGNoKHRbcl0sIHQsIG8pOyBpZiAoXCJ0aHJvd1wiICE9PSBjLnR5cGUpIHsgdmFyIHUgPSBjLmFyZywgaCA9IHUudmFsdWU7IHJldHVybiBoICYmIFwib2JqZWN0XCIgPT0gX3R5cGVvZihoKSAmJiBuLmNhbGwoaCwgXCJfX2F3YWl0XCIpID8gZS5yZXNvbHZlKGguX19hd2FpdCkudGhlbihmdW5jdGlvbiAodCkgeyBpbnZva2UoXCJuZXh0XCIsIHQsIGksIGEpOyB9LCBmdW5jdGlvbiAodCkgeyBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTsgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkgeyB1LnZhbHVlID0gdCwgaSh1KTsgfSwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGludm9rZShcInRocm93XCIsIHQsIGksIGEpOyB9KTsgfSBhKGMuYXJnKTsgfSB2YXIgcjsgbyh0aGlzLCBcIl9pbnZva2VcIiwgeyB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCwgbikgeyBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHsgcmV0dXJuIG5ldyBlKGZ1bmN0aW9uIChlLCByKSB7IGludm9rZSh0LCBuLCBlLCByKTsgfSk7IH0gcmV0dXJuIHIgPSByID8gci50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLCBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZykgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpOyB9IH0pOyB9IGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoZSwgciwgbikgeyB2YXIgbyA9IGg7IHJldHVybiBmdW5jdGlvbiAoaSwgYSkgeyBpZiAobyA9PT0gZikgdGhyb3cgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpOyBpZiAobyA9PT0gcykgeyBpZiAoXCJ0aHJvd1wiID09PSBpKSB0aHJvdyBhOyByZXR1cm4geyB2YWx1ZTogdCwgZG9uZTogITAgfTsgfSBmb3IgKG4ubWV0aG9kID0gaSwgbi5hcmcgPSBhOzspIHsgdmFyIGMgPSBuLmRlbGVnYXRlOyBpZiAoYykgeyB2YXIgdSA9IG1heWJlSW52b2tlRGVsZWdhdGUoYywgbik7IGlmICh1KSB7IGlmICh1ID09PSB5KSBjb250aW51ZTsgcmV0dXJuIHU7IH0gfSBpZiAoXCJuZXh0XCIgPT09IG4ubWV0aG9kKSBuLnNlbnQgPSBuLl9zZW50ID0gbi5hcmc7ZWxzZSBpZiAoXCJ0aHJvd1wiID09PSBuLm1ldGhvZCkgeyBpZiAobyA9PT0gaCkgdGhyb3cgbyA9IHMsIG4uYXJnOyBuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKTsgfSBlbHNlIFwicmV0dXJuXCIgPT09IG4ubWV0aG9kICYmIG4uYWJydXB0KFwicmV0dXJuXCIsIG4uYXJnKTsgbyA9IGY7IHZhciBwID0gdHJ5Q2F0Y2goZSwgciwgbik7IGlmIChcIm5vcm1hbFwiID09PSBwLnR5cGUpIHsgaWYgKG8gPSBuLmRvbmUgPyBzIDogbCwgcC5hcmcgPT09IHkpIGNvbnRpbnVlOyByZXR1cm4geyB2YWx1ZTogcC5hcmcsIGRvbmU6IG4uZG9uZSB9OyB9IFwidGhyb3dcIiA9PT0gcC50eXBlICYmIChvID0gcywgbi5tZXRob2QgPSBcInRocm93XCIsIG4uYXJnID0gcC5hcmcpOyB9IH07IH0gZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShlLCByKSB7IHZhciBuID0gci5tZXRob2QsIG8gPSBlLml0ZXJhdG9yW25dOyBpZiAobyA9PT0gdCkgcmV0dXJuIHIuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IG4gJiYgZS5pdGVyYXRvci5yZXR1cm4gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7IHZhciBpID0gdHJ5Q2F0Y2gobywgZS5pdGVyYXRvciwgci5hcmcpOyBpZiAoXCJ0aHJvd1wiID09PSBpLnR5cGUpIHJldHVybiByLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBpLmFyZywgci5kZWxlZ2F0ZSA9IG51bGwsIHk7IHZhciBhID0gaS5hcmc7IHJldHVybiBhID8gYS5kb25lID8gKHJbZS5yZXN1bHROYW1lXSA9IGEudmFsdWUsIHIubmV4dCA9IGUubmV4dExvYywgXCJyZXR1cm5cIiAhPT0gci5tZXRob2QgJiYgKHIubWV0aG9kID0gXCJuZXh0XCIsIHIuYXJnID0gdCksIHIuZGVsZWdhdGUgPSBudWxsLCB5KSA6IGEgOiAoci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpLCByLmRlbGVnYXRlID0gbnVsbCwgeSk7IH0gZnVuY3Rpb24gcHVzaFRyeUVudHJ5KHQpIHsgdmFyIGUgPSB7IHRyeUxvYzogdFswXSB9OyAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpOyB9IGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkgeyB2YXIgZSA9IHQuY29tcGxldGlvbiB8fCB7fTsgZS50eXBlID0gXCJub3JtYWxcIiwgZGVsZXRlIGUuYXJnLCB0LmNvbXBsZXRpb24gPSBlOyB9IGZ1bmN0aW9uIENvbnRleHQodCkgeyB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7IH0gZnVuY3Rpb24gdmFsdWVzKGUpIHsgaWYgKGUgfHwgXCJcIiA9PT0gZSkgeyB2YXIgciA9IGVbYV07IGlmIChyKSByZXR1cm4gci5jYWxsKGUpOyBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLm5leHQpIHJldHVybiBlOyBpZiAoIWlzTmFOKGUubGVuZ3RoKSkgeyB2YXIgbyA9IC0xLCBpID0gZnVuY3Rpb24gbmV4dCgpIHsgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDsgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMCwgbmV4dDsgfTsgcmV0dXJuIGkubmV4dCA9IGk7IH0gfSB0aHJvdyBuZXcgVHlwZUVycm9yKF90eXBlb2YoZSkgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7IH0gcmV0dXJuIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBvKGcsIFwiY29uc3RydWN0b3JcIiwgeyB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGNvbmZpZ3VyYWJsZTogITAgfSksIG8oR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgeyB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb24sIGNvbmZpZ3VyYWJsZTogITAgfSksIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpLCBlLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCAmJiB0LmNvbnN0cnVjdG9yOyByZXR1cm4gISFlICYmIChlID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIgPT09IChlLmRpc3BsYXlOYW1lIHx8IGUubmFtZSkpOyB9LCBlLm1hcmsgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHQsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKSA6ICh0Ll9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBkZWZpbmUodCwgdSwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKSksIHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShnKSwgdDsgfSwgZS5hd3JhcCA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiB7IF9fYXdhaXQ6IHQgfTsgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBjLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSwgZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZS5hc3luYyA9IGZ1bmN0aW9uICh0LCByLCBuLCBvLCBpKSB7IHZvaWQgMCA9PT0gaSAmJiAoaSA9IFByb21pc2UpOyB2YXIgYSA9IG5ldyBBc3luY0l0ZXJhdG9yKHdyYXAodCwgciwgbiwgbyksIGkpOyByZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpID8gYSA6IGEubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQuZG9uZSA/IHQudmFsdWUgOiBhLm5leHQoKTsgfSk7IH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhnKSwgZGVmaW5lKGcsIHUsIFwiR2VuZXJhdG9yXCIpLCBkZWZpbmUoZywgYSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSksIGRlZmluZShnLCBcInRvU3RyaW5nXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7IH0pLCBlLmtleXMgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IE9iamVjdCh0KSwgciA9IFtdOyBmb3IgKHZhciBuIGluIGUpIHIucHVzaChuKTsgcmV0dXJuIHIucmV2ZXJzZSgpLCBmdW5jdGlvbiBuZXh0KCkgeyBmb3IgKDsgci5sZW5ndGg7KSB7IHZhciB0ID0gci5wb3AoKTsgaWYgKHQgaW4gZSkgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDsgfSByZXR1cm4gbmV4dC5kb25lID0gITAsIG5leHQ7IH07IH0sIGUudmFsdWVzID0gdmFsdWVzLCBDb250ZXh0LnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IENvbnRleHQsIHJlc2V0OiBmdW5jdGlvbiByZXNldChlKSB7IGlmICh0aGlzLnByZXYgPSAwLCB0aGlzLm5leHQgPSAwLCB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdCwgdGhpcy5kb25lID0gITEsIHRoaXMuZGVsZWdhdGUgPSBudWxsLCB0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLmFyZyA9IHQsIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpLCAhZSkgZm9yICh2YXIgciBpbiB0aGlzKSBcInRcIiA9PT0gci5jaGFyQXQoMCkgJiYgbi5jYWxsKHRoaXMsIHIpICYmICFpc05hTigrci5zbGljZSgxKSkgJiYgKHRoaXNbcl0gPSB0KTsgfSwgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHsgdGhpcy5kb25lID0gITA7IHZhciB0ID0gdGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247IGlmIChcInRocm93XCIgPT09IHQudHlwZSkgdGhyb3cgdC5hcmc7IHJldHVybiB0aGlzLnJ2YWw7IH0sIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiBkaXNwYXRjaEV4Y2VwdGlvbihlKSB7IGlmICh0aGlzLmRvbmUpIHRocm93IGU7IHZhciByID0gdGhpczsgZnVuY3Rpb24gaGFuZGxlKG4sIG8pIHsgcmV0dXJuIGEudHlwZSA9IFwidGhyb3dcIiwgYS5hcmcgPSBlLCByLm5leHQgPSBuLCBvICYmIChyLm1ldGhvZCA9IFwibmV4dFwiLCByLmFyZyA9IHQpLCAhIW87IH0gZm9yICh2YXIgbyA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBvID49IDA7IC0tbykgeyB2YXIgaSA9IHRoaXMudHJ5RW50cmllc1tvXSwgYSA9IGkuY29tcGxldGlvbjsgaWYgKFwicm9vdFwiID09PSBpLnRyeUxvYykgcmV0dXJuIGhhbmRsZShcImVuZFwiKTsgaWYgKGkudHJ5TG9jIDw9IHRoaXMucHJldikgeyB2YXIgYyA9IG4uY2FsbChpLCBcImNhdGNoTG9jXCIpLCB1ID0gbi5jYWxsKGksIFwiZmluYWxseUxvY1wiKTsgaWYgKGMgJiYgdSkgeyBpZiAodGhpcy5wcmV2IDwgaS5jYXRjaExvYykgcmV0dXJuIGhhbmRsZShpLmNhdGNoTG9jLCAhMCk7IGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTsgfSBlbHNlIGlmIChjKSB7IGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTsgfSBlbHNlIHsgaWYgKCF1KSB0aHJvdyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpOyBpZiAodGhpcy5wcmV2IDwgaS5maW5hbGx5TG9jKSByZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyk7IH0gfSB9IH0sIGFicnVwdDogZnVuY3Rpb24gYWJydXB0KHQsIGUpIHsgZm9yICh2YXIgciA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyByID49IDA7IC0tcikgeyB2YXIgbyA9IHRoaXMudHJ5RW50cmllc1tyXTsgaWYgKG8udHJ5TG9jIDw9IHRoaXMucHJldiAmJiBuLmNhbGwobywgXCJmaW5hbGx5TG9jXCIpICYmIHRoaXMucHJldiA8IG8uZmluYWxseUxvYykgeyB2YXIgaSA9IG87IGJyZWFrOyB9IH0gaSAmJiAoXCJicmVha1wiID09PSB0IHx8IFwiY29udGludWVcIiA9PT0gdCkgJiYgaS50cnlMb2MgPD0gZSAmJiBlIDw9IGkuZmluYWxseUxvYyAmJiAoaSA9IG51bGwpOyB2YXIgYSA9IGkgPyBpLmNvbXBsZXRpb24gOiB7fTsgcmV0dXJuIGEudHlwZSA9IHQsIGEuYXJnID0gZSwgaSA/ICh0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLm5leHQgPSBpLmZpbmFsbHlMb2MsIHkpIDogdGhpcy5jb21wbGV0ZShhKTsgfSwgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKHQsIGUpIHsgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZzsgcmV0dXJuIFwiYnJlYWtcIiA9PT0gdC50eXBlIHx8IFwiY29udGludWVcIiA9PT0gdC50eXBlID8gdGhpcy5uZXh0ID0gdC5hcmcgOiBcInJldHVyblwiID09PSB0LnR5cGUgPyAodGhpcy5ydmFsID0gdGhpcy5hcmcgPSB0LmFyZywgdGhpcy5tZXRob2QgPSBcInJldHVyblwiLCB0aGlzLm5leHQgPSBcImVuZFwiKSA6IFwibm9ybWFsXCIgPT09IHQudHlwZSAmJiBlICYmICh0aGlzLm5leHQgPSBlKSwgeTsgfSwgZmluaXNoOiBmdW5jdGlvbiBmaW5pc2godCkgeyBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7IHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdOyBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5OyB9IH0sIGNhdGNoOiBmdW5jdGlvbiBfY2F0Y2godCkgeyBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7IHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdOyBpZiAoci50cnlMb2MgPT09IHQpIHsgdmFyIG4gPSByLmNvbXBsZXRpb247IGlmIChcInRocm93XCIgPT09IG4udHlwZSkgeyB2YXIgbyA9IG4uYXJnOyByZXNldFRyeUVudHJ5KHIpOyB9IHJldHVybiBvOyB9IH0gdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7IH0sIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uIGRlbGVnYXRlWWllbGQoZSwgciwgbikgeyByZXR1cm4gdGhpcy5kZWxlZ2F0ZSA9IHsgaXRlcmF0b3I6IHZhbHVlcyhlKSwgcmVzdWx0TmFtZTogciwgbmV4dExvYzogbiB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7IH0gfSwgZTsgfVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKG4sIHQsIGUsIHIsIG8sIGEsIGMpIHsgdHJ5IHsgdmFyIGkgPSBuW2FdKGMpLCB1ID0gaS52YWx1ZTsgfSBjYXRjaCAobikgeyByZXR1cm4gdm9pZCBlKG4pOyB9IGkuZG9uZSA/IHQodSkgOiBQcm9taXNlLnJlc29sdmUodSkudGhlbihyLCBvKTsgfVxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IobikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgdCA9IHRoaXMsIGUgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAociwgbykgeyB2YXIgYSA9IG4uYXBwbHkodCwgZSk7IGZ1bmN0aW9uIF9uZXh0KG4pIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGEsIHIsIG8sIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCBuKTsgfSBmdW5jdGlvbiBfdGhyb3cobikgeyBhc3luY0dlbmVyYXRvclN0ZXAoYSwgciwgbywgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBuKTsgfSBfbmV4dCh2b2lkIDApOyB9KTsgfTsgfVxuaW1wb3J0IHsgY3JlYXRlU2xpY2UsIGNyZWF0ZUFzeW5jVGh1bmsgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCB7IHJlc3RQb3N0LCByZXN0RGVsZXRlLCByZXN0R2V0IH0gZnJvbSAnLi4vLi4vaGVscGVycy9hcGknO1xuaW1wb3J0IHsgX18gfSBmcm9tICdAd29yZHByZXNzL2kxOG4nO1xuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5cbi8qKlxuICogUmUtaW5pdGlhbGl6ZSB0aGUgdmlkZW9zIGxpc3RcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIGluaXRWaWRlb3MgPSBjcmVhdGVBc3luY1RodW5rKCd2aWRlb3MvaW5pdCcsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKHBhcmFtcykge1xuICByZXR1cm4gcmVzdEdldCh7XG4gICAgcGF0aDogJ3ZpZGVvcycsXG4gICAgcGFyYW1zOiBwYXJhbXNcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBEZWxldGVzIGEgdmlkZW9cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIGRlbGV0ZVZpZGVvID0gY3JlYXRlQXN5bmNUaHVuaygndmlkZW9zL2RlbGV0ZScsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIGlkID0gZGF0YS5pZDtcbiAgcmV0dXJuIHJlc3REZWxldGUoe1xuICAgIHBhdGg6IFwidmlkZW9zL1wiLmNvbmNhdChpZClcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBEZWxldGUgYSB2aWRlbyBmcm9tIHBsYXlsaXN0XG4gKlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IHZhciB1bkFzc2lnblZpZGVvID0gY3JlYXRlQXN5bmNUaHVuaygndmlkZW9zL2RlbGV0ZScsXG4vLyBSZWR1eCBhY3Rpb24gdHlwZVxuZnVuY3Rpb24gKF9yZWYpIHtcbiAgdmFyIHBsYXlsaXN0SUQgPSBfcmVmLnBsYXlsaXN0SUQsXG4gICAgdmlkZW9JRCA9IF9yZWYudmlkZW9JRDtcbiAgcmV0dXJuIHJlc3REZWxldGUoe1xuICAgIHBhdGg6IFwicGxheWxpc3RzL1wiLmNvbmNhdChwbGF5bGlzdElELCBcIi92aWRlb3NcIiksXG4gICAgZGF0YToge1xuICAgICAgdmlkZW9zOiBbdmlkZW9JRF1cbiAgICB9XG4gIH0pO1xufSk7XG5cbi8qKlxuICogRmV0Y2ggYSBzaW5nbGUgZW1iZWQgb2JqZWN0IHVzaW5nIEFQSS5cbiAqXG4gKiBVc2UgdGhpcyBvbmx5IGlmIHRoZSBlbWJlZCBpcyBub3QgYWxyZWFkeVxuICogZm91bmQgaW4gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRhdGEgVmlkZW8gSUQgYW5kIG90aGVyIGFyZ3MuXG4gKlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IHZhciBmZXRjaEVtYmVkID0gY3JlYXRlQXN5bmNUaHVuaygndmlkZW9zL2ZldGNoRW1iZWQnLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkge1xuICAgIHZhciByZXNwb25zZTtcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBpZiAoIShkYXRhLmlkICYmIGRhdGEuaWQgPiAwKSkge1xuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgcmV0dXJuIHJlc3RHZXQoe1xuICAgICAgICAgICAgcGF0aDogXCJ2aWRlb3MvXCIuY29uY2F0KGRhdGEuaWQsIFwiL2VtYmVkXCIpLFxuICAgICAgICAgICAgcGFyYW1zOiBkYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgLy8gSW5jbHVkZSB0aGUgaWQgaW4gcmVzcG9uc2VcbiAgICAgICAgICByZXNwb25zZS5pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCByZXNwb25zZSk7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZSk7XG4gIH0pKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChfeCkge1xuICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufSgpKTtcblxuLyoqXG4gKiBDcmVhdGUgYSB2aWRlb1xuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWRlbyBWaWRlbyBvYmplY3RcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIGNyZWF0ZVZpZGVvID0gY3JlYXRlQXN5bmNUaHVuaygndmlkZW9zL2NyZWF0ZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciB2aWRlbyA9IGRhdGEudmlkZW87XG4gIHJldHVybiByZXN0UG9zdCh7XG4gICAgcGF0aDogJ3ZpZGVvcycsXG4gICAgZGF0YTogdmlkZW9cbiAgfSk7XG59KTtcblxuLyoqXG4gKiBVcGRhdGUgYSB2aWRlb1xuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWRlbyBWaWRlbyBvYmplY3RcbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgdmFyIHVwZGF0ZVZpZGVvID0gY3JlYXRlQXN5bmNUaHVuaygndmlkZW9zL3VwZGF0ZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gIHZhciB2aWRlbyA9IGRhdGEudmlkZW8sXG4gICAgaWQgPSBkYXRhLmlkO1xuICByZXR1cm4gcmVzdFBvc3Qoe1xuICAgIHBhdGg6IFwidmlkZW9zL1wiLmNvbmNhdChpZCksXG4gICAgZGF0YTogdmlkZW9cbiAgfSk7XG59KTtcblxuLyoqXG4gKiBTZWFyY2ggVmlkZW9zXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHNlYXJjaCBzZWFyY2ggc3RyaW5nXG4gKlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IHZhciBzZWFyY2hWaWRlb3MgPSBjcmVhdGVBc3luY1RodW5rKCd2aWRlb3Mvc2VhcmNoJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIHNlYXJjaCA9IGRhdGEuc2VhcmNoO1xuICByZXR1cm4gcmVzdEdldCh7XG4gICAgcGF0aDogXCJ2aWRlb3NcIixcbiAgICBwYXJhbXM6IHtcbiAgICAgIHNlYXJjaDogc2VhcmNoLFxuICAgICAgZmllbGQ6ICdpZHMnXG4gICAgfVxuICB9KTtcbn0pO1xudmFyIHZpZGVvc1NsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICBuYW1lOiAndmlkZW9zJyxcbiAgaW5pdGlhbFN0YXRlOiB7XG4gICAgdmlkZW9zOiB7fSxcbiAgICBlbWJlZHM6IHt9LFxuICAgIGZpbHRlcmVkOiBbXSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlXG4gIH0sXG4gIHJlZHVjZXJzOiB7XG4gICAgLyoqXG4gICAgICogU2V0IGEgZmlsdGVyZWQgdmlkZW8gaWRzIGluIHN0YXRlLlxuICAgICAqXG4gICAgICogSXQgcmVwbGFjZXMgdGhlIGZpbHRlcmVkIGxpc3Qgd2l0aCB0aGUgcHJvdmlkZWQgb25lXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0YXRlfSBzdGF0ZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYWN0aW9uIG9iamVjdFxuICAgICAqXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBOZXcgU3RhdGUgT2JqZWN0XG4gICAgICovXG4gICAgc2V0RmlsdGVyZWQ6IGZ1bmN0aW9uIHNldEZpbHRlcmVkKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBpZHMgPSBhY3Rpb24ucGF5bG9hZC5pZHM7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIGZpbHRlcmVkOiBpZHNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgZXh0cmFSZWR1Y2VyczogZnVuY3Rpb24gZXh0cmFSZWR1Y2VycyhidWlsZGVyKSB7XG4gICAgYnVpbGRlclxuICAgIC8vIEhhbmRsaW5nIGluaXRWaWRlb3Mgc3RhdHVzXG4gICAgLmFkZENhc2UoaW5pdFZpZGVvcy5wZW5kaW5nLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIC8vIFNldCBMb2FkaW5nXG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIH0pLmFkZENhc2UoaW5pdFZpZGVvcy5mdWxmaWxsZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHZhciBwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICBpZiAocGF5bG9hZC5zdWNjZXNzICYmIHBheWxvYWQuZGF0YSkge1xuICAgICAgICB2YXIgdmlkZW9zID0ge307XG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IFtdO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBsaXN0IGRhdGEuXG4gICAgICAgIHBheWxvYWQuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlbykge1xuICAgICAgICAgIHZpZGVvc1t2aWRlby5pZF0gPSB2aWRlbztcbiAgICAgICAgICBmaWx0ZXJlZC5wdXNoKHZpZGVvLmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzdGF0ZVxuICAgICAgICBzdGF0ZS52aWRlb3MgPSB2aWRlb3M7XG4gICAgICAgIHN0YXRlLmZpbHRlcmVkID0gZmlsdGVyZWQ7XG4gICAgICB9XG4gICAgICBzdGF0ZS5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gICAgfSkuYWRkQ2FzZShpbml0VmlkZW9zLnJlamVjdGVkLCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIC8vIFVwZGF0ZSBTdGF0dXNcbiAgICAgIHN0YXRlLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgfSlcblxuICAgIC8vIEhhbmRsaW5nIGZldGNoRW1iZWRcbiAgICAuYWRkQ2FzZShmZXRjaEVtYmVkLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBlbWJlZCA9IHt9O1xuXG4gICAgICAvLyBVcGRhdGUgc3RhdGVcbiAgICAgIHZhciBwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICBpZiAocGF5bG9hZCAhPT0gbnVsbCAmJiBwYXlsb2FkICE9PSB2b2lkIDAgJiYgcGF5bG9hZC5zdWNjZXNzICYmIHBheWxvYWQgIT09IG51bGwgJiYgcGF5bG9hZCAhPT0gdm9pZCAwICYmIHBheWxvYWQuZGF0YSAmJiBwYXlsb2FkICE9PSBudWxsICYmIHBheWxvYWQgIT09IHZvaWQgMCAmJiBwYXlsb2FkLmRhdGEuaHRtbCkge1xuICAgICAgICBlbWJlZCA9IHBheWxvYWQuZGF0YTtcbiAgICAgICAgdmFyIG5ld0RhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBwYXlsb2FkLmRhdGEpO1xuICAgICAgICBuZXdEYXRhLmlkID0gcGF5bG9hZC5pZDtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHN0YXRlXG4gICAgICAgIHN0YXRlLmVtYmVkc1twYXlsb2FkLmlkXSA9IG5ld0RhdGE7XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIEhhbmRsaW5nIFZpZGVvIENyZWF0ZVxuICAgIC5hZGRDYXNlKGNyZWF0ZVZpZGVvLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgICAgdmFyIHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGlmIChwYXlsb2FkICE9PSBudWxsICYmIHBheWxvYWQgIT09IHZvaWQgMCAmJiBwYXlsb2FkLnN1Y2Nlc3MpIHtcbiAgICAgICAgdmFyIHZpZGVvID0gcGF5bG9hZC5kYXRhO1xuXG4gICAgICAgIC8vIEFkZCB2aWRlbyB0byBzdGF0ZVxuICAgICAgICBpZiAodmlkZW8uaWQgJiYgdmlkZW8uaWQgPiAwKSB7XG4gICAgICAgICAgc3RhdGUudmlkZW9zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS52aWRlb3MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCB2aWRlby5pZCwgdmlkZW8pKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgaWQgdG8gdGhlIGZpbHRlcmVkIGxpc3Qgc28gdGhlIHZpZGVvIHdpbGwgYmUgZGlzcGxheWVkXG4gICAgICAgICAgc3RhdGUuZmlsdGVyZWQgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLmZpbHRlcmVkKSwgW3ZpZGVvLmlkXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gSGFuZGVsaW5nIFZpZGVvIFVwZGF0ZVxuICAgIC5hZGRDYXNlKHVwZGF0ZVZpZGVvLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICB2YXIgbmV3VmlkZW8gPSBwYXlsb2FkLmRhdGE7XG4gICAgICBpZiAocGF5bG9hZCAhPT0gbnVsbCAmJiBwYXlsb2FkICE9PSB2b2lkIDAgJiYgcGF5bG9hZC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB2aWRlb3Mgc3RhdGVcbiAgICAgICAgc3RhdGUudmlkZW9zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS52aWRlb3MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBuZXdWaWRlby5pZCwgbmV3VmlkZW8pKTtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gSGFuZGVsaW5nIFZpZGVvIERlbGV0ZVxuICAgIC5hZGRDYXNlKGRlbGV0ZVZpZGVvLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBpZCA9IGFjdGlvbi5tZXRhLmFyZy5pZCxcbiAgICAgICAgc3VjY2VzcyA9IGFjdGlvbi5wYXlsb2FkLnN1Y2Nlc3M7XG4gICAgICBpZiAoc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgdmlkZW9zID0gc3RhdGUudmlkZW9zLFxuICAgICAgICAgIGZpbHRlcmVkID0gc3RhdGUuZmlsdGVyZWQ7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gZmlsdGVyZWQgbGlzdFxuICAgICAgICBzdGF0ZS5maWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpZCAhPT0gaXRlbTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVsZXRlIHRoZSB2aWRlbyBmcm9tIHRoZSB2aWRlb3Mgb2JqZWN0XG4gICAgICAgIHZhciBuZXdWaWRlb3MgPSBfb2JqZWN0U3ByZWFkKHt9LCB2aWRlb3MpO1xuICAgICAgICBkZWxldGUgbmV3VmlkZW9zW2lkXTtcbiAgICAgICAgc3RhdGUudmlkZW9zID0gbmV3VmlkZW9zO1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBIYW5kZWxpbmcgVmlkZW8gU2VhcmNoXG4gICAgLmFkZENhc2Uoc2VhcmNoVmlkZW9zLnBlbmRpbmcsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICAvLyBTZXQgTG9hZGluZ1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB9KS5hZGRDYXNlKHNlYXJjaFZpZGVvcy5mdWxmaWxsZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgX2FjdGlvbiRwYXlsb2FkO1xuICAgICAgdmFyIGlkcyA9IChhY3Rpb24gPT09IG51bGwgfHwgYWN0aW9uID09PSB2b2lkIDAgfHwgKF9hY3Rpb24kcGF5bG9hZCA9IGFjdGlvbi5wYXlsb2FkKSA9PT0gbnVsbCB8fCBfYWN0aW9uJHBheWxvYWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY3Rpb24kcGF5bG9hZC5kYXRhKSB8fCBbXTtcbiAgICAgIHN0YXRlLmZpbHRlcmVkID0gaWRzO1xuXG4gICAgICAvLyBTZXQgTG9hZGluZ1xuICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSkuYWRkQ2FzZShzZWFyY2hWaWRlb3MucmVqZWN0ZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIFNlbGVjdG9yc1xudmFyIHZpZGVvc1N0YXRlID0gZnVuY3Rpb24gdmlkZW9zU3RhdGUoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLnZpZGVvcztcbn07XG5cbi8qKlxuICogR2V0IHZpZGVvKHMpIG9iamVjdChzKSBieSBpZChzKVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWRlb3NTdGF0ZVxuICogQHBhcmFtIHthcnJheXxzdHJpbmd9IGlkcyB2aWRlb3MgaWRzXG4gKlxuICogQHJldHVybiB7YXJyYXl8b2JqZWN0fGZhbHNlfVxuICovXG5leHBvcnQgdmFyIGdldFZpZGVvcyA9IGNyZWF0ZVNlbGVjdG9yKHZpZGVvc1N0YXRlLCBmdW5jdGlvbiAoXywgaWRzKSB7XG4gIHJldHVybiBpZHM7XG59LCBmdW5jdGlvbiAodmlkZW9zU3RhdGUsIGlkcykge1xuICB2YXIgdmlkZW9zID0gW107XG4gIGlmIChBcnJheS5pc0FycmF5KGlkcykpIHtcbiAgICBpZHMuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIGlmICh2aWRlb3NTdGF0ZS52aWRlb3NbaWRdKSB7XG4gICAgICAgIHZpZGVvcy5wdXNoKHZpZGVvc1N0YXRlLnZpZGVvc1tpZF0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB2aWRlb3M7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlkcyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGlkcyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmlkZW9zU3RhdGUudmlkZW9zW2lkc107XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgaWRzIGlzIG5vdCBwcm92aWRlZCBnZXQgYWxsIHZpZGVvc1xuICAgIHJldHVybiB2aWRlb3NTdGF0ZS52aWRlb3M7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdldCBGaWx0ZXJlZCBJRHNcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gdmlkZW9zU3RhdGVcbiAqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZXhwb3J0IHZhciBnZXRGaWx0ZXJlZElkcyA9IGNyZWF0ZVNlbGVjdG9yKHZpZGVvc1N0YXRlLCBmdW5jdGlvbiAodmlkZW9zU3RhdGUpIHtcbiAgcmV0dXJuIHZpZGVvc1N0YXRlLmZpbHRlcmVkO1xufSk7XG5cbi8qKlxuICogR2V0IGEgc2luZ2xlIGVtYmVkIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWRlb3NTdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHZpZGVvSWRcbiAqXG4gKiBAcmV0dXJuIHthcnJheX1cbiAqL1xuZXhwb3J0IHZhciBnZXRFbWJlZCA9IGNyZWF0ZVNlbGVjdG9yKHZpZGVvc1N0YXRlLCBmdW5jdGlvbiAoXywgaWQpIHtcbiAgcmV0dXJuIGlkO1xufSwgZnVuY3Rpb24gKHZpZGVvc1N0YXRlLCBpZCkge1xuICByZXR1cm4gdmlkZW9zU3RhdGUuZW1iZWRzW2lkXSB8fCBmYWxzZTtcbn0pO1xuXG4vKipcbiAqIEdldCBsb2FkaW5nIHN0YXR1c1xuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB2aWRlb3NTdGF0ZSB0aGUgdmlkZW9zIHN0YXRlIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIGdldExvYWRpbmdTdGF0dXMgPSBjcmVhdGVTZWxlY3Rvcih2aWRlb3NTdGF0ZSwgZnVuY3Rpb24gKHZpZGVvc1N0YXRlKSB7XG4gIHJldHVybiB2aWRlb3NTdGF0ZS5pc0xvYWRpbmc7XG59KTtcblxuLy8gRXhwb3J0IGFjdGlvbnNcbnZhciBzZXRGaWx0ZXJlZCA9IHZpZGVvc1NsaWNlLmFjdGlvbnMuc2V0RmlsdGVyZWQ7XG5leHBvcnQgeyBzZXRGaWx0ZXJlZCB9O1xuZXhwb3J0IGRlZmF1bHQgdmlkZW9zU2xpY2UucmVkdWNlcjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4084\n')},5524:function(module){eval('!function(t,e){ true?module.exports=e():0}(this,(function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}return function(){var e,n=[],i={vendor:void 0,id:void 0,src:void 0,thumbnail:void 0,title:void 0,initialized:!1,y:void 0,debounce:250,lazyload:!0,autoplay:!0,initinview:!1,onLoad:function(t){},onAppend:function(t){},onThumbnailLoad:function(t){}},o={regex:{youtube_nocookie:/(?:youtube-nocookie\\.com\\/\\S*(?:(?:\\/e(?:mbed))?\\/|watch\\?(?:\\S*?&?v\\=)))([a-zA-Z0-9_-]{6,11})/,youtube:/(?:youtube\\.com\\/\\S*(?:(?:\\/e(?:mbed))?\\/|watch\\?(?:\\S*?&?v\\=))|youtu\\.be\\/)([a-zA-Z0-9_-]{6,11})/,vimeo:/vimeo\\.com\\/(?:video\\/)?([0-9]*)(?:\\?|)/},condition:{youtube:function(t){return!(!t||11!=t[1].length)&&t[1]},youtube_nocookie:function(t){return!(!t||11!=t[1].length)&&t[1]},vimeo:function(t){return!!(t&&9===t[1].length||8===t[1].length)&&t[1]}},src:{youtube:function(t){return"https://www.youtube.com/embed/".concat(t.id,"/?autoplay=").concat(t.autoplay?"1":"0","&").concat(t.query)},youtube_nocookie:function(t){return"https://www.youtube-nocookie.com/embed/".concat(t.id,"/?autoplay=").concat(t.autoplay?"1":"0","&").concat(t.query)},vimeo:function(t){return"https://player.vimeo.com/video/".concat(t.id,"/?autoplay=").concat(t.autoplay?"1":"0","&").concat(t.query)}},endpoint:function(t){return"https://noembed.com/embed?url=".concat(t.src)},response:{title:function(t){return t.title},thumbnail:function(t){return t.thumbnail_url}}};function a(t){var n=this;if(t instanceof HTMLElement!=!1&&!t.classList.contains("lazyframe--loaded")){var i={el:t,settings:r(t)};i.el.addEventListener("click",(function(){i.el.appendChild(i.iframe);var e=t.querySelectorAll("iframe");i.settings.onAppend.call(n,e[0])})),e.lazyload?c(i):l(i,i.settings.thumbnail)}}function r(n){var i,a,r=Array.prototype.slice.apply(n.attributes).filter((function(t){return""!==t.value})).reduce((function(t,e){return t[0===e.name.indexOf("data-")?e.name.split("data-")[1]:e.name]=e.value,t}),{}),l=t({},e,r,{y:n.offsetTop,originalSrc:r.src,query:(i=r.src,a=i.split("?"),a[1]?a[1]:null)});if(l.vendor){var u=l.src.match(o.regex[l.vendor]);l.id=o.condition[l.vendor](u)}return l}function l(t){var e=this;!function(t){return!(!t.vendor||t.title&&t.thumbnail)}(t.settings)?c(t,!0):function(t,e){var n=o.endpoint(t.settings),i=new XMLHttpRequest;i.open("GET",n,!0),i.onload=function(){if(i.status>=200&&i.status<400){var n=JSON.parse(i.responseText);e(null,[n,t])}else e(!0)},i.onerror=function(){e(!0)},i.send()}(t,(function(n,i){if(!n){var a=i[0],r=i[1];if(r.settings.title||(r.settings.title=o.response.title(a)),!r.settings.thumbnail){var l=o.response.thumbnail(a);r.settings.thumbnail=l,t.settings.onThumbnailLoad.call(e,l)}c(r,!0)}}))}function u(){var t=this,i=window.innerHeight,o=n.length,a=function(e,n){e.settings.initialized=!0,e.el.classList.add("lazyframe--loaded"),o--,l(e),e.settings.initinview&&e.el.click(),e.settings.onLoad.call(t,e)};n.filter((function(t){return t.settings.y<i})).forEach(a);var r,u,c,s,d=(r=function(){m=f<window.pageYOffset,f=window.pageYOffset,m&&n.filter((function(t){return t.settings.y<i+f&&!1===t.settings.initialized})).forEach(a),0===o&&window.removeEventListener("scroll",d,!1)},u=e.debounce,function(){var t=this,e=arguments,n=function(){s=null,c||r.apply(t,e)},i=c&&!s;clearTimeout(s),s=setTimeout(n,u),i&&r.apply(t,e)}),f=0,m=!1;window.addEventListener("scroll",d,!1)}function c(t,i){if(t.iframe=function(t){var e=document.createDocumentFragment(),n=document.createElement("iframe");t.vendor&&(t.src=o.src[t.vendor](t));n.setAttribute("id","lazyframe-".concat(t.id)),n.setAttribute("src",t.src),n.setAttribute("frameborder",0),n.setAttribute("allowfullscreen",""),t.autoplay&&(n.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture");return e.appendChild(n),e}(t.settings),t.settings.thumbnail&&i&&(t.el.style.backgroundImage="url(".concat(t.settings.thumbnail,")")),t.settings.title&&0===t.el.children.length){var a=document.createDocumentFragment(),r=document.createElement("span");r.className="lazyframe__title",r.innerHTML=t.settings.title,a.appendChild(r),t.el.appendChild(a)}e.lazyload||(t.el.classList.add("lazyframe--loaded"),t.settings.onLoad.call(this,t),n.push(t)),t.settings.initialized||n.push(t)}return function(n){if(e=t({},i,arguments.length<=1?void 0:arguments[1]),"string"==typeof n)for(var o=document.querySelectorAll(n),r=0;r<o.length;r++)a(o[r]);else if(void 0===n.length)a(n);else for(var l=0;l<n.length;l++)a(n[l]);e.lazyload&&u()}}()}));\n//# sourceMappingURL=lazyframe.min.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTUyNC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3BtdWRldi12aWRlb3MvLi9ub2RlX21vZHVsZXMvbGF6eWZyYW1lL2Rpc3QvbGF6eWZyYW1lLm1pbi5qcz9iZGRhIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOih0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6dHx8c2VsZikubGF6eWZyYW1lPWUoKX0odGhpcywoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7cmV0dXJuKHQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgZSxuPVtdLGk9e3ZlbmRvcjp2b2lkIDAsaWQ6dm9pZCAwLHNyYzp2b2lkIDAsdGh1bWJuYWlsOnZvaWQgMCx0aXRsZTp2b2lkIDAsaW5pdGlhbGl6ZWQ6ITEseTp2b2lkIDAsZGVib3VuY2U6MjUwLGxhenlsb2FkOiEwLGF1dG9wbGF5OiEwLGluaXRpbnZpZXc6ITEsb25Mb2FkOmZ1bmN0aW9uKHQpe30sb25BcHBlbmQ6ZnVuY3Rpb24odCl7fSxvblRodW1ibmFpbExvYWQ6ZnVuY3Rpb24odCl7fX0sbz17cmVnZXg6e3lvdXR1YmVfbm9jb29raWU6Lyg/OnlvdXR1YmUtbm9jb29raWVcXC5jb21cXC9cXFMqKD86KD86XFwvZSg/Om1iZWQpKT9cXC98d2F0Y2hcXD8oPzpcXFMqPyY/dlxcPSkpKShbYS16QS1aMC05Xy1dezYsMTF9KS8seW91dHViZTovKD86eW91dHViZVxcLmNvbVxcL1xcUyooPzooPzpcXC9lKD86bWJlZCkpP1xcL3x3YXRjaFxcPyg/OlxcUyo/Jj92XFw9KSl8eW91dHVcXC5iZVxcLykoW2EtekEtWjAtOV8tXXs2LDExfSkvLHZpbWVvOi92aW1lb1xcLmNvbVxcLyg/OnZpZGVvXFwvKT8oWzAtOV0qKSg/OlxcP3wpL30sY29uZGl0aW9uOnt5b3V0dWJlOmZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fDExIT10WzFdLmxlbmd0aCkmJnRbMV19LHlvdXR1YmVfbm9jb29raWU6ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8MTEhPXRbMV0ubGVuZ3RoKSYmdFsxXX0sdmltZW86ZnVuY3Rpb24odCl7cmV0dXJuISEodCYmOT09PXRbMV0ubGVuZ3RofHw4PT09dFsxXS5sZW5ndGgpJiZ0WzFdfX0sc3JjOnt5b3V0dWJlOmZ1bmN0aW9uKHQpe3JldHVyblwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIuY29uY2F0KHQuaWQsXCIvP2F1dG9wbGF5PVwiKS5jb25jYXQodC5hdXRvcGxheT9cIjFcIjpcIjBcIixcIiZcIikuY29uY2F0KHQucXVlcnkpfSx5b3V0dWJlX25vY29va2llOmZ1bmN0aW9uKHQpe3JldHVyblwiaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20vZW1iZWQvXCIuY29uY2F0KHQuaWQsXCIvP2F1dG9wbGF5PVwiKS5jb25jYXQodC5hdXRvcGxheT9cIjFcIjpcIjBcIixcIiZcIikuY29uY2F0KHQucXVlcnkpfSx2aW1lbzpmdW5jdGlvbih0KXtyZXR1cm5cImh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby9cIi5jb25jYXQodC5pZCxcIi8/YXV0b3BsYXk9XCIpLmNvbmNhdCh0LmF1dG9wbGF5P1wiMVwiOlwiMFwiLFwiJlwiKS5jb25jYXQodC5xdWVyeSl9fSxlbmRwb2ludDpmdW5jdGlvbih0KXtyZXR1cm5cImh0dHBzOi8vbm9lbWJlZC5jb20vZW1iZWQ/dXJsPVwiLmNvbmNhdCh0LnNyYyl9LHJlc3BvbnNlOnt0aXRsZTpmdW5jdGlvbih0KXtyZXR1cm4gdC50aXRsZX0sdGh1bWJuYWlsOmZ1bmN0aW9uKHQpe3JldHVybiB0LnRodW1ibmFpbF91cmx9fX07ZnVuY3Rpb24gYSh0KXt2YXIgbj10aGlzO2lmKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCE9ITEmJiF0LmNsYXNzTGlzdC5jb250YWlucyhcImxhenlmcmFtZS0tbG9hZGVkXCIpKXt2YXIgaT17ZWw6dCxzZXR0aW5nczpyKHQpfTtpLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChmdW5jdGlvbigpe2kuZWwuYXBwZW5kQ2hpbGQoaS5pZnJhbWUpO3ZhciBlPXQucXVlcnlTZWxlY3RvckFsbChcImlmcmFtZVwiKTtpLnNldHRpbmdzLm9uQXBwZW5kLmNhbGwobixlWzBdKX0pKSxlLmxhenlsb2FkP2MoaSk6bChpLGkuc2V0dGluZ3MudGh1bWJuYWlsKX19ZnVuY3Rpb24gcihuKXt2YXIgaSxhLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KG4uYXR0cmlidXRlcykuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5cIlwiIT09dC52YWx1ZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbMD09PWUubmFtZS5pbmRleE9mKFwiZGF0YS1cIik/ZS5uYW1lLnNwbGl0KFwiZGF0YS1cIilbMV06ZS5uYW1lXT1lLnZhbHVlLHR9KSx7fSksbD10KHt9LGUscix7eTpuLm9mZnNldFRvcCxvcmlnaW5hbFNyYzpyLnNyYyxxdWVyeTooaT1yLnNyYyxhPWkuc3BsaXQoXCI/XCIpLGFbMV0/YVsxXTpudWxsKX0pO2lmKGwudmVuZG9yKXt2YXIgdT1sLnNyYy5tYXRjaChvLnJlZ2V4W2wudmVuZG9yXSk7bC5pZD1vLmNvbmRpdGlvbltsLnZlbmRvcl0odSl9cmV0dXJuIGx9ZnVuY3Rpb24gbCh0KXt2YXIgZT10aGlzOyFmdW5jdGlvbih0KXtyZXR1cm4hKCF0LnZlbmRvcnx8dC50aXRsZSYmdC50aHVtYm5haWwpfSh0LnNldHRpbmdzKT9jKHQsITApOmZ1bmN0aW9uKHQsZSl7dmFyIG49by5lbmRwb2ludCh0LnNldHRpbmdzKSxpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9wZW4oXCJHRVRcIixuLCEwKSxpLm9ubG9hZD1mdW5jdGlvbigpe2lmKGkuc3RhdHVzPj0yMDAmJmkuc3RhdHVzPDQwMCl7dmFyIG49SlNPTi5wYXJzZShpLnJlc3BvbnNlVGV4dCk7ZShudWxsLFtuLHRdKX1lbHNlIGUoITApfSxpLm9uZXJyb3I9ZnVuY3Rpb24oKXtlKCEwKX0saS5zZW5kKCl9KHQsKGZ1bmN0aW9uKG4saSl7aWYoIW4pe3ZhciBhPWlbMF0scj1pWzFdO2lmKHIuc2V0dGluZ3MudGl0bGV8fChyLnNldHRpbmdzLnRpdGxlPW8ucmVzcG9uc2UudGl0bGUoYSkpLCFyLnNldHRpbmdzLnRodW1ibmFpbCl7dmFyIGw9by5yZXNwb25zZS50aHVtYm5haWwoYSk7ci5zZXR0aW5ncy50aHVtYm5haWw9bCx0LnNldHRpbmdzLm9uVGh1bWJuYWlsTG9hZC5jYWxsKGUsbCl9YyhyLCEwKX19KSl9ZnVuY3Rpb24gdSgpe3ZhciB0PXRoaXMsaT13aW5kb3cuaW5uZXJIZWlnaHQsbz1uLmxlbmd0aCxhPWZ1bmN0aW9uKGUsbil7ZS5zZXR0aW5ncy5pbml0aWFsaXplZD0hMCxlLmVsLmNsYXNzTGlzdC5hZGQoXCJsYXp5ZnJhbWUtLWxvYWRlZFwiKSxvLS0sbChlKSxlLnNldHRpbmdzLmluaXRpbnZpZXcmJmUuZWwuY2xpY2soKSxlLnNldHRpbmdzLm9uTG9hZC5jYWxsKHQsZSl9O24uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5zZXR0aW5ncy55PGl9KSkuZm9yRWFjaChhKTt2YXIgcix1LGMscyxkPShyPWZ1bmN0aW9uKCl7bT1mPHdpbmRvdy5wYWdlWU9mZnNldCxmPXdpbmRvdy5wYWdlWU9mZnNldCxtJiZuLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuc2V0dGluZ3MueTxpK2YmJiExPT09dC5zZXR0aW5ncy5pbml0aWFsaXplZH0pKS5mb3JFYWNoKGEpLDA9PT1vJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGQsITEpfSx1PWUuZGVib3VuY2UsZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLG49ZnVuY3Rpb24oKXtzPW51bGwsY3x8ci5hcHBseSh0LGUpfSxpPWMmJiFzO2NsZWFyVGltZW91dChzKSxzPXNldFRpbWVvdXQobix1KSxpJiZyLmFwcGx5KHQsZSl9KSxmPTAsbT0hMTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGQsITEpfWZ1bmN0aW9uIGModCxpKXtpZih0LmlmcmFtZT1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO3QudmVuZG9yJiYodC5zcmM9by5zcmNbdC52ZW5kb3JdKHQpKTtuLnNldEF0dHJpYnV0ZShcImlkXCIsXCJsYXp5ZnJhbWUtXCIuY29uY2F0KHQuaWQpKSxuLnNldEF0dHJpYnV0ZShcInNyY1wiLHQuc3JjKSxuLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsMCksbi5zZXRBdHRyaWJ1dGUoXCJhbGxvd2Z1bGxzY3JlZW5cIixcIlwiKSx0LmF1dG9wbGF5JiYobi5hbGxvdz1cImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXCIpO3JldHVybiBlLmFwcGVuZENoaWxkKG4pLGV9KHQuc2V0dGluZ3MpLHQuc2V0dGluZ3MudGh1bWJuYWlsJiZpJiYodC5lbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9XCJ1cmwoXCIuY29uY2F0KHQuc2V0dGluZ3MudGh1bWJuYWlsLFwiKVwiKSksdC5zZXR0aW5ncy50aXRsZSYmMD09PXQuZWwuY2hpbGRyZW4ubGVuZ3RoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtyLmNsYXNzTmFtZT1cImxhenlmcmFtZV9fdGl0bGVcIixyLmlubmVySFRNTD10LnNldHRpbmdzLnRpdGxlLGEuYXBwZW5kQ2hpbGQociksdC5lbC5hcHBlbmRDaGlsZChhKX1lLmxhenlsb2FkfHwodC5lbC5jbGFzc0xpc3QuYWRkKFwibGF6eWZyYW1lLS1sb2FkZWRcIiksdC5zZXR0aW5ncy5vbkxvYWQuY2FsbCh0aGlzLHQpLG4ucHVzaCh0KSksdC5zZXR0aW5ncy5pbml0aWFsaXplZHx8bi5wdXNoKHQpfXJldHVybiBmdW5jdGlvbihuKXtpZihlPXQoe30saSxhcmd1bWVudHMubGVuZ3RoPD0xP3ZvaWQgMDphcmd1bWVudHNbMV0pLFwic3RyaW5nXCI9PXR5cGVvZiBuKWZvcih2YXIgbz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG4pLHI9MDtyPG8ubGVuZ3RoO3IrKylhKG9bcl0pO2Vsc2UgaWYodm9pZCAwPT09bi5sZW5ndGgpYShuKTtlbHNlIGZvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCsrKWEobltsXSk7ZS5sYXp5bG9hZCYmdSgpfX0oKX0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhenlmcmFtZS5taW4uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5524\n')}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var I=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(I.exports,I,I.exports,__webpack_require__),I.loaded=!0,I.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=function(e,t,I,n){if(!t){var i=1/0;for(d=0;d<deferred.length;d++){t=deferred[d][0],I=deferred[d][1],n=deferred[d][2];for(var l=!0,g=0;g<t.length;g++)(!1&n||i>=n)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](t[g])}))?t.splice(g--,1):(l=!1,n<i&&(i=n));if(l){deferred.splice(d--,1);var c=I();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=deferred.length;d>0&&deferred[d-1][2]>n;d--)deferred[d]=deferred[d-1];deferred[d]=[t,I,n]},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var I=Object.create(null);__webpack_require__.r(I);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((function(t){n[t]=function(){return e[t]}}));return n.default=function(){return e},__webpack_require__.d(I,n),I},__webpack_require__.d=function(e,t){for(var I in t)__webpack_require__.o(t,I)&&!__webpack_require__.o(e,I)&&Object.defineProperty(e,I,{enumerable:!0,get:t[I]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.j=463,function(){var e={463:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,I){var n,i,l=I[0],g=I[1],c=I[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(n in g)__webpack_require__.o(g,n)&&(__webpack_require__.m[n]=g[n]);if(c)var a=c(__webpack_require__)}for(t&&t(I);d<l.length;d++)i=l[d],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(a)},I=self.webpackChunkwpmudev_videos=self.webpackChunkwpmudev_videos||[];I.forEach(t.bind(null,0)),I.push=t.bind(null,I.push.bind(I))}();var __webpack_exports__=__webpack_require__.O(void 0,[504,996],(function(){return __webpack_require__(748)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();