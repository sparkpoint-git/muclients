(()=>{"use strict";var e={9781:(e,t,n)=>{t._j=t.Ay=void 0;var a=n(5676);Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"_j",{enumerable:!0,get:function(){return a.useMediaLayout}})},5676:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var a=n(1594),i=n(1606);t.mockMediaQueryList={media:"",matches:!1,onchange:i.noop,addListener:i.noop,removeListener:i.noop,addEventListener:i.noop,removeEventListener:i.noop,dispatchEvent:function(e){return!0}};var s=function(e){return function(n,s){void 0===s&&(s=!1);var r=a.useState(s),o=r[0],l=r[1],d=i.queryObjectToString(n);return e((function(){var e=!0,n="undefined"==typeof window?t.mockMediaQueryList:window.matchMedia(d),a=function(){e&&l(Boolean(n.matches))};return n.addListener(a),l(n.matches),function(){e=!1,n.removeListener(a)}}),[d]),o}};t.useMedia=s(a.useEffect),t.useMediaLayout=s(a.useLayoutEffect),t.default=t.useMedia},7813:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()}},1606:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var a=n(7813);Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return a.default}});var i=n(194);Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return i.default}});var s=n(1648);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return s.default}})},1648:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},194:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(7813),i=" and ";t.default=function(e){return"string"==typeof e?e:Object.entries(e).map((function(e){var t=e[0],n=e[1],i=a.default(t),s=n;return"boolean"==typeof s?s?i:"not "+i:("number"==typeof s&&/[height|width]$/.test(i)&&(s+="px"),"("+i+": "+s+")")})).join(i)}},1594:e=>{e.exports=React}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=n(1594),i=n.n(a);const s=ReactDOM,r=wp.i18n,o=FL.Assistant.ui,l=ReactRouterDOM,d=classnames;var c=n.n(d);const u=FL.vendors.BBFluid,m=FL.vendors.BBAppCore,p=FL.Assistant.data,f=({children:e})=>{const{history:t}=(0,p.useSystemState)(!1),n={initialIndex:t.index};return t.entries&&t.entries.length&&(n.initialEntries=t.entries),i().createElement(l.MemoryRouter,n,e)},g=wp.keycodes,h=FramerMotion;var b=n(9781);const y=(0,a.memo)((()=>{const{isAppHidden:e}=(0,p.useSystemState)(),{selectApp:t,selectHomeApp:n}=(0,p.getSystemSelectors)(),{isMobile:a,isCompactHeight:s,application:d}=o.Env.use(),{toggleIsShowingUI:u,setIsAppHidden:m}=(0,p.getSystemActions)(),f=(0,b.Ay)({maxHeight:400}),y=(0,l.useHistory)(),{pathname:v}=y.location,w="beaver-builder"===d,x=0===y.index,L=v.startsWith("/fl-manage"),S=()=>{y.go(-y.length),y.replace("/",{})},M=(t=!1,n=(()=>{}))=>{t?m(!e):(m(!1),n())},A=c()("fl-asst-sidebar","frame-drag-handle",{"fl-asst-sidebar-compact":s}),C=()=>{const t=n();return t?i().createElement(h.motion.li,{layout:!0,transition:{layoutX:{duration:0}}},i().createElement(o.Button,{appearance:x&&!e?"normal":"transparent",shape:"round",size:"lg",isSelected:x&&!e,onClick:()=>M(x,S),className:"disable-while-sorting",title:t.label},i().createElement(o.Icon.Safely,{icon:t.icon,isSelected:x&&!e}))):null},I=()=>{const n=t("fl-manage");return i().createElement(h.motion.li,{layout:!0,transition:{layoutX:{duration:0}}},i().createElement(o.Button,{appearance:L&&!e?"normal":"transparent",shape:"round",size:"lg",isSelected:L&&!e,onClick:()=>M(L,(()=>y.push({pathname:`/${n.handle}`,state:n}))),className:"disable-while-sorting",title:n.label},i().createElement(o.Icon.Safely,{icon:n.icon,isSelected:L&&!e})))},P=()=>{let e=()=>u(!1);if(w){if(void 0===FL.Builder||"function"!=typeof FL.Builder.togglePanel)return null;e=FL.Builder.togglePanel}return i().createElement(o.Button,{appearance:"transparent",onClick:e,className:"fl-asst-sidebar-close-button",title:(0,r.__)("Hide Panel"),shape:"round",size:"lg",style:{margin:"0 auto"}},i().createElement(o.Icon.Close,null))};return i().createElement("div",{className:A,style:{cursor:"move"}},i().createElement("div",{className:"fl-asst-sidebar-cell fl-asst-sidebar-cell-top"},i().createElement(P,null)),i().createElement("div",{className:"fl-asst-sidebar-cell fl-asst-sidebar-cell-middle"},i().createElement(o.App.List,{before:i().createElement(C,null),after:i().createElement(I,null),limit:f?3:s?4:a?3:5},(({label:t,handle:n,icon:a,moveDown:s,moveUp:r})=>{const l={pathname:`/${n}`},d=n===v.split("/")[1],c={icon:a,context:"sidebar",isSelected:d};return i().createElement(o.Button,{appearance:d&&!e?"normal":"transparent",shape:"round",size:"lg",isSelected:d&&!e,onClick:()=>{M(d,(()=>y.push(l)))},title:t,onKeyDown:e=>{e.keyCode===g.DOWN&&(s(),e.preventDefault()),e.keyCode===g.UP&&(r(),e.preventDefault())}},i().createElement(E,c))}))),!a&&i().createElement("div",{className:"fl-asst-sidebar-cell disable-while-sorting",style:{minHeight:60}}))})),E=(0,a.memo)((e=>i().createElement(o.Icon.Safely,e))),v=y,w=()=>{const{apps:e,window:t,isAppHidden:n,homeKey:a}=(0,p.useSystemState)(["apps","window","isAppHidden","homeKey"]),{origin:s}=t,r=s[0]?"right":"left",{isMobile:d,application:u}=o.Env.use(),f="right"===r?"row-reverse":"row",g="beaver-builder"===u,h=(0,l.useLocation)().pathname.split("/")[1],b=c()({"fl-asst-main":!0,"fl-asst-main-sidebar-only":n,"fl-asst-is-mobile":d,[`fl-asst-app-${h}`]:h}),y=!n||g;return i().createElement("div",{className:b,style:{flexDirection:f}},i().createElement(v,null),y&&i().createElement("div",{className:"fl-asst-main-content"},i().createElement(m.App.Content,{apps:e,defaultApp:a,loading:o.Page.Loading})),i().createElement(o.Modal.Root,null))};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(null,arguments)}const L={top:0,left:0,bottom:0,right:0},S=(e=L)=>{const t=(()=>{const{isShowingAdminBar:e}=(0,p.getSystemConfig)(),t=(0,b._j)({maxWidth:782}),n=(0,b._j)({maxWidth:600}),{application:a}=o.Env.use();return"beaver-builder"===a?44:document.body.classList.contains("block-editor-page")?61:!e||n?0:t?46:32})();let n=e;return Number.isInteger(e)&&(n={top:e,right:e,bottom:e,left:e}),{...n,top:n.top+t}},M=(e=0,t,n)=>e?`calc( 100% - ${t+n.right}px )`:n.left,A=e=>e>=window.innerWidth/2,C=e=>e>=window.innerHeight/2,I=({x:e,y:t})=>[A(e)?1:0,C(t)?1:0],P=(e,t)=>typeof e!=typeof t||e[0]!==t[0]||e[1]!==t[1],k=({x:e,top:t,pinnedRight:n,maxWidth:s,minWidth:r,setWidth:o,size:l,getSizeName:d})=>{const c=(0,a.useRef)(e.get()),u=(0,a.useRef)(l);return i().createElement(h.motion.div,{className:"fl-asst-frame-resize-handle",drag:"x",dragMomentum:!1,onDrag:()=>{let t=parseInt(Math.abs(e.get()));if(t>c.current+10||t<c.current-10){const e=d(t);e!==u.current&&(o(t),u.current=e),c.current=t}},onDragEnd:()=>{let t=parseInt(Math.abs(e.get()));s<t?t=s:r>t&&(t=r),o(t)},dragElastic:0,dragConstraints:{left:n?-Math.abs(s):r,right:n?-Math.abs(r):s},style:{x:e,width:6,position:"fixed",top:t,bottom:0,left:n?"auto":0,right:n?0:"auto"}})},_=()=>i().createElement("div",{className:"frame-drag-handle",style:{display:"flex",justifyContent:"center",paddingTop:4,paddingBottom:10,position:"absolute",top:0,left:0,right:0,zIndex:5,cursor:"move",color:"var(--fluid-opaque-7)"}},i().createElement("svg",{width:"40",height:"4",viewBox:"0 0 40 4",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M2,2 L38,2",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"}))),B=({left:e,...t})=>i().createElement("div",x({style:{position:"fixed",top:0,bottom:0,left:e,width:60,background:"var(--fluid-blue)",zIndex:9998}},t)),j=({children:e,isHidden:t=!1,className:n,...s})=>{const{window:r,isAppHidden:l}=(0,p.useSystemState)(["window","isAppHidden"]),{width:d=v,origin:m}=r,[f]=m,{setWindow:g}=(0,p.getSystemActions)(),{minWidth:y,maxWidth:E,defaultWidth:v,breakpoint:w}=(0,p.getSystemConfig)().frameDefaults,L="beaver-builder"===o.Env.use().application,C=(0,h.useAnimation)(),I=(0,h.useDragControls)(),[P,j]=(0,a.useState)(!1),O=S(),H=JSON.stringify(O),{top:D,left:F,width:N,height:W}=((e,t,n=!1,a=420)=>{const i=n?60:a;return{top:t.top,left:M(e,i,t),width:i,height:`calc( 100vh - ${t.top+t.bottom}px )`}})(f,O,l,d),z=((e,t)=>e||t?"0 0 0px hsla( 210, 0%, 0%, 0 )":"0 0 20px hsla( 210, 20%, 30%, .15 )")(t,l),R=y,T=E>window.innerWidth?window.innerWidth:E,$=(0,h.useMotionValue)(f?-Math.abs(d):d),q=(0,h.useTransform)($,(e=>l?60:Math.abs(e))),U=(0,h.useTransform)(q,(e=>f?`calc( 100% - ${e+O.right}px )`:0)),K=f?N:-Math.abs(N),Q=(0,b.Ay)({maxWidth:600});(0,a.useEffect)((()=>{const e=document.documentElement;return e.classList.add(f?"fl-asst-pinned-right":"fl-asst-pinned-left"),()=>{e.classList.remove("fl-asst-pinned-right","fl-asst-pinned-left")}}),[]),(0,a.useEffect)((()=>{const e=document.documentElement;t?C.set({x:K,left:F}):(C.start({x:0,y:0,left:F}),f?($.set(-Math.abs(d)),e.classList.replace("fl-asst-pinned-left","fl-asst-pinned-right")):($.set(d),e.classList.replace("fl-asst-pinned-right","fl-asst-pinned-left")))}),[f]),(0,a.useEffect)((()=>{C.set({top:D,height:W})}),[H]),(0,a.useEffect)((()=>{C.start({width:N,left:F,boxShadow:z})}),[l]),(0,a.useEffect)((()=>{const e=f?N:-Math.abs(N);C.start({x:t?e:0,boxShadow:z}).then((()=>{C.set({pointerEvents:t?"none":"auto"})}));const n=document.documentElement;t?n.classList.remove("fl-asst-pinned-right","fl-asst-pinned-left"):n.classList.add(f?"fl-asst-pinned-right":"fl-asst-pinned-left")}),[t]),(0,a.useEffect)((()=>{const e=Math.floor(q.get());d!==e&&$.set(f?-Math.abs(d):d)}),[d]);const X=e=>e>=w?"medium":"compact",J=X(d),V={size:J,isMedium:"medium"===J,isCompact:"compact"===J,isDragging:!1===P},Z=c()("fl-asst-frame",{[`fluid-frame-size-${J}`]:J},n),G=!1===P&&!t&&!l;return i().createElement(u.Frame.Context.Provider,{value:V},!1!==P&&i().createElement(B,{left:M(P,60,O)}),i().createElement(h.motion.div,x({className:Z,animate:C,transition:{duration:.2},initial:{x:t?K:0,top:D,left:F,width:N,height:W,boxShadow:z},style:{width:q,left:U,position:"fixed",overflow:"auto",boxSizing:"border-box",background:"var(--fluid-background)",zIndex:Q||L?999999:9999,display:"flex",flexDirection:"column",pointerEvents:t?"none":null,contain:"strict",willChange:"transform"},drag:!0,dragControls:I,onDragStart:(e,t)=>{e.target.classList.contains("frame-drag-handle")||I.componentControls.forEach((n=>n.stop(e,t)))},onDrag:(e,t)=>{A(t.point.x)?1!==P&&j(1):0!==P&&j(0)},onDragEnd:(e,t)=>{if(j(!1),!e.target.classList.contains("frame-drag-handle"))return;const n=A(t.point.x)?1:0;f!==n?((e="left")=>{let t=[...r.origin];t[0]="right"===e?1:0,g({...r,origin:t})})(n?"right":"left"):C.start({x:0,y:0})}},s),i().createElement(_,null),e),G&&i().createElement(k,{x:$,top:D,pinnedRight:f,maxWidth:T,minWidth:R,setWidth:e=>g({...r,width:e}),size:J,getSizeName:X}))},O=({...e})=>{const t=(0,h.useAnimation)(),{window:n}=(0,p.useSystemState)(["window"]),{origin:s}=n,{toggleIsShowingUI:r,setWindow:l}=(0,p.getSystemActions)(),[d,c]=(0,a.useState)(!1),u=50,m=S(15),f=(e,t,n)=>e?`calc( 100vh - ${t+n.bottom}px )`:n.top;return(0,a.useEffect)((()=>{t.start({x:0,y:0,top:f(s[1],u,m),left:M(s[0],u,m)})}),[s]),i().createElement(i().Fragment,null,i().createElement(h.motion.button,x({onClick:()=>{d||r(),c(!1)},initial:{position:"fixed",top:f(s[1],u,m),left:M(s[0],u,m),display:"flex",alignItems:"center",justifyContent:"center",background:"var(--fluid-opaque-13)",width:u,height:u,borderRadius:25,scale:1,zIndex:99999},animate:t,transition:{type:"tween"},drag:!0,whileDrag:{scale:1.1},onDrag:(e,t)=>{const n=I(t.point);P(d,n)&&c(s)},onDragEnd:(e,a)=>{const i=I(a.point);P(s,i)?l({...n,origin:i}):t.start({x:0,y:0})},"aria-label":"Assistant","aria-expanded":!1,"aria-disabled":!1},e),i().createElement(o.Icon.Pencil,{size:36})))},H=()=>{const e=(0,l.useLocation)(),t=(0,l.useHistory)(),{setHistory:n}=(0,p.getSystemActions)();return(0,a.useEffect)((()=>{n(t.index,t.entries)}),[e]),null},D=({displayingIn:e,children:t})=>i().createElement(m.Root,{router:f},i().createElement(H,null),i().createElement(o.Env.Provider,{application:e},t)),F=()=>{const{isShowingAdminBar:e,isAdmin:t}=(0,p.getSystemConfig)(),{appearance:n,window:a}=(0,p.useSystemState)(["window","appearance"]),{isHidden:s,hiddenAppearance:r}=a,o=!t&&s&&("admin_bar"!==r||!e);return i().createElement(D,null,i().createElement(u.Color.SchemeProvider,{value:n.brightness},i().createElement(j,{isHidden:s},i().createElement(w,null)),o&&i().createElement(O,null)))},N=()=>i().createElement("div",{id:"fl-asst-mount"}),W=()=>i().createElement(D,{displayingIn:"beaver-builder"},i().createElement(j,null,i().createElement(w,null))),z=()=>{const{setWindow:e}=(0,p.getSystemActions)(),t=document.createElement("button");t.classList.add("skip-link","fl-asst-screen-reader-text"),t.innerText=(0,r.__)("Skip to Assistant"),t.tabIndex=1,t.addEventListener("click",(()=>{e({isHidden:!1});const t=document.getElementById("fl-asst-close-panel");t&&t.focus()})),document.body.prepend(t)},R=FL.Assistant;document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#wp-admin-bar-fl_assistant_toggle_ui");e&&e.addEventListener("click",R.toggleUI)}));const T=parseInt(i().version.split(".")[0])>=18;let $,q;const U=()=>{void 0!==q&&T?q.unmount():(0,s.unmountComponentAtNode)($)},K=()=>{$=document.getElementById("fl-asst-mount"),$?U():($=document.createElement("div"),$.classList.add("fl-asst-mount","fl-asst","fl-asst-plugin","fluid","fl","uid"),$.id="fl-asst-mount",document.body.appendChild($)),T?(q=(0,s.createRoot)($),q.render(i().createElement(F,null))):(0,s.render)(i().createElement(F,null),$)},Q=()=>{const{registerPanel:e,togglePanel:t}=FL.Builder;e("assistant",{wrapClassName:"fl-asst",label:(0,r.__)("Assistant"),root:N,frame:!1,onMount:()=>{$=document.getElementById("fl-asst-mount"),T?(q=(0,s.createRoot)($),q.render(i().createElement(W,null))):(0,s.render)(i().createElement(W,null),$)},onUnMount:U});const n=document.querySelector(".fl-builder-fl-assistant-button");n&&n.addEventListener("click",(()=>t("assistant")))},X=()=>{if(FLBuilder.addHook("endEditingSession",K),FLBuilder.addHook("restartEditingSession",U),"Builder"in FL&&"registerPanel"in FL.Builder){const{registerPanel:e,togglePanel:t}=FL.Builder;e("assistant",{wrapClassName:"fl-asst",label:(0,r.__)("Assistant"),root:W,render:W,frame:!1});const n=document.querySelector(".fl-builder-fl-assistant-button");n&&n.addEventListener("click",(()=>t("assistant")))}},J=document.getElementById("fl-builder-ui-iframe");J?J.addEventListener("load",Q):"FLBuilder"in window?FLBuilder.addHook("didInitUI",X):K(),wp&&"plugins"in wp&&"editPost"in wp&&wp.plugins.registerPlugin("fl-asst-more-menu-item",{render:()=>{const{PluginMoreMenuItem:e}=wp.editPost;return i().createElement(e,{icon:i().createElement(o.Icon.Pencil,null),onClick:FL.Assistant.toggleUI},(0,r.__)("Assistant"))}}),z()})();